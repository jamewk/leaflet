!function(t,e,r,n){"use strict";function o(t,e){return"string"==typeof e&&(e=o(e)),e=e||document,e.querySelector(t)}function a(t,e){return"string"==typeof e&&(e=o(e)),e=e||document,[].concat(Y(e.querySelectorAll(t)))}function i(t){var e=document.createElement("div");e.innerHTML=t;var r=e.firstChild;return r}function s(t,e){if(t&&document.body.appendChild(i(t)),e){var r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),document.head.appendChild(r)}}function u(t){var e=o("#"+t);return"content"in e&&(e=e.content),document.importNode(e,!0).children[0]}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.position=e.position||"bottomright",t.parameter.observedProperty.categories?new J(t,e):new q(t,e)}function c(t){var e=function(t){function e(){return V(this,e),F(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return G(e,t),e}(t);for(var r in Q)e.prototype[r]=Q[r];return e}function h(t){var e=parseInt(t.substr(0,4)),r=parseInt(t.substr(5,2)),n=parseInt(t.substr(8,2));return Date.UTC(e,r-1,n)}function f(t){var e=new Date(t).toISOString(),r=e.substr(0,10);return r}function p(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function d(t,e){return e={exports:{}},t(e,e.exports),e.exports}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;if(1===e)return y([t[0]]);var r=document.createElement("canvas");r.width=e,r.height=1;for(var n=r.getContext("2d"),o=n.createLinearGradient(0,0,e-1,0),a=t.length,i=0;i<a;i++)o.addColorStop(i/(a-1),t[i]);n.fillStyle=o,n.fillRect(0,0,e,1);for(var s=new Uint8Array(e),u=new Uint8Array(e),l=new Uint8Array(e),c=n.getImageData(0,0,e,1).data,h=0,f=0;h<c.length;h+=4,f++)s[f]=c[h],u[f]=c[h+1],l[f]=c[h+2];return{steps:s.length,red:s,green:u,blue:l}}function y(t){var e=document.createElement("canvas");e.width=1,e.height=1;for(var r=e.getContext("2d"),n=t.length,o=new Uint8Array(n),a=new Uint8Array(n),i=new Uint8Array(n),s=0;s<t.length;s++){r.fillStyle=t[s],r.fillRect(0,0,1,1);var u=r.getImageData(0,0,1,1).data;o[s]=u[0],a[s]=u[1],i[s]=u[2]}return{steps:o.length,red:o,green:a,blue:i}}function g(t){var e=y([t]);return{r:e.red[0],g:e.green[0],b:e.blue[0]}}function _(t){if(t){var e=t.colors,r=void 0;return r="linear"===t.interpolation?v(e,t.steps):y(e)}}function m(t,e,r){var n=Math.trunc((e.steps-1+.9999)*(t-r[0])/(r[1]-r[0]));return n}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;if(t[0]===t[1]){var r=t[0]*e;return[t[0]-r,t[1]+r]}return t}function x(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++){var n=t[r];if(n<0||n>255)throw new Error("Array value must be within [0,255], but is: "+n);e[r]=n}return e}function k(t){return function(t){function e(){return V(this,e),F(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return G(e,t),U(e,[{key:"initializePalette",value:function(){var t=this,e=this.options,r=this.parameter;if(!r)return Promise.resolve();var n=r.observedProperty.categories;if(n&&this._initCategoryIdxMap(),this._palette||(e.palette?this._palette=e.palette:r.preferredPalette?this._palette=_(r.preferredPalette):n?n.every(function(t){return t.preferredColor})?this._palette=y(n.map(function(t){return t.preferredColor})):this._palette=vt(n.length):this._palette=dt()),n&&n.length!==this._palette.steps)throw new Error("Categorical palettes must match the number of categories of the parameter");return this._paletteExtent=this._paletteExtent||e.paletteExtent,this.parameter.categoryEncoding&&!function(){var e=t._categoryIdxMap,r=e.length-1;t.getPaletteIndex=function(t){if(!(null===t||t<0||t>r)){var n=e[t];if(255!==n)return n}}}(),!this.canUsePalette||this.canUsePalette()?this.setPaletteExtent(this._paletteExtent,!0).then(function(){return t._updatePaletteIndexFn()}):Promise.resolve()}},{key:"_updatePaletteIndexFn",value:function(){var t=this;this.parameter.categoryEncoding||!function(){var e=t.palette,r=t.paletteExtent;t.getPaletteIndex=function(t){if(null!==t){var n=m(t,e,r);return n}}}()}},{key:"setPaletteExtent",value:function(t,e){var r=this;if(this.parameter.observedProperty.categories)return Promise.resolve();var n=this.paletteExtent,o=function(t){return!Array.isArray(n)||(n[0]!==t[0]||n[1]!==t[1])},a=Array.isArray(t)?Promise.resolve(t):this.computePaletteExtent(t);return a.then(function(t){Array.isArray(t)&&isNaN(t[0])||o(t)&&(r._paletteExtent=t,r._updatePaletteIndexFn(),e||r.redraw(),r.fire("paletteExtentChange"))})}},{key:"_initCategoryIdxMap",value:function(){var t=this.parameter;if(t.categoryEncoding){var e=-(1/0),r=1/0,n=t.observedProperty.categories,o=t.categoryEncoding,a=!0,i=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;if(o.has(c.id)){var h=!0,f=!1,p=void 0;try{for(var d,v=o.get(c.id)[Symbol.iterator]();!(h=(d=v.next()).done);h=!0){var y=d.value;e=Math.max(e,y),r=Math.min(r,y)}}catch(t){f=!0,p=t}finally{try{!h&&v.return&&v.return()}finally{if(f)throw p}}}}}catch(t){i=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw s}}var g=void 0;if(!(n.length<256))throw new Error("Too many categories: "+n.length);if(e>1e4||r<0)throw new Error("category values too high (>10000) or low (<0)");g=new Uint8Array(e+1);for(var _=0;_<=e;_++)g[_]=255;for(var m=0;m<n.length;m++){var b=n[m];if(o.has(b.id)){var x=!0,k=!1,P=void 0;try{for(var w,L=t.categoryEncoding.get(b.id)[Symbol.iterator]();!(x=(w=L.next()).done);x=!0){var j=w.value;g[j]=m}}catch(t){k=!0,P=t}finally{try{!x&&L.return&&L.return()}finally{if(k)throw P}}}}this._categoryIdxMap=g}}},{key:"palette",get:function(){if(this.parameter&&(!this.canUsePalette||this.canUsePalette()))return this._palette},set:function(t){this._palette=t,this._updatePaletteIndexFn(),this.redraw(),this.fire("paletteChange")}},{key:"paletteExtent",set:function(t){this.setPaletteExtent(t)},get:function(){return this._paletteExtent}}]),e}(t)}function P(t){return function(t){function e(){return V(this,e),F(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return G(e,t),U(e,[{key:"load",value:function(){var t=this;this.fire("dataLoading");var e=this.coverage.loadDomain().then(function(e){t.domain=e;var n=r.getHorizontalCRSComponents(e),o=B(n,2);return t._projX=o[0],t._projY=o[1],r.loadProjection(e)}).then(function(e){t.projection=e});return this._loadCoverageSubset?e=e.then(function(){return t._loadCoverageSubset()}):this.parameter&&(e=e.then(function(){return t.coverage.loadRange(t.parameter.key)}).then(function(e){t.range=e})),e=e.then(function(){t.fire("dataLoad")}).catch(function(e){console.error(e),t.fire("error",e),t.fire("dataLoad")})}}]),e}(t)}function w(t,r){return e.Util.wrapNum(t,r,!0)}function L(t){return function(t){function r(){return V(this,r),F(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return G(r,t),U(r,[{key:"_addMarker",value:function(){var t=this,r=this.getValue();if(null!==r||this.showNoData){var n=this._getColor(r),o="string"==typeof n?g(n):n,a=o.r,i=o.g,s=o.b,u=this.getLatLng(),l=.7;if(this._marker=e.circleMarker(u,{fillColor:"rgb("+a+","+i+","+s+")",fillOpacity:1,radius:5,stroke:!0,opacity:1,weight:1,color:"rgb("+Math.round(a*l)+","+Math.round(i*l)+","+Math.round(s*l)+")"}).on("click",function(e){e.coverage=t.coverage,t.fire("click",e)}).addTo(this._map),this._popup){var c;(c=this._marker).bindPopup.apply(c,Y(this._popup))}}}},{key:"_removeMarker",value:function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)}},{key:"__updateMarker",value:function(){var t=this._getColor(val),e="string"==typeof t?g(t):t,r=e.r,n=e.g,o=e.b;this._marker.options.color="rgb("+r+","+n+","+o+")"}},{key:"bindPopup",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(this._popup=e,this._marker){var n;(n=this._marker).bindPopup.apply(n,e)}}},{key:"openPopup",value:function(){return this._marker.openPopup(),this}},{key:"closePopup",value:function(){return this._marker.closePopup(),this}},{key:"redraw",value:function(){this._marker&&(this.__updateMarker(),this._marker.redraw())}}]),r}(t)}function j(t,e,r){this.obj=t,this.left=null,this.right=null,this.parent=r,this.dimension=e}function O(t,e,r){function n(t,e,o){var a,i,s=e%r.length;return 0===t.length?null:1===t.length?new j(t[0],s,o):(t.sort(function(t,e){return t[r[s]]-e[r[s]]}),a=Math.floor(t.length/2),i=new j(t[a],s,o),i.left=n(t.slice(0,a),e+1,i),i.right=n(t.slice(a+1),e+1,i),i)}function o(t){function e(t){t.left&&(t.left.parent=t,e(t.left)),t.right&&(t.right.parent=t,e(t.right))}a.root=t,e(a.root)}var a=this;Array.isArray(t)?this.root=n(t,0,null):o(t,e,r),this.toJSON=function(t){t||(t=this.root);var e=new j(t.obj,t.dimension,null);return t.left&&(e.left=a.toJSON(t.left)),t.right&&(e.right=a.toJSON(t.right)),e},this.insert=function(t){function e(n,o){if(null===n)return o;var a=r[n.dimension];return t[a]<n.obj[a]?e(n.left,n):e(n.right,n)}var n,o,a=e(this.root,null);return null===a?void(this.root=new j(t,0,null)):(n=new j(t,(a.dimension+1)%r.length,a),o=r[a.dimension],void(t[o]<a.obj[o]?a.left=n:a.right=n))},this.remove=function(t){function e(n){if(null===n)return null;if(n.obj===t)return n;var o=r[n.dimension];return t[o]<n.obj[o]?e(n.left,n):e(n.right,n)}function n(t){function e(t,n){var o,a,i,s,u;return null===t?null:(o=r[n],t.dimension===n?null!==t.left?e(t.left,n):t:(a=t.obj[o],i=e(t.left,n),s=e(t.right,n),u=t,null!==i&&i.obj[o]<a&&(u=i),null!==s&&s.obj[o]<u.obj[o]&&(u=s),u))}var o,i,s;return null===t.left&&null===t.right?null===t.parent?void(a.root=null):(s=r[t.parent.dimension],void(t.obj[s]<t.parent.obj[s]?t.parent.left=null:t.parent.right=null)):void(null!==t.right?(o=e(t.right,t.dimension),i=o.obj,n(o),t.obj=i):(o=e(t.left,t.dimension),i=o.obj,n(o),t.right=t.left,t.left=null,t.obj=i))}var o;o=e(a.root),null!==o&&n(o)},this.nearest=function(t,n,o){function i(o){function a(t,e){l.push([t,e]),l.size()>n&&l.pop()}var s,u,c,h,f=r[o.dimension],p=e(t,o.obj),d={};for(h=0;h<r.length;h+=1)h===o.dimension?d[r[h]]=t[r[h]]:d[r[h]]=o.obj[r[h]];return u=e(d,o.obj),null===o.right&&null===o.left?void((l.size()<n||p<l.peek()[1])&&a(o,p)):(s=null===o.right?o.left:null===o.left?o.right:t[f]<o.obj[f]?o.left:o.right,i(s),(l.size()<n||p<l.peek()[1])&&a(o,p),void((l.size()<n||Math.abs(u)<l.peek()[1])&&(c=s===o.left?o.right:o.left,null!==c&&i(c))))}var s,u,l;if(l=new C(function(t){return-t[1]}),o)for(s=0;s<n;s+=1)l.push([null,o]);for(a.root&&i(a.root),u=[],s=0;s<Math.min(n,l.content.length);s+=1)l.content[s][0]&&u.push([l.content[s][0].obj,l.content[s][1]]);return u},this.balanceFactor=function(){function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}function e(t){return null===t?0:e(t.left)+e(t.right)+1}return t(a.root)/(Math.log(e(a.root))/Math.log(2))}}function C(t){this.content=[],this.scoreFunction=t}function S(t,e){var n=E(t);if(!n){var o=t.type===r.COVERAGECOLLECTION?"collection ":"";throw new Error("No "+o+"layer class found for domainType="+t.domainType)}return new n(t,e)}function E(t){return(t.type===r.COVERAGE||t.type===r.DOMAIN)&&t.domainType in Gt?Gt[t.domainType]:t.type===r.COVERAGECOLLECTION&&t.domainType in Ft?Ft[t.domainType]:void 0}function A(t,e){if(t.id&&e.id&&t.id===e.id)return!0;if(!t.observedProperty.id||!e.observedProperty.id)return!1;if(t.observedProperty.id!==e.observedProperty.id)return!1;if(t.unit&&e.unit){if(t.unit.id&&e.unit.id&&t.unit.id!==e.unit.id)return!1;if(t.unit.symbol&&e.unit.symbol&&t.unit.symbol!==e.unit.symbol)return!1}else if(t.unit||e.unit)return!1;if(t.categories&&e.categories){if(t.categories.length!==e.categories.length)return!1;var r=function(t){return!t.id};if(t.categories.some(r)||e.categories.some(r))return!1;var n=!0,o=!1,a=void 0;try{for(var i,s=function(){var t=i.value;if(!e.categories.some(function(e){return t.id===e.id}))return{v:!1}},u=t.categories[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=s();if("object"===("undefined"==typeof l?"undefined":D(l)))return l.v}}catch(t){o=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}}else if(t.categories||e.categories)return!1;return!0}function I(t,e){return t.map(function(r,n){return[t[n],e[n]]})}function M(t,e){return t.map(function(r,n){return[t[n],e[n]]})}function T(t){return function(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return V(this,r),t.className=t.className||"leaflet-popup-draggable",F(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e))}return G(r,t),U(r,[{key:"onAdd",value:function(t){var n=this;z(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"onAdd",this).call(this,t),this._draggable=new e.Draggable(this._container,this._wrapper),this._draggable.enable(),this._draggable.on("drag",function(r){var o=e.DomUtil.getPosition(n._wrapper.parentNode),a=t.layerPointToLatLng(o);n.setLatLng(a),n.fire("drag",r)}),this._draggable.on("dragstart predrag dragend",function(t){return n.fire(t.type,t)})}},{key:"onRemove",value:function(t){this._draggable.disable(),z(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"onRemove",this).call(this,t)}}]),r}(t)}function R(t){var e=t.getBounds(),r=e.getCenter().lat,n=6378137*Math.PI*Math.cos(r*Math.PI/180),o=n*(e.getNorthEast().lng-e.getSouthWest().lng)/180,a=t.getSize(),i=o/a.x;return i}e="default"in e?e.default:e,n="default"in n?n.default:n;var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V=(function(){function t(t){this.value=t}function e(e){function r(t,e){return new Promise(function(r,o){var s={key:t,arg:e,resolve:r,reject:o,next:null};i?i=i.next=s:(a=i=s,n(t,e))})}function n(r,a){try{var i=e[r](a),s=i.value;s instanceof t?Promise.resolve(s.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(i.done?"return":"normal",i.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":a.resolve({value:e,done:!0});break;case"throw":a.reject(e);break;default:a.resolve({value:e,done:!1})}a=a.next,a?n(a.key,a.arg):i=null}var a,i;this._invoke=r,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),U=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),N=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},z=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},G=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},F=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},B=function(){function t(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Y=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},K="template-coverage-parameter-discrete-legend",X='<template id="'+K+'">\n  <div class="leaflet-coverage-control legend discrete-legend">\n    <div class="legend-title-container"><strong class="legend-title"></strong></div>\n    <div class="legend-palette discrete-legend-palette"></div>\n  </div>\n</template>',J=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,e);var n=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{position:r.position||"bottomright"}));return n._covLayer=t,n._templateId=r.templateId||K,n._language=r.language,r.templateId||null!==document.getElementById(K)||s(X),t.on&&(n._remove=function(){return n.remove()},n._update=function(){return n._doUpdate(!1)},t.on("remove",n._remove)),n}return G(e,t),U(e,[{key:"update",value:function(){this._doUpdate(!0)}},{key:"_doUpdate",value:function(t){var e=this._el;if(t){var n=this._covLayer.parameter;this._language=r.getLanguageTag(n.observedProperty.label,this._language);var a=r.getLanguageString(n.observedProperty.label,this._language);o(".legend-title",e).innerHTML=a}for(var i=this._covLayer.palette,s=this._covLayer.parameter,u="",l=0;l<i.steps;l++){var c=r.getLanguageString(s.observedProperty.categories[l].label,this._language);u+='\n        <i style="background:rgb('+i.red[l]+", "+i.green[l]+", "+i.blue[l]+')"></i>\n        '+c+"\n        <br>"}o(".legend-palette",e).innerHTML=u}},{key:"onAdd",value:function(t){return this._map=t,this._covLayer.on&&this._covLayer.on("paletteChange",this._update),this._el=u(this._templateId),this.update(),this._el}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update))}}]),e}(e.Control),W="template-coverage-parameter-continuous-legend",H='<template id="'+W+'">\n  <div class="leaflet-coverage-control legend continuous-legend">\n    <div style="margin-bottom:3px" class="legend-title-container">\n      <strong class="legend-title"></strong>\n    </div>\n    <div style="display: inline-block; height: 144px; float:left">\n      <span style="height: 136px; width: 18px; display: block; margin-top: 9px;" class="legend-palette"></span>\n    </div>\n    <div style="display: inline-block; float:left; height:153px">\n      <table style="height: 100%;">\n        <tr><td style="vertical-align:top"><span class="legend-max"></span> <span class="legend-uom"></span></td></tr>\n        <tr><td><span class="legend-current"></span></td></tr>\n        <tr><td style="vertical-align:bottom"><span class="legend-min"></span> <span class="legend-uom"></span></td></tr>\n      </table>\n    </div>\n  </div>\n</template>',q=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,e);var n=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{position:r.position||"bottomright"}));return n._covLayer=t,n._templateId=r.templateId||W,n._language=r.language,r.templateId||null!==document.getElementById(W)||s(H),t.on&&(n._remove=function(){return n.remove()},n._update=function(){return n._doUpdate(!1)},t.on("remove",n._remove)),n}return G(e,t),U(e,[{key:"update",value:function(){this._doUpdate(!0)}},{key:"_doUpdate",value:function(t){var e=this,n=this._el;t&&!function(){var t=e._covLayer.parameter,i=r.getLanguageTag(t.observedProperty.label,e._language),s=r.getLanguageString(t.observedProperty.label,i),u=r.stringifyUnit(t.unit,i);o(".legend-title",n).innerHTML=s,a(".legend-uom",n).forEach(function(t){return t.innerHTML=u})}();var i=this._covLayer.palette,s=B(this._covLayer.paletteExtent,2),u=s[0],l=s[1];o(".legend-min",n).innerHTML=u.toFixed(2),o(".legend-max",n).innerHTML=l.toFixed(2);for(var c="",h=0;h<i.steps;h++)h>0&&(c+=","),c+="rgb("+i.red[h]+","+i.green[h]+","+i.blue[h]+")";o(".legend-palette",n).style.background="transparent linear-gradient(to top, "+c+") repeat scroll 0% 0%"}},{key:"onAdd",value:function(t){return this._map=t,this._covLayer.on&&(this._covLayer.on("paletteChange",this._update),this._covLayer.on("paletteExtentChange",this._update)),this._el=u(this._templateId),this.update(),this._el}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update),this._covLayer.off("paletteExtentChange",this._update))}}]),e}(e.Control),Q=e.Evented.prototype,Z="template-coverage-timeaxis",$='<template id="'+Z+'">\n<div class="leaflet-coverage-control form-inline" style="clear:none">\n  <strong class="title">Time</strong><br>\n  <div class="form-group">\n    <select name="date" class="date form-control"></select>\n  </div>\n  <div class="form-group">\n    <select name="time" class="time form-control"></select>\n  </div>\n</div>\n</template>',tt=function(t){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,r);var n=F(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,{position:e.position||"topleft"}));n._templateId=e.templateId||Z,n._title=e.title||"Time",n._covLayer=t,e.templateId||null!==document.getElementById(Z)||s($),t.on&&(n._remove=function(){return n.remove()},t.on("remove",n._remove),n._axisListener=function(t){"time"===t.axis&&n.update()});var o=n._covLayer.timeSlices,a=new Map,i=!0,u=!1,l=void 0;try{for(var c,h=o[Symbol.iterator]();!(i=(c=h.next()).done);i=!0){var f=c.value,p=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate())).getTime();a.has(p)||a.set(p,[]),a.get(p).push(f)}}catch(t){u=!0,l=t}finally{try{!i&&h.return&&h.return()}finally{if(u)throw l}}return n._dateMap=a,n}return G(r,t),U(r,[{key:"onAdd",value:function(t){var r=this;this._map=t,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);var n=u(this._templateId);this._el=n,e.DomEvent.disableClickPropagation(n),this._title&&(o(".title",n).innerHTML=this._title);var a=!0,s=!1,l=void 0;try{for(var c,p=this._dateMap.keys()[Symbol.iterator]();!(a=(c=p.next()).done);a=!0){var d=c.value,v=f(d);o(".date",n).appendChild(i('<option value="'+v+'">'+v+"</option>"))}}catch(t){s=!0,l=t}finally{try{!a&&p.return&&p.return()}finally{if(s)throw l}}return o(".date",n).disabled=1===this._dateMap.size,o(".date",n).addEventListener("change",function(t){var e=h(t.target.value),n=r._dateMap.get(e)[0];r._covLayer.time=n,r._initTimeSelect(e),r.fire("change",{time:n})}),o(".time",n).addEventListener("change",function(t){var e=o(".date",n).value,a=t.target.value,i=new Date(e+"T"+a);r._covLayer.time=i,r.fire("change",{time:i})}),this.update(),n}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}},{key:"update",value:function(){var t=this._covLayer.time;if(t){var e=this._el,r=h(t.toISOString()),n=f(r);o(".date",e).value=n,this._initTimeSelect(r);var a=t.toISOString().substr(11);o(".time",e).value=a}}},{key:"_initTimeSelect",value:function(t){var e=this._el,r=o(".time",e);r.innerHTML="";var n=this._dateMap.get(t),a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value,f=h.toISOString().substr(11);r.appendChild(i('<option value="'+f+'">'+f+"</option>"))}}catch(t){s=!0,u=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}r.disabled=1===n.length}}]),r}(c(e.Control)),et="template-coverage-dropdown",rt='<template id="'+et+'">\n<div class="leaflet-coverage-control" style="clear:none">\n  <strong class="select-title"></strong><br>\n  <select class="form-control"></select>\n</div>\n</template>',nt=function(t){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,r);var n=F(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e.position?{position:e.position}:{position:"topleft"}));return n._templateId=e.templateId||et,n._title=e.title||"",n._choices=t,n._value=e.value||t[0].value,e.templateId||null!==document.getElementById(et)||s(rt),n}return G(r,t),U(r,[{key:"onAdd",value:function(t){var r=this,n=u(this._templateId);this._el=n,e.DomEvent.disableClickPropagation(n),o(".select-title",n).innerHTML=this._title;var a=!0,s=!1,l=void 0;try{for(var c,h=this._choices[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value,p=f.value,d=f.label;o("select",n).appendChild(i('<option value="'+p+'">'+d+"</option>"))}}catch(t){s=!0,l=t}finally{try{!a&&h.return&&h.return()}finally{if(s)throw l}}return o("select",n).disabled=this._choices.length<=1,this.value=this._value,o("select",n).addEventListener("change",function(t){r._value=t.target.value,r.fire("change",{value:t.target.value})}),n}},{key:"value",get:function(){return this._value},set:function(t){o("select",this._el).value=t}}]),r}(c(e.Control)),ot=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,e);var n=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._templateId=r.templateId,n._covLayer=t,n._title=r.title||"Vertical",n._position=r.position||"topleft",t.on&&(n._remove=function(){return n.remove()},t.on("remove",n._remove),n._axisListener=function(t){"vertical"===t.axis&&n.update()}),n}return G(e,t),U(e,[{key:"onAdd",value:function(t){var e=this;this._map=t,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);var n=this._covLayer.crsVerticalAxis||{},o=n.name?r.getLanguageString(n.name):this._title,a=r.stringifyUnit(n.unit);a&&(a=" "+a);for(var i=[],s=this._covLayer.verticalSlices,u=0;u<s.length;u++)i.push({value:u.toString(),label:s[u]+a});this._dropdown=new nt(i,{templateId:this._templateId,position:this._position,title:o,value:this._getVerticalIndex().toString()}).on("change",function(t){var r=parseInt(t.value),n=e._covLayer.verticalSlices[r];e._covLayer.vertical=n,e.fire("change",{vertical:n})}).addTo(t)}},{key:"onRemove",value:function(t){this._dropdown.remove(),this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}},{key:"_getVerticalIndex",value:function(){var t=this._covLayer.verticalSlices,e=t.indexOf(this._covLayer.vertical);return e}},{key:"update",value:function(){var t=this._getVerticalIndex();this._dropdown.value=t.toString()}}]),e}(e.Layer),at=d(function(t){function e(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}t.exports=e}),it=p(at),st=Object.freeze({default:it}),ut=d(function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}t.exports=function(t){return null!=t&&(e(t)||r(t)||!!t._isBuffer)}}),lt=p(ut),ct=Object.freeze({default:lt}),ht=d(function(t){function e(t,e){return t[0]-e[0]}function r(){var t,r=this.stride,n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(r[t]),t];n.sort(e);var o=new Array(n.length);for(t=0;t<o.length;++t)o[t]=n[t][1];return o}function n(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var o="generic"===t;if(e===-1){var a="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",s=new Function(a);return s()}if(0===e){var a="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(o?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(o?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",s=new Function("TrivialArray",a);return s(l[t][0])}var a=["'use strict'"],u=i(e),c=u.map(function(t){return"i"+t}),h="this.offset+"+u.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),f=u.map(function(t){return"b"+t}).join(","),p=u.map(function(t){return"c"+t}).join(",");a.push("function "+n+"(a,"+f+","+p+",d){this.data=a","this.shape=["+f+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),a.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+u.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),e<4?(a.push("function "+n+"_order(){"),2===e?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),o?a.push("return this.data.set("+h+",v)}"):a.push("return this.data["+h+"]=v}"),a.push("proto.get=function "+n+"_get("+c.join(",")+"){"),o?a.push("return this.data.get("+h+")}"):a.push("return this.data["+h+"]}"),a.push("proto.index=function "+n+"_index(",c.join(),"){return "+h+"}"),a.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+u.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+u.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var d=u.map(function(t){return"a"+t+"=this.shape["+t+"]"}),v=u.map(function(t){return"c"+t+"=this.stride["+t+"]"});a.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+v.join(","));for(var y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'&&i"+y+">=0){d=i"+y+"|0;b+=c"+y+"*d;a"+y+"-=d}");a.push("return new "+n+"(this.data,"+u.map(function(t){return"a"+t}).join(",")+","+u.map(function(t){return"c"+t}).join(",")+",b)}"),a.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+u.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+u.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'){d=i"+y+"|0;if(d<0){c+=b"+y+"*(a"+y+"-1);a"+y+"=ceil(-a"+y+"/d)}else{a"+y+"=ceil(a"+y+"/d)}b"+y+"*=d}");a.push("return new "+n+"(this.data,"+u.map(function(t){return"a"+t}).join(",")+","+u.map(function(t){return"b"+t}).join(",")+",c)}");for(var g=new Array(e),_=new Array(e),y=0;y<e;++y)g[y]="a[i"+y+"]",_[y]="b[i"+y+"]";a.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+_.join(",")+",this.offset)}"),a.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var y=0;y<e;++y)a.push("if(typeof i"+y+"==='number'&&i"+y+">=0){c=(c+this.stride["+y+"]*i"+y+")|0}else{a.push(this.shape["+y+"]);b.push(this.stride["+y+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+u.map(function(t){return"shape["+t+"]"}).join(",")+","+u.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");
var s=new Function("CTOR_LIST","ORDER",a.join("\n"));return s(l[t],r)}function o(t){if(s(t))return"buffer";if(u)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function a(t,e,r,a){if(void 0===t){var i=l.array[0];return i([])}"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var s=e.length;if(void 0===r){r=new Array(s);for(var u=s-1,c=1;u>=0;--u)r[u]=c,c*=e[u]}if(void 0===a){a=0;for(var u=0;u<s;++u)r[u]<0&&(a-=(e[u]-1)*r[u])}for(var h=o(t),f=l[h];f.length<=s+1;)f.push(n(h,f.length-1));var i=f[s+1];return i(t,e,r,a)}var i=p(st),s=p(ct),u="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=a}),ft=p(ht),pt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.defaultSteps,n=void 0===r?256:r;V(this,t),this._defaultSteps=n,this._palettes=new Map}return U(t,[{key:"add",value:function(t,e){if(Array.isArray(e)&&(e=y(e)),![e.red,e.green,e.blue].every(function(t){return t.length===e.red.length}))throw new Error("The red, green, blue arrays of the palette must be of equal lengths");e.red instanceof Uint8Array||(e.red=x(e.red),e.green=x(e.green),e.blue=x(e.blue)),e.steps=e.red.length,this._palettes.set(t,e)}},{key:"addLinear",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.steps;this.add(t,v(e,n?n:this._defaultSteps))}},{key:"get",value:function(t){var e=this._palettes.get(t);if(void 0===e)throw new Error('Palette "'+t+'" not found');return e}},{key:Symbol.iterator,get:function(){return this._palettes[Symbol.iterator]}}]),t}(),dt=function(){return v(["#deebf7","#3182bd"])},vt=function(t){if(t>12)throw new Error("not enough built-in categorical colors, must supply custom colors");return y(["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"].slice(0,t))},yt=function(t){function n(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,n);var a=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.isDomain(t)&&(t=r.fromDomain(t),o.parameter=t.parameters.keys().next().value,delete o.keys),o.paletteExtent||(o.paletteExtent="subset"),e.Util.setOptions(a,o),a._cov=t,a._param=t.parameters.get(o.keys?o.keys[0]:o.parameter),a._axesSubset={t:{coordPref:o.time?o.time.toISOString():void 0},z:{coordPref:o.vertical}},a.crsVerticalAxis=void 0,a}return G(n,t),U(n,[{key:"onAdd",value:function(t){var e=this;this._map=t,this.load().then(function(){return e.initializePalette()}).then(function(){var t=r.getReferenceObject(e.domain,"z");if(t&&1===t.coordinates.length){var n=t.system;n.cs&&(n.cs.csAxes||n.cs.axes)&&(e.crsVerticalAxis=n.cs.csAxes?n.cs.csAxes[0]:n.cs.axes[0])}}).then(function(){e._errored=!1,z(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onAdd",e).call(e,t),e.fire("afterAdd")}).catch(function(r){e._errored=!0,console.log(r),z(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onAdd",e).call(e,t)})}},{key:"onRemove",value:function(t){delete this._map,z(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onRemove",this).call(this,t)}},{key:"getBounds",value:function(){var t=void 0;if(!this._cov.bbox){t=this._getDomainBbox();var r=this.projection,n=r.unproject({x:t[0],y:t[1]}),o=r.unproject({x:t[0],y:t[3]}),a=r.unproject({x:t[2],y:t[1]}),i=r.unproject({x:t[2],y:t[3]});return e.latLngBounds([n,o,a,i])}t=this._cov.bbox;var s=e.latLng(t[1],t[0]),u=e.latLng(t[3],t[2]),l=e.latLngBounds(s,u);return l}},{key:"_loadCoverageSubset",value:function(){var t=this,e={},r=!0,n=!1,o=void 0;try{for(var a,i=Object.keys(this._axesSubset)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value,u=this._axesSubset[s];this.domain.axes.has(s)&&(void 0==u.coordPref?e[s]={target:this.domain.axes.get(s).values[0]}:e[s]={target:u.coordPref})}}catch(t){n=!0,o=t}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}return this.fire("dataLoading"),this._cov.subsetByValue(e).then(function(e){return t._subsetCov=e,e.cacheRanges=!0,Promise.all([e.loadDomain(),e.loadRange(t._param.key)])}).then(function(e){var r=B(e,2),n=r[0],o=r[1];t._subsetDomain=n,t._subsetRange=o,t.fire("dataLoad")}).catch(function(e){throw t.fire("dataLoad"),e})}},{key:"computePaletteExtent",value:function(t){var e=this;if("subset"===t){var n=this._subsetRange.shape.get(this._projX),o=this._subsetRange.shape.get(this._projY);if(n*o<1e6)return t=r.minMaxOfRange(this._subsetRange),t=b(t),Promise.resolve(t);var a,i={start:0,stop:n,step:Math.max(Math.round(n/1e3),1)},s={start:0,stop:o,step:Math.max(Math.round(o/1e3),1)};return this._subsetCov.subsetByIndex((a={},N(a,this._projX,i),N(a,this._projY,s),a)).then(function(n){return n.loadRange(e._param.key).then(function(e){var n=r.minMaxOfRange(e),o=B(n,2),a=o[0],i=o[1],s=.1*(i-a);return t=[a-s,i+s]})})}if("fov"===t){this._map.getBounds();throw new Error("NOT IMPLEMENTED YET")}throw new Error("Unknown extent specification: "+t)}},{key:"getValueAt",value:function(t){var e,n=this.domain.axes.get(this._projX).values,o=this.domain.axes.get(this._projY).values,a=this._getDomainBbox(),i=t.lat,s=t.lng,u=this.projection.project({lat:i,lon:s}),l=u.x,c=u.y;if(!(l<a[0]||l>a[2]||c<a[1]||c>a[3])){var h=r.indexOfNearest(o,c),f=r.indexOfNearest(n,l);return this._subsetRange.get((e={},N(e,this._projY,h),N(e,this._projX,f),e))}}},{key:"createTile",value:function(t){var r=e.DomUtil.create("canvas","leaflet-tile"),n=this.getTileSize();return r.width=n.x,r.height=n.y,this.drawTile(r,t),r}},{key:"drawTile",value:function(t,e){if(!this._errored){var r=t.getContext("2d"),n=this.getTileSize(),o=r.getImageData(0,0,n.x,n.y),a=ft(o.data,[n.y,n.x,4]),i=this.palette,s=i.red,u=i.green,l=i.blue,c=this.getPaletteIndex,h=function(t,e,r){var n=c(r);void 0!==n&&(a.set(t,e,0,s[n]),a.set(t,e,1,u[n]),a.set(t,e,2,l[n]),a.set(t,e,3,255))},f=this._subsetRange.get;this._isDomainUsingEllipsoidalCRS()?this._isRectilinearGeodeticMap()?this._drawGeodeticCRSWithRectilinearMapProjection(h,e,f):this._drawGeodeticCRSWithAnyMapProjection(h,e,f):this._isRectilinearGeodeticMap()?this._drawProjectedCRSWithRectilinearMapProjection(h,e,f):this._drawProjectedCRSWithAnyMapProjection(h,e,f),r.putImageData(o,0,0)}}},{key:"_getDomainBbox",value:function(){var t=function(t,e){var r=t.length-1,n=void 0,o=void 0;if(e){var a=[e.get(0)[0],e.get(r)[1]];n=a[0],o=a[1]}else{var i=[t[0],t[r]];n=i[0],o=i[1]}var s=n>o;if(s){var u=[o,n];n=u[0],o=u[1]}return!e&&t.length>1&&(s?(n-=(t[r-1]-t[r])/2,o+=(t[0]-t[1])/2):(n-=(t[1]-t[0])/2,o+=(t[r]-t[r-1])/2)),[n,o]},e=this.domain.axes.get(this._projX),r=this.domain.axes.get(this._projY),n=t(e.values,e.bounds),o=B(n,2),a=o[0],i=o[1],s=t(r.values,r.bounds),u=B(s,2),l=u[0],c=u[1];return[a,l,i,c]}},{key:"_drawGeodeticCRSWithAnyMapProjection",value:function(t,n,o){var a=this.getTileSize(),i=n.x*a.x,s=n.y*a.y,u=n.z,l=this._map,c=this.domain.axes.get("x").values,h=this.domain.axes.get("y").values,f=this._getDomainBbox();"y"===this._projX&&(f=[f[1],f[0],f[3],f[2]]);for(var p=[f[0],f[0]+360],d=0;d<a.x;d++)for(var v=0;v<a.y;v++){var y=l.unproject(e.point(i+d,s+v),u),g=y.lat,_=y.lng;if(!(g<f[1]||g>f[3]||(_=w(_,p),_<f[0]||_>f[2]))){var m=r.indexOfNearest(h,g),b=r.indexOfNearest(c,_);t(v,d,o({y:m,x:b}))}}}},{key:"_drawProjectedCRSWithAnyMapProjection",value:function(t,n,o){for(var a=this._map,i=this.domain.axes.get(this._projX).values,s=this.domain.axes.get(this._projY).values,u=this._getDomainBbox(),l=this.projection,c=this.getTileSize(),h=n.x*c.x,f=n.y*c.y,p=n.z,d=0;d<c.x;d++)for(var v=0;v<c.y;v++){var y=a.unproject(e.point(h+d,f+v),p),g=y.lat,_=y.lng,m=l.project({lat:g,lon:_}),b=m.x,x=m.y;if(!(b<u[0]||b>u[2]||x<u[1]||x>u[3])){var k=r.indexOfNearest(s,x),P=r.indexOfNearest(i,b);t(v,d,o({y:k,x:P}))}}}},{key:"_drawProjectedCRSWithRectilinearMapProjection",value:function(t,n,o){for(var a=this._map,i=this.domain.axes.get(this._projX).values,s=this.domain.axes.get(this._projY).values,u=this._getDomainBbox(),l=this.projection,c=this.getTileSize(),h=n.x*c.x,f=n.y*c.y,p=n.z,d=new Float64Array(c.x),v=0;v<c.x;v++){var y=a.unproject(e.point(h+v,f),p),g=y.lng;d[v]=g}for(var _=new Float64Array(c.y),m=0;m<c.y;m++){var b=a.unproject(e.point(h,f+m),p),x=b.lat;_[m]=x}for(var k=0;k<c.x;k++)for(var P=0;P<c.y;P++){var x=_[P],w=d[k],L=l.project({lat:x,lon:w}),j=L.x,O=L.y;if(!(j<u[0]||j>u[2]||O<u[1]||O>u[3])){var C=r.indexOfNearest(s,O),S=r.indexOfNearest(i,j);t(P,k,o({y:C,x:S}))}}}},{key:"_drawGeodeticCRSWithRectilinearMapProjection",value:function(t,n,o){var a=this._map,i=this.domain.axes.get("x").values,s=this.domain.axes.get("y").values,u=this._getDomainBbox();"y"===this._projX&&(u=[u[1],u[0],u[3],u[2]]);for(var l=[u[0],u[0]+360],c=this.getTileSize(),h=n.x*c.x,f=n.y*c.y,p=n.z,d=new Float64Array(c.y),v=new Uint32Array(c.y),y=0;y<c.y;y++){var g=a.unproject(e.point(h,f+y),p).lat;d[y]=g,v[y]=r.indexOfNearest(s,g)}for(var _=0;_<c.x;_++){var m=a.unproject(e.point(h+_,f),p).lng;if(m=w(m,l),!(m<u[0]||m>u[2]))for(var b=r.indexOfNearest(i,m),x=0;x<c.y;x++){var k=d[x];if(!(k<u[1]||k>u[3])){var P=v[x];t(x,_,o({y:P,x:b}))}}}}},{key:"_isRectilinearGeodeticMap",value:function(){var t=this._map.options.crs,r=[e.CRS.EPSG3857,e.CRS.EPSG4326,e.CRS.EPSG3395,e.CRS.Simple],n=r.indexOf(t)!==-1;return n}},{key:"_isDomainUsingEllipsoidalCRS",value:function(){return this.domain.referencing.some(function(t){return r.isEllipsoidalCRS(t.system)})}},{key:"redraw",value:function(){this.getContainer()&&e.GridLayer.prototype.redraw.call(this)}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}},{key:"time",set:function(t){var e=this;if(!this.domain.axes.has("t"))throw new Error("No time axis found");var r=this.time;this._axesSubset.t.coordPref=t.toISOString(),this._loadCoverageSubset().then(function(){r!==e.time&&(e.redraw(),e.fire("axisChange",{axis:"time"}))})},get:function(){if(this.domain.axes.has("t")){var t=this._subsetDomain.axes.get("t").values[0];return new Date(t)}}},{key:"timeSlices",get:function(){if(this.domain.axes.has("t"))return this.domain.axes.get("t").values.map(function(t){return new Date(t)})}},{key:"vertical",set:function(t){var e=this;if(!this.domain.axes.has("z"))throw new Error("No vertical axis found");var r=this.vertical;this._axesSubset.z.coordPref=t,this._loadCoverageSubset().then(function(){r!==e.vertical&&(e.redraw(),e.fire("axisChange",{axis:"vertical"}))})},get:function(){if(this.domain.axes.has("z")){var t=this._subsetDomain.axes.get("z").values[0];return t}}},{key:"verticalSlices",get:function(){if(this.domain.axes.has("z")){var t=this.domain.axes.get("z").values;return ArrayBuffer.isView(t)&&(t=[].concat(Y(t))),t}}}]),n}(k(P(e.GridLayer))),gt="black",_t=function(t){function n(t,o){V(this,n);var a=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));r.isDomain(t)&&(t=r.fromDomain(t),delete o.keys,o.parameter=t.parameters.keys().next().value),o.paletteExtent||(o.paletteExtent="full"),e.Util.setOptions(a,o),a._cov=t;var i=o.keys?o.keys[0]:o.parameter;return a._param=i?t.parameters.get(i):null,a._defaultColor=o.defaultColor||gt,a.showNoData=o.showNoData,a}return G(n,t),U(n,[{key:"onAdd",value:function(t){var e=this;this._map=t,this.load().then(function(){return e.initializePalette()}).then(function(){e._addMarker(),e.fire("afterAdd")})}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return e.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var t=this.domain.axes.get(this._projX).values[0],r=this.domain.axes.get(this._projY).values[0],n=this.projection.unproject({x:t,y:r});return e.latLng(n)}},{key:"computePaletteExtent",value:function(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");var e=this.getValue();return t=b([e,e]),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}},{key:"getValue",value:function(){if(this._param)return this.range.get({})}},{key:"getValueAt",value:function(t,e){var r=this.getLatLng();if(r.distanceTo(t)<=e)return this.getValue()}},{key:"_getColor",value:function(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;var e=this.getPaletteIndex(t),r=this.palette,n=r.red,o=r.green,a=r.blue;return{r:n[e],g:o[e],b:a[e]}}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}}]),n}(k(L(P(e.Layer)))),mt=function(t){function n(t,o){V(this,n);var a=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));r.isDomain(t)&&(t=r.fromDomain(t),delete o.keys,o.parameter=t.parameters.keys().next().value),o.paletteExtent||(o.paletteExtent="full"),e.Util.setOptions(a,o),a._cov=t;var i=o.keys?o.keys[0]:o.parameter;return a._param=i?t.parameters.get(i):null,a._defaultColor=o.defaultColor||gt,a}return G(n,t),U(n,[{key:"onAdd",value:function(t){var e=this;this._map=t,this.load().then(function(){return e.initializePalette()}).then(function(){e._addTrajectoryLayers(),e.fire("afterAdd")})}},{key:"computePaletteExtent",value:function(t){var e=this.range;if("full"!==t){if("fov"===t){this._map.getBounds();throw new Error("NOT IMPLEMENTED YET")}throw new Error("Unknown extent specification: "+t)}return t=r.minMaxOfRange(e),t=b(t),Promise.resolve(t)}},{key:"_addTrajectoryLayers",value:function(){for(var t=this.getLatLngs(),r=0;r<t.length;r++){var n=new e.CircleMarker(t[r],{color:this._getColor(this._getValue(r)),opacity:1,fillOpacity:1});this.addLayer(n)}var o=e.polyline(t,{color:"black",weight:3});this.addLayer(o)}},{key:"getLatLngs",value:function(){for(var t=this.domain.axes.get("composite"),r=t.coordinates.indexOf(this._projX),n=t.coordinates.indexOf(this._projY),o=[],a=0;a<t.values.length;a++){var i=t.values[a][r],s=t.values[a][n],u=this.projection.unproject({x:i,y:s}),l=e.latLng(u);o.push(l)}return o}},{key:"getValueAt",value:function(t,e){for(var r=this.getLatLngs(),n=r.map(function(e){return e.distanceTo(t)}),o=1/0,a=void 0,i=0;i<r.length;i++){var s=n[i];s<=e&&s<o&&(o=s,a=i)}if(void 0!==a)return this._getValue(a)}},{key:"_getValue",value:function(t){if(this._param)return this.range.get({composite:t})}},{key:"_getColor",value:function(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;var e=this.getPaletteIndex(t),r=this.palette,n=r.red,o=r.green,a=r.blue;return"rgb("+n[e]+", "+o[e]+", "+a[e]+")"}},{key:"redraw",value:function(){this.clearLayers(),this._addTrajectoryLayers()}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}}]),n}(k(P(e.FeatureGroup))),bt=function(t){function n(t,o){V(this,n);var a=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));r.isDomain(t)&&(t=r.fromDomain(t),delete o.keys,o.parameter=t.parameters.keys().next().value),o.paletteExtent||(o.paletteExtent="full"),e.Util.setOptions(a,o),a._cov=t;var i=o.keys?o.keys[0]:o.parameter;return a._param=i?t.parameters.get(i):null,a._axesSubset={t:{coordPref:o.time}},a._defaultColor=o.defaultColor||gt,a.showNoData=o.showNoData,a}return G(n,t),U(n,[{key:"onAdd",value:function(t){var e=this;this._map=t,this.load().then(function(){return e.initializePalette()}).then(function(){e._addMarker(),e.fire("afterAdd")})}},{key:"_loadCoverageSubset",value:function(){var t=this._axesSubset.t;if(void 0==t.coordPref)t.idx=t.coord=void 0;else{var e=this.domain.axes.get("t").values.map(function(t){return t.getTime()});t.idx=r.indexOfNearest(e,t.coordPref.getTime()),t.coord=e[t.idx]}}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return e.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var t=this.domain.axes.get(this._projX).values[0],r=this.domain.axes.get(this._projY).values[0],n=this.projection.unproject({x:t,y:r});return e.latLng(n)}},{key:"canUsePalette",value:function(){return void 0!==this.time}},{key:"computePaletteExtent",value:function(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return t=r.minMaxOfRange(this.range),t=b(t),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}},{key:"getValue",value:function(){if(this._param&&void 0!==this._axesSubset.t.coord){var t=this.range.get({t:this._axesSubset.t.idx});return t}}},{key:"getValueAt",value:function(t,e){var r=this.getLatLng();if(r.distanceTo(t)<=e)return this.getValue()}},{key:"_getColor",value:function(){var t=this.getValue();if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;var e=this.getPaletteIndex(t),r=this.palette,n=r.red,o=r.green,a=r.blue;return{r:n[e],g:o[e],b:a[e]}}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}},{key:"time",set:function(t){var e=this.time;this._axesSubset.t.coordPref=t?t.toISOString():void 0,this._loadCoverageSubset(),e!==this.time&&(this.redraw(),this.fire("axisChange",{axis:"time"}))},get:function(){if(this._axesSubset.t.coord){var t=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(t)}}},{key:"timeSlices",get:function(){return this.domain.axes.get("t").values.map(function(t){return new Date(t)})}}]),n}(k(L(P(e.Layer))));C.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,r=0;r<e;r++)if(this.content[r]==t){var n=this.content.pop();return void(r!=e-1&&(this.content[r]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.bubbleUp(r):this.sinkDown(r)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var r=Math.floor((t+1)/2)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},sinkDown:function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var o=2*(t+1),a=o-1,i=null;if(a<e){var s=this.content[a],u=this.scoreFunction(s);u<n&&(i=a)}if(o<e){var l=this.content[o],c=this.scoreFunction(l);c<(null==i?n:u)&&(i=o)}if(null==i)break;this.content[t]=this.content[i],this.content[i]=r,t=i}}};var xt,kt,Pt=function(t){function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,r);var o=F(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));n.paletteExtent||(n.paletteExtent="full"),e.Util.setOptions(o,n),o._covcoll=t;var a=n.keys?n.keys[0]:n.parameter;return o._param=a?t.parameters.get(a):null,o._defaultColor=n.defaultColor||gt,o._pointClass=n.pointClass||_t,o._layerGroup=e.layerGroup(),o._layers=[],o._kdtree=void 0,o.on("paletteChange",function(){var t=!0,e=!1,r=void 0;try{for(var n,a=o._layers[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var i=n.value;i.palette=o.palette}}catch(t){e=!0,r=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw r}}}),o.on("paletteExtentChange",function(){var t=!0,e=!1,r=void 0;try{for(var n,a=o._layers[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var i=n.value;i.paletteExtent=o.paletteExtent}}catch(t){e=!0,r=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw r}}}),o}return G(r,t),U(r,[{key:"onAdd",value:function(t){this._map=t,this._layerLoadCount=0,this._layerErrors=[];var e={keys:this._param?[this._param.key]:void 0,defaultColor:this._defaultColor,palette:this.palette,paletteExtent:this.paletteExtent};if(this.options.pointOptionsFn){var r=this.options.pointOptionsFn();for(var n in r)e[n]=r[n]}var o=!0,a=!1,i=void 0;try{for(var s,u=this._covcoll.coverages[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var l=s.value,c=new this._pointClass(l,e);if(this._attachListeners(c,l),this._layerGroup.addLayer(c),this._layers.push(c),c.load(),this._popupFn){var h=this._popupFn(c.coverage);c.bindPopup(h)}}}catch(t){a=!0,i=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}}},{key:"onRemove",value:function(t){t.removeLayer(this._layerGroup),this._layerGroup=e.layerGroup(),this._layers=[]}},{key:"bindPopupEach",value:function(t){this._popupFn=t}},{key:"_attachListeners",value:function(t,e){var r=this;t.once("dataLoad",function(){++r._layerLoadCount,r._fireIfOnAddDone()}).once("error",function(t){r._layerErrors.push(t)}).on("click",function(t){t.coverage=e,r.fire("click",t)})}},{key:"_fireIfOnAddDone",value:function(){var t=this;this._layerLoadCount===this._layers.length&&(this._layerErrors.length>0?this.fire("error",{errors:this._layerErrors}):(this._initKdtree(),this.initializePalette().then(function(){t._layerGroup.addTo(t._map),t.fire("afterAdd")})))}},{key:"_initKdtree",value:function(){var t=this._layers.map(function(t){var e=t.getLatLng();return e.layer=t,e}),r=function(t,r){return e.LatLng.prototype.distanceTo.call(t,r)},n=["lat","lng"];this._kdtree=new O(t,r,n)}},{key:"getBounds",value:function(){return e.latLngBounds(this._layers.map(function(t){return t.getLatLng()}))}},{key:"getValueAt",value:function(t,e){var r=this._kdtree.nearest(t,1,e);if(r.length>0){var n=r[0][0],o=n.layer.getValue();return o}}},{key:"computePaletteExtent",value:function(t){var e=this;if(!this._param)throw new Error("palette extent cannot be set when no parameter has been chosen");var r=void 0;if("full"===t)r=this._layers;else{if("fov"!==t)throw new Error("Unsupported: "+t);!function(){var t=e._map.getBounds();r=e._layers.filter(function(e){return t.contains(e.getLatLng())})}()}var n=1/0,o=-(1/0),a=!0,i=!1,s=void 0;try{for(var u,l=r[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,h=c.getValue();null!=h&&(n=Math.min(n,h),o=Math.max(o,h))}}catch(t){i=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw s}}return t=b([n,o]),Promise.resolve(t)}},{key:"redraw",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this._layers[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=n.value;a.redraw()}}catch(t){e=!0,r=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw r}}}},{key:"parameter",get:function(){return this._param}}]),r}(k(e.Layer)),wt=function(t){function n(t,o){V(this,n);var a=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));r.isDomain(t)&&(t=r.fromDomain(t),delete o.keys,o.parameter=t.parameters.keys().next().value),o.paletteExtent||(o.paletteExtent="full"),e.Util.setOptions(a,o),a._cov=t;var i=o.keys?o.keys[0]:o.parameter;return a._param=i?t.parameters.get(i):null,a._axesSubset={z:{coordPref:o.vertical}},a._defaultColor=o.defaultColor||gt,a.showNoData=o.showNoData,a}return G(n,t),U(n,[{key:"onAdd",value:function(t){var e=this;this._map=t,this.load().then(function(){return e.initializePalette()}).then(function(){e._addMarker(),e.fire("afterAdd")})}},{key:"_loadCoverageSubset",value:function(){var t=this._axesSubset.z;if(void 0==t.coordPref)t.idx=t.coord=void 0;else{var e=this.domain.axes.get("z").values;t.idx=r.indexOfNearest(e,t.coordPref),t.coord=e[t.idx]}}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return e.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var t=this.domain.axes.get(this._projX).values[0],r=this.domain.axes.get(this._projY).values[0],n=this.projection.unproject({x:t,y:r});return e.latLng(n)}},{key:"canUsePalette",value:function(){return void 0!==this.vertical}},{key:"computePaletteExtent",value:function(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return t=r.minMaxOfRange(this.range),t=b(t),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}},{key:"getValue",value:function(){if(this._param&&void 0!==this._axesSubset.z.coord){var t=this.range.get({z:this._axesSubset.z.idx});return t}}},{key:"getValueAt",value:function(t,e){var r=this.getLatLng();if(r.distanceTo(t)<=e)return this.getValue()}},{key:"_getColor",value:function(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;var e=this.getPaletteIndex(t),r=this.palette,n=r.red,o=r.green,a=r.blue;return{r:n[e],g:o[e],b:a[e]}}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}},{key:"vertical",get:function(){return this._axesSubset.z.coord},set:function(t){this._axesSubset.z.coordPref=t,this._loadCoverageSubset(),this.redraw(),this.fire("axisChange",{axis:"vertical"})}},{key:"verticalSlices",get:function(){var t=this.domain.axes.get("z").values;return ArrayBuffer.isView(t)&&(t=[].concat(Y(t))),t}}]),n}(k(L(P(e.Layer)))),Lt=function(t){function e(t,r){V(this,e),r.pointClass=wt;var n=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return r.pointOptionsFn=function(){return{vertical:n._vertical}},n._vertical=r.vertical,n}return G(e,t),U(e,[{key:"canUsePalette",value:function(){return void 0!==this._vertical}},{key:"vertical",set:function(t){this._vertical=t;var e=!0,r=!1,n=void 0;try{for(var o,a=this._layers[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;i.vertical=t}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}}}]),e}(Pt),jt="black",Ot=function(t){function n(t,o){V(this,n);var a=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));r.isDomain(t)&&(t=r.fromDomain(t),o.parameter=t.parameters.keys().next().value,delete o.keys),o.paletteExtent||(o.paletteExtent="full"),e.Util.setOptions(a,o),a._cov=t;var i=o.keys?o.keys[0]:o.parameter;return a._param=i?t.parameters.get(i):null,a._defaultColor=o.defaultColor||jt,a}return G(n,t),U(n,[{key:"onAdd",value:function(t){var e=this;this._map=t,this.load().then(function(){return e.initializePalette()}).then(function(){e._unproject(),e._addPolygons(),e._pointInPolygonPreprocess(),e.fire("afterAdd")})}},{key:"_unproject",value:function(){var t=this.projection.unproject,e=this.domain.axes.get("composite"),r=e.coordinates.indexOf(this._projX),n=e.coordinates.indexOf(this._projY);this._polygonsLonLat=e.values.map(function(e){return e.map(function(e){return e.map(function(e){var o=t({x:e[r],y:e[n]}),a=o.lat,i=o.lon;return[i,a]})})})}},{key:"onRemove",value:function(t){this._removePolygons()}},{key:"getBounds",value:function(){return this._geojson.getBounds()}},{key:"getLatLng",value:function(){return this.getBounds().getCenter()}},{key:"computePaletteExtent",value:function(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return t=r.minMaxOfRange(this.range),t=b(t),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}},{key:"_pointInPolygonPreprocess",value:function(){var t=this._polygonsLonLat,e=!1;t.forEach(function(t){return r.ensureClockwisePolygon(t,e)}),this._pointInPolygons=r.getPointInPolygonsFn(t)}},{key:"_addPolygons",value:function(){for(var t=this,r=this._polygonsLonLat,n=[],o=0;o<r.length;o++)n.push({type:"Feature",properties:{index:o,color:this._getColor(this._getValue(o))},geometry:{type:"Polygon",coordinates:r[o]}});this._geojson=e.geoJson(n,{style:function(t){return{color:t.properties.color,fillOpacity:1,stroke:!1}},onEachFeature:function(e,r){r.on("click",function(r){r.index=e.properties.index,t.fire("click",r)})}}),this._geojson.addTo(this._map)}},{key:"_removePolygons",value:function(){this._map.removeLayer(this._geojson),delete this._geojson}},{key:"_getValue",value:function(t){if(this._param)return this.range.get({composite:t})}},{key:"getValueAt",value:function(t){var e=this._pointInPolygons([t.lng,t.lat]);if(e>=0)return this._getValue(e)}},{key:"_getColor",value:function(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;var e=this.getPaletteIndex(t),r=this.palette,n=r.red,o=r.green,a=r.blue;return"rgb("+n[e]+", "+o[e]+", "+a[e]+")"}},{key:"_updatePolygons",value:function(){this._removePolygons(),this._addPolygons()}},{key:"redraw",value:function(){this._updatePolygons(),this._geojson.redraw()}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}}]),n}(k(P(e.Layer))),Ct=function(t){function n(t,o){V(this,n);var a=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));r.isDomain(t)&&(t=r.fromDomain(t),delete o.keys,o.parameter=t.parameters.keys().next().value),o.paletteExtent||(o.paletteExtent="full"),e.Util.setOptions(a,o),a._cov=t;var i=o.keys?o.keys[0]:o.parameter;return a._param=i?t.parameters.get(i):null,a._axesSubset={t:{coordPref:o.time}},a._defaultColor=o.defaultColor||gt,a}return G(n,t),U(n,[{key:"onAdd",value:function(t){var e=this;this._map=t,this.load().then(function(){return e.initializePalette()}).then(function(){e._unproject(),e._addPolygon(),e._pointInPolygonPreprocess(),e.fire("afterAdd")})}},{key:"_unproject",value:function(){var t=this.projection.unproject,e=this.domain.axes.get("composite"),r=e.coordinates.indexOf(this._projX),n=e.coordinates.indexOf(this._projY);this._polygonLonLat=e.values[0].map(function(e){return e.map(function(e){var o=t({x:e[r],y:e[n]}),a=o.lat,i=o.lon;return[i,a]})})}},{key:"_loadCoverageSubset",value:function(){var t=this._axesSubset.t;if(void 0==t.coordPref)t.idx=t.coord=void 0;else{var e=this.domain.axes.get("t").values.map(function(t){return t.getTime()});t.idx=r.indexOfNearest(e,t.coordPref.getTime()),t.coord=e[t.idx]}}},{key:"onRemove",value:function(){this._removePolygon()}},{key:"getBounds",value:function(){return this._geojson.getBounds()}},{key:"getLatLng",value:function(){return this.getBounds().getCenter()}},{key:"bindPopup",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(this._popup=e,this._geojson){var n;(n=this._geojson).bindPopup.apply(n,e)}return this}},{key:"openPopup",value:function(){return this._geojson.openPopup(),this}},{key:"closePopup",value:function(){return this._geojson.closePopup(),this}},{key:"canUsePalette",value:function(){return void 0!==this.time}},{key:"computePaletteExtent",value:function(t){if("full"===t){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return t=r.minMaxOfRange(this.range),t=b(t),Promise.resolve(t)}throw new Error("Unknown extent specification: "+t)}},{key:"_pointInPolygonPreprocess",value:function(){var t=this._polygonLonLat,e=!1;r.ensureClockwisePolygon(t,e);var n=r.getPointInPolygonsFn([t]);this._pointInPolygon=function(t){return n(t)!==-1}}},{key:"_addPolygon",value:function(){var t=this,r=this._polygonLonLat,n={type:"Feature",properties:{color:this._getColor(this.getValue())},geometry:{type:"Polygon",coordinates:r}};if(this._geojson=e.geoJson(n,{style:function(t){return{color:t.properties.color,fillOpacity:1,stroke:!1}},onEachFeature:function(e,r){r.on("click",function(e){return t.fire("click",e)})}}),this._popup){var o;(o=this._geojson).bindPopup.apply(o,Y(this._popup))}this._geojson.addTo(this._map)}},{key:"_removePolygon",value:function(){this._map.removeLayer(this._geojson),delete this._geojson}},{key:"getValue",value:function(){if(this._param&&void 0!==this._axesSubset.t.coord){var t=this.range.get({t:this._axesSubset.t.idx});return t}}},{key:"getValueAt",value:function(t){if(!t)throw new Error("latlng parameter missing");if(this._pointInPolygon([t.lng,t.lat]))return this.getValue()}},{key:"_getColor",value:function(t){if(null===t)return this._defaultColor;if(void 0===t)return this._defaultColor;var e=this.getPaletteIndex(t),r=this.palette,n=r.red,o=r.green,a=r.blue;return"rgb("+n[e]+", "+o[e]+", "+a[e]+")"}},{key:"_updatePolygon",value:function(){this._removePolygon(),
this._addPolygon()}},{key:"redraw",value:function(){this._updatePolygon(),this._geojson.redraw()}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}},{key:"time",set:function(t){var e=this.time;this._axesSubset.t.coordPref=t?t.toISOString():void 0,this._loadCoverageSubset(),e!==this.time&&(this.redraw(),this.fire("axisChange",{axis:"time"}))},get:function(){if(this._axesSubset.t.coord){var t=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(t)}}},{key:"timeSlices",get:function(){return this.domain.axes.get("t").values.map(function(t){return new Date(t)})}}]),n}(k(P(e.Layer))),St="https://covjson.org/def/",Et=St+"core#",At=St+"domainTypes#",It=At+"Point",Mt=At+"PointSeries",Tt=At+"VerticalProfile",Rt=At+"Grid",Dt=At+"Trajectory",Vt=At+"PolygonSeries",Ut=At+"MultiPolygon",Nt=Et+"tuple",zt=Et+"polygon",Gt=(xt={},N(xt,Rt,yt),N(xt,It,_t),N(xt,Mt,bt),N(xt,Tt,wt),N(xt,Dt,mt),N(xt,Ut,Ot),N(xt,Vt,Ct),xt),Ft=(kt={},N(kt,It,Pt),N(kt,Tt,Lt),kt),Bt=function(t){function e(t){V(this,e);var r=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._syncProps=t.syncProperties||{},r._match=t.match||A,r._paramLayers=new Map,r._layerListeners=new Map,r._propSyncing=new Set,r}return G(e,t),U(e,[{key:"addLayer",value:function(t){var e=this;if(!t.parameter)return void console.log("layer has no parameter, skipping parameter sync");var r=Array.from(this._paramLayers.keys()),n=r.find(function(r){return e._match(r,t.parameter)}),o=void 0;n?(o=n,this._paramLayers.get(o).add(t),this._syncProperties(o)):(o=t.parameter,this._paramLayers.set(o,new Set([t]))),this._registerLayerListeners(t,o),n||this.fire("parameterAdd",{syncLayer:new Yt(o,this)})}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(t){if(this.paused=!1,t){var e=!0,r=!1,n=void 0;try{for(var o,a=this._paramLayers.keys()[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;this._syncProperties(i)}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}}}},{key:"_removeLayer",value:function(t,e){var r=!0,n=!1,o=void 0;try{for(var a,i=this._layerListeners.get(t)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=B(a.value,2),u=s[0],l=s[1];t.off(u,l)}}catch(t){n=!0,o=t}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}this._layerListeners.delete(t),this._paramLayers.get(e).delete(t),0===this._paramLayers.get(e).size&&(this._paramLayers.delete(e),this.fire("_parameterRemove",{param:e}))}},{key:"_registerLayerListeners",value:function(t,e){var r=this,n=new Map([["remove",function(){return r._removeLayer(t,e)}]]),o=!0,a=!1,i=void 0;try{for(var s,u=function(){var t=s.value,o=t+"Change";n.set(o,function(){return r._syncProperty(e,t)})},l=Object.keys(this._syncProps)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)u()}catch(t){a=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(a)throw i}}var c=!0,h=!1,f=void 0;try{for(var p,d=n[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=B(p.value,2),y=v[0],g=v[1];t.on(y,g)}}catch(t){h=!0,f=t}finally{try{!c&&d.return&&d.return()}finally{if(h)throw f}}this._layerListeners.set(t,n)}},{key:"_syncProperties",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,a=Object.keys(this._syncProps)[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;this._syncProperty(t,i)}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"_syncProperty",value:function(t,e){if(!this.paused&&!this._propSyncing.has(e)){var r=this._syncProps[e],n=[].concat(Y(this._paramLayers.get(t))).map(function(t){return t[e]}).reduce(r);this._propSyncing.add(e);var o=!0,a=!1,i=void 0;try{for(var s,u=this._paramLayers.get(t)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var l=s.value;l[e]=n}}catch(t){a=!0,i=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}this._propSyncing.delete(e),this.fire("_syncPropChange",{param:t,prop:e})}}}]),e}(c(e.Class)),Yt=function(t){function e(t,r){V(this,e);var n=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n._param=t,r.on("_parameterRemove",function(e){e.param===t&&n.fire("remove")}),r.on("_syncPropChange",function(e){e.param===t&&n.fire(e.prop+"Change")});var o=function(){return r._paramLayers.get(t)},a=!0,i=!1,s=void 0;try{for(var u,l=function(){var t=u.value;Object.defineProperty(n,t,{get:function(){return o().values().next().value[t]},set:function(e){r._propSyncing.add(t);var a=!0,i=!1,s=void 0;try{for(var u,l=o()[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;c[t]=e}}catch(t){i=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw s}}r._propSyncing.delete(t),n.fire(t+"Change")},enumerable:!0})},c=Object.keys(r._syncProps)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)l()}catch(t){i=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(i)throw s}}return n}return G(e,t),U(e,[{key:"parameter",get:function(){return this._param}}]),e}(c(e.Class)),Kt=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,e),r.maxWidth=r.maxWidth||350;var n=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));n._covs=Array.isArray(t)?t:[t],n._language=r.language,n._precision=r.precision||4,n._labels=r.labels?r.labels:new Array(n._covs.length),r.parameters&&(r.parameters=r.keys);var o=[];if(r.keys)o=Array.isArray(r.keys[0])?r.keys:r.keys.map(function(t){return[t]});else for(var a=0;a<n._covs.length;a++){var i=!0,s=!1,u=void 0;try{for(var l,c=n._covs[a].parameters.keys()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var h=l.value,f=new Array(n._covs.length);f[a]=h,o.push(f)}}catch(t){s=!0,u=t}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}}if(o=o.filter(function(t){return!t.every(function(t){return!t})}),o.some(function(t){return t.length!==n._covs.length}))throw new Error("Length of each parameter group must match number of coverages");n._paramKeyGroups=o,n._paramKeys=new Map;for(var p=function(t){var e=n._paramKeyGroups.map(function(e){return e[t]}).filter(function(t){return t});n._paramKeys.set(n._covs[t],e)},d=0;d<n._covs.length;d++)p(d);return n}return G(e,t),U(e,[{key:"onAdd",value:function(t){var r=this;z(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,t),t.fire("dataloading");var n=Promise.all(this._covs.map(function(t){return t.loadDomain()})),o=Promise.all(this._covs.map(function(t){return t.loadRanges(r._paramKeys.get(t))}));Promise.all([n,o]).then(function(e){var n=B(e,2),o=n[0],a=n[1];r._domains=o,r._ranges=a,r._addPlotToPopup(),r.fire("dataLoad"),r.fire("afterAdd"),t.fire("dataload")}).catch(function(e){console.error(e),r.fire("error",e),t.fire("dataload")})}},{key:"_addPlotToPopup",value:function(){var t=this,e=this._paramKeyGroups[0],n=this._getPlotElement(e),o=document.createElement("div");this._paramKeyGroups.length>1&&!function(){var e=document.createElement("select"),a=!0,i=!1,s=void 0;try{for(var u,l=t._paramKeyGroups.map(function(t,e){return[t,e]})[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=B(u.value,2),h=c[0],f=c[1],p=t._getRefParam(h),d=document.createElement("option");d.value=f,d.text=r.getLanguageString(p.observedProperty.label,t._language),e.appendChild(d)}}catch(t){i=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw s}}e.addEventListener("change",function(){o.removeChild(n);var r=t._paramKeyGroups[parseInt(e.value)];n=t._getPlotElement(r),o.appendChild(n)}),o.appendChild(e)}(),o.appendChild(n),this.setContent(o)}},{key:"_getRefParam",value:function(t){var e=I(this._covs,t),r=B(e.filter(function(t){var e=B(t,2),r=e[1];return r})[0],2),n=r[0],o=r[1],a=n.parameters.get(o);return a}},{key:"_getPlotElement",value:function(t){var e=this,o=this._domains[0],a=I(this._covs,t),i=this._getRefParam(t),s="Vertical",u="",l=r.getReferenceObject(o,"z");if(l&&1===l.coordinates.length){var c=l.system;if(c.cs&&(c.cs.axes||c.cs.csAxes)){var h=c.cs.axes?c.cs.axes[0]:c.cs.csAxes[0];u=r.stringifyUnit(h.unit,this._language),h.name&&(s=r.getLanguageString(h.name,this._language))}}var f=s;u&&(f+=" ("+u+")");for(var p=r.stringifyUnit(i.unit,this._language),d=r.getLanguageString(i.observedProperty.label,this._language),v={},y=[],g={},_=0;_<this._covs.length;_++){var m=a[_][1];if(m){var b="x"+_,x=i.key+_;g[x]=this._labels[_]?this._labels[_]:d,v[x]=b;for(var k=this._domains[_].axes.get("z").values,P=this._ranges[_].get(m),w=[b],L=[x],j=0;j<k.length;j++){var O=P.get({z:j});if(null!==O){var C=k[j];w.push(C),L.push(O)}}y.push(w),y.push(L)}}var S=350,E=300,A=document.createElement("div");return A.style.width=S+"px",A.style.height=E+"px",n.generate({bindto:A,data:{xs:v,columns:y,names:g},axis:{rotated:!0,x:{tick:{count:10,format:function(t){return t.toPrecision(e._precision)}},label:{text:f,position:"outer-center"}},y:{tick:{count:7,format:function(t){return t.toPrecision(e._precision)}},label:{text:d+(p?" ("+p+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1},tooltip:{format:{title:function(t){return s+": "+t.toPrecision(e._precision)+" "+u},value:function(t,r,n){return t.toPrecision(e._precision)+" "+p}}},zoom:{enabled:!0,rescale:!0},size:{height:E,width:S}}),A}}]),e}(e.Popup),Xt=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,e),r.maxWidth=r.maxWidth||350;var n=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));n._covs=Array.isArray(t)?t:[t],n._language=r.language,n._precision=r.precision||4,n._labels=r.labels?r.labels:new Array(n._covs.length),r.parameters&&(r.parameters=r.keys);var o=[];if(r.keys)o=Array.isArray(r.keys[0])?r.keys:r.keys.map(function(t){return[t]});else for(var a=0;a<n._covs.length;a++){var i=!0,s=!1,u=void 0;try{for(var l,c=n._covs[a].parameters.keys()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var h=l.value,f=new Array(n._covs.length);f[a]=h,o.push(f)}}catch(t){s=!0,u=t}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}}if(o=o.filter(function(t){return!t.every(function(t){return!t})}),o.some(function(t){return t.length!==n._covs.length}))throw new Error("Length of each parameter group must match number of coverages");n._paramKeyGroups=o,n._paramKeys=new Map;for(var p=function(t){var e=n._paramKeyGroups.map(function(e){return e[t]}).filter(function(t){return t});n._paramKeys.set(n._covs[t],e)},d=0;d<n._covs.length;d++)p(d);return n}return G(e,t),U(e,[{key:"onAdd",value:function(t){var r=this;z(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,t),t.fire("dataloading");var n=Promise.all(this._covs.map(function(t){return t.loadDomain()})),o=Promise.all(this._covs.map(function(t){return t.loadRanges(r._paramKeys.get(t))}));Promise.all([n,o]).then(function(e){var n=B(e,2),o=n[0],a=n[1];r._domains=o,r._ranges=a,r._addPlotToPopup(),r.fire("dataLoad"),r.fire("afterAdd"),t.fire("dataload")}).catch(function(e){console.error(e),r.fire("error",e),t.fire("dataload")})}},{key:"_addPlotToPopup",value:function(){var t=this,e=this._paramKeyGroups[0],n=this._getPlotElement(e),o=document.createElement("div");this._paramKeyGroups.length>1&&!function(){var e=document.createElement("select"),a=!0,i=!1,s=void 0;try{for(var u,l=t._paramKeyGroups.map(function(t,e){return[t,e]})[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=B(u.value,2),h=c[0],f=c[1],p=t._getRefParam(h),d=document.createElement("option");d.value=f,d.text=r.getLanguageString(p.observedProperty.label,t._language),e.appendChild(d)}}catch(t){i=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw s}}e.addEventListener("change",function(){o.removeChild(n);var r=t._paramKeyGroups[parseInt(e.value)];n=t._getPlotElement(r),o.appendChild(n)}),o.appendChild(e)}(),o.appendChild(n),this.setContent(o)}},{key:"_getRefParam",value:function(t){var e=M(this._covs,t),r=B(e.filter(function(t){var e=B(t,2),r=e[1];return r})[0],2),n=r[0],o=r[1],a=n.parameters.get(o);return a}},{key:"_getPlotElement",value:function(t){for(var e=this,o=(this._domains[0],M(this._covs,t)),a=this._getRefParam(t),i="Time",s=r.stringifyUnit(a.unit,this._language),u=r.getLanguageString(a.observedProperty.label,this._language),l={},c=[],h={},f=0;f<this._covs.length;f++){var p=o[f][1];if(p){var d="x"+f,v=a.key+f;h[v]=this._labels[f]?this._labels[f]:u,l[v]=d;for(var y=this._domains[f].axes.get("t").values,g=this._ranges[f].get(p),_=[d],m=[v],b=0;b<y.length;b++){var x=g.get({t:b});if(null!==x){var k=new Date(y[b]);_.push(k),m.push(x)}}c.push(_),c.push(m)}}var P=300,w=document.createElement("div");return w.style.width=this.options.maxWidth+"px",w.style.height=P+"px",n.generate({bindto:w,data:{xs:l,columns:c,names:h},axis:{x:{type:"timeseries",tick:{format:this.options.timeFormat},label:{text:i,position:"outer-center"}},y:{tick:{count:7,format:function(t){return t.toPrecision(e._precision)}},label:{text:u+(s?" ("+s+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1},tooltip:{format:{value:function(t,r,n){return t.toPrecision(e._precision)+" "+s}}},zoom:{enabled:!0,rescale:!0},size:{height:P,width:this.options.maxWidth}}),w}}]),e}(e.Popup),Jt=function(t){function e(t,r){V(this,e);var n=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),o=n.options.layers||[];return n._maxDistanceForPointsInPx=n.options.maxDistanceForPointsInPx||20,n.coverageLayers=new Set(o.filter(function(t){return t.getValueAt})),n}return G(e,t),U(e,[{key:"addCoverageLayer",value:function(t){return t.getValueAt?(this.coverageLayers.add(t),this.updateData(),this):this}},{key:"removeCoverageLayer",value:function(t){return this.coverageLayers.delete(t),this.updateData(),this}},{key:"onAdd",value:function(t){this._map=t,z(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,t),this.updateData()}},{key:"onRemove",value:function(t){z(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRemove",this).call(this,t),this._map=null}},{key:"setLatLng",value:function(t){return z(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setLatLng",this).call(this,t),this.updateData(),this}},{key:"hasData",value:function(){return this._hasData}},{key:"updateData",value:function(){if(this._map){var t="",e=this.getLatLng(),n=!0,o=!1,a=void 0;try{for(var i,s=this.coverageLayers[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value,l=R(this._map)*this._maxDistanceForPointsInPx,c=u.getValueAt(e,l);if(null!=c){var h=u.parameter,f=h.observedProperty.categories?"":r.stringifyUnit(h.unit);if(h.categoryEncoding){var p=r.getCategory(h,c);c=r.getLanguageString(p.label)}t+="<div><strong>"+r.getLanguageString(h.observedProperty.label)+"</strong>: "+c+" "+f+"</div>"}}}catch(t){o=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return t||(this._hasData=!1,t="No data."),this._hasData=!0,this.setContent(t),this}}}]),e}(e.Popup),Wt=function(t){function e(){return V(this,e),F(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return G(e,t),e}(T(Jt));t.legend=l,t.DiscreteLegend=J,t.ContinuousLegend=q,t.TimeAxis=tt,t.VerticalAxis=ot,t.Dropdown=nt,t.Grid=yt,t.VerticalProfile=wt,t.Trajectory=mt,t.Point=_t,t.PointSeries=bt,t.MultiPolygon=Ot,t.PolygonSeries=Ct,t.PointCollection=Pt,t.VerticalProfileCollection=Lt,t.ParameterSync=Bt,t.PaletteMixin=k,t.CoverageMixin=P,t.CircleMarkerMixin=L,t.VerticalProfilePlot=Kt,t.TimeSeriesPlot=Xt,t.DraggableValuePopup=Wt,t.ValuePopup=Jt,t.DraggablePopupMixin=T,t.dataLayer=S,t.dataLayerClass=E,t.linearPalette=v,t.directPalette=y,t.cssToRGB=g,t.paletteFromObject=_,t.scale=m,t.enlargeExtentIfEqual=b,t.PaletteManager=pt,t.COVJSON_POINT=It,t.COVJSON_POINTSERIES=Mt,t.COVJSON_VERTICALPROFILE=Tt,t.COVJSON_GRID=Rt,t.COVJSON_TRAJECTORY=Dt,t.COVJSON_POLYGONSERIES=Vt,t.COVJSON_MULTIPOLYGON=Ut,t.COVJSON_DATATYPE_TUPLE=Nt,t.COVJSON_DATATYPE_POLYGON=zt,t.COVERAGE=r.COVERAGE,t.COVERAGECOLLECTION=r.COVERAGECOLLECTION,t.DOMAIN=r.DOMAIN}(this.C=this.C||{},L,CovUtils,this.c3||{});
//# sourceMappingURL=leaflet-coverage.min.js.map