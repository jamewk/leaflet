(function(mt){"use strict";function Bt(A,i){if(0===A.length)throw new Error("Array must have at least one element");var C=-1,S=A.length;if(1===A.length||A[0]<A[1])for(;S-C>1;){var U=Math.round((C+S)/2);A[U]<=i?C=U:S=U}else for(;S-C>1;){var W=Math.round((C+S)/2);A[W]>=i?C=W:S=W}return A[C]===i&&(S=C),-1===C&&(C=S),S===A.length&&(S=C),[C,S]}function hr(A,i){var C=Bt(A,i),S=C[0],j=C[1];return Math.abs(i-A[S])<=Math.abs(i-A[j])?S:j}function xe(A){var i=arguments.length<=1||void 0===arguments[1]?pr:arguments[1];if(i in A)return i;var C=i.split("-")[0],S=Object.keys(A).filter(function(j){return C===j.split("-")[0]});return S.length?S[0]:Object.keys(A)[0]}function Jr(A){return A[xe(A,arguments.length<=1||void 0===arguments[1]?pr:arguments[1])]}function Nr(A,i){var C=[].concat(yt(A.shape));C.sort(function(J,Q){return K(J,2)[1]-K(Q,2)[1]});var S="var obj = {}",j="",U=!0,W=!1,I=void 0;try{for(var g,_=C[Symbol.iterator]();!(U=(g=_.next()).done);U=!0){var R=K(g.value,2),M=R[0];S+="\n      for (var i"+M+"=0; i"+M+" < "+R[1]+"; ++i"+M+") {\n        obj['"+M+"'] = i"+M+"\n    ",j+="}"}}catch(J){W=!0,I=J}finally{try{!U&&_.return&&_.return()}finally{if(W)throw I}}S+="\n    fn(get(obj))\n  ",new Function("return function iterRange (get, fn) { "+S+" "+j+" }")()(A.get,i)}function yr(A){return A.type===Xe}function Re(A){if(!yr(A))throw new Error("must be a Coverage")}function vr(A){return A.type===Ye}function Dr(A){if(!vr(A))throw new Error("must be a Domain")}function dt(A,i){return A(i={exports:{}},i.exports),i.exports}function ur(A,i){return A.referencing.find(function(S){return-1!==S.coordinates.indexOf(i)})}function Ve(A){return A.referencing.find(function(S){return-1!==["GeodeticCRS","GeographicCRS","GeocentricCRS","ProjectedCRS"].indexOf(S.system.type)})}function Sr(A){return"GeographicCRS"===A.type||-1!==wn.indexOf(A.id)}function lr(A){if(A.referencing.some(function(U){return Sr(U.system)}))return function ei(A){var i=A.referencing.find(function(r){return Sr(r.system)}),C=Pn[i.system.id];if(C>1)throw new Error;var S=i.coordinates[C],j=void 0,U=void 0;if(A.axes.has(S)){var I=A.axes.get(S).values;if((j=I[0])>(U=I[I.length-1])){var g=[U,j];j=g[0],U=g[1]}}else{var R=[].concat(yt(A.axes.values())).find(function(r){return-1!==r.coordinates.indexOf(S)}),M=R.coordinates.indexOf(S);if(j=1/0,U=-1/0,R.dataType===He){var q=!0,N=!1,J=void 0;try{for(var Q,nt=R.values[Symbol.iterator]();!(q=(Q=nt.next()).done);q=!0){var V=Q.value[M];j=Math.min(V,j),U=Math.max(V,U)}}catch(r){N=!0,J=r}finally{try{!q&&nt.return&&nt.return()}finally{if(N)throw J}}}else{if(R.dataType!==qr)throw new Error("Unsupported data type: "+R.dataType);var Z=!0,st=!1,bt=void 0;try{for(var Tt,ht=R.values[Symbol.iterator]();!(Z=(Tt=ht.next()).done);Z=!0){var ft=Tt.value,jt=!0,qt=!1,Wt=void 0;try{for(var zt,At=ft[Symbol.iterator]();!(jt=(zt=At.next()).done);jt=!0){var Ft=zt.value,Xt=!0,Ht=!1,Jt=void 0;try{for(var oe,de=Ft[Symbol.iterator]();!(Xt=(oe=de.next()).done);Xt=!0){var P=oe.value[M];j=Math.min(P,j),U=Math.max(P,U)}}catch(r){Ht=!0,Jt=r}finally{try{!Xt&&de.return&&de.return()}finally{if(Ht)throw Jt}}}}catch(r){qt=!0,Wt=r}finally{try{!jt&&At.return&&At.return()}finally{if(qt)throw Wt}}}}catch(r){st=!0,bt=r}finally{try{!Z&&ht.return&&ht.return()}finally{if(st)throw bt}}}}var t=(U+j)/2,v=t-180,u=t+180;return{project:function(r){var b,x=r.lon,O=r.lat;b=x>=v&&u>=x?x:((x-v)%360+360)%360+v;var s=K(0===C?[b,O]:[O,b],2);return{x:s[0],y:s[1]}},unproject:function(r){var x=r.x,O=r.y,o=K(0===C?[x,O]:[O,x],2);return{lon:o[0],lat:o[1]}}}}(A);var C=Ve(A);if(!C)throw new Error("No horizontal CRS found in coverage domain");var S=C.system.id,j=_n(S);if(!j)throw new Error("Projection "+S+" not cached in uriproj, use loadProjection() instead");return rr(j)}function er(A){return Ve(A).coordinates}function rr(A){return{project:function(i){var j=A.forward([i.lon,i.lat]),U=K(j,2);return{x:U[0],y:U[1]}},unproject:function(i){var j=A.inverse([i.x,i.y]),U=K(j,2);return{lon:U[0],lat:U[1]}}}}function fr(A,i){if(!mr(A,i))throw new Error("'"+i+"' is not a longitude axis");var C=A.axes.get(i).values,S=C[0],j=C[C.length-1];if(S>j){var U=[j,S];S=U[0],j=U[1]}var W=(j+S)/2,I=W-180,g=W+180;return function(_){return _>=I&&g>=_?_:((_-I)%360+360)%360+I}}function mr(A,i){var C=ur(A,i);if(!C)return!1;var S=C.system.id;if(-1===wn.indexOf(S))return!1;var j=C.coordinates.indexOf(i);return Pn[S]===j}function br(A,i){var C=A.axes.get(i).values[0];return"string"==typeof C&&!isNaN(new Date(C).getTime())}function Ne(A){var i=void 0,C=!1;if("string"==typeof A?i=new Date(A).getTime():A instanceof Date?i=A.getTime():C=!0,isNaN(i)&&(C=!0),C)throw new Error("Invalid date: "+A);return i}function gr(A,i){var C={};for(var S in i)if(A.axes.has(S)&&null!=i[S]){if("number"==typeof i[S]){var j=i[S];C[S]={start:j,stop:j+1}}else C[S]=i[S];var U=C[S],W=U.start,I=void 0===W?0:W,g=U.stop,_=void 0===g?A.axes.get(S).values.length:g,R=U.step,M=void 0===R?1:R;if(0>=M)throw new Error("Invalid constraint for "+S+": step="+M+" must be > 0");if(I>=_||0>I)throw new Error("Invalid constraint for "+S+": stop="+_+" must be > start="+I+" and both >= 0");C[S]={start:I,stop:_,step:M}}var q=!0,N=!1,J=void 0;try{for(var Q,nt=A.axes.keys()[Symbol.iterator]();!(q=(Q=nt.next()).done);q=!0){var et=Q.value;if(!(et in C)){var V=A.axes.get(et).values.length;C[et]={start:0,stop:V,step:1}}}}catch(Z){N=!0,J=Z}finally{try{!q&&nt.return&&nt.return()}finally{if(N)throw J}}return C}function Or(A,i){i=gr(A,i);var C={type:Ye,domainType:A.domainType,axes:new Map(A.axes),referencing:A.referencing},S=!0,j=!1,U=void 0;try{for(var W,I=function(){var _=W.value,R=A.axes.get(_),M=R.values,q=R.bounds,N=i[_],J=void 0,Q=void 0,nt=N.start,et=N.stop,V=N.step;if(0===nt&&et===M.length&&1===V)J=M,Q=q;else if(1===V)J=M.subarray?M.subarray(nt,et):M.slice(nt,et),q&&(Q={get:function(jt){return q.get(nt+jt)}});else{var Z=Math.trunc((et-nt)/V);J=new M.constructor(Z+(et-nt)%V);for(var Tt=nt,ht=0;et>Tt;Tt+=V,ht++)J[ht]=M[Tt];q&&(Q={get:function(jt){return q.get(nt+jt*V)}})}C.axes.set(_,{dataType:R.dataType,coordinates:R.coordinates,values:J,bounds:Q})},g=Object.keys(i)[Symbol.iterator]();!(S=(W=g.next()).done);S=!0)I()}catch(_){j=!0,U=_}finally{try{!S&&g.return&&g.return()}finally{if(j)throw U}}return C}function Cr(A,i){return A.loadDomain().then(function(C){i=gr(C,i);var S=Or(C,i),j=function(g){var _={dataType:g.dataType,get:function(et){var V={},Z=!0,st=!1,bt=void 0;try{for(var Tt,ht=Object.keys(et)[Symbol.iterator]();!(Z=(Tt=ht.next()).done);Z=!0){var ft=Tt.value,jt=i[ft];V[ft]=jt.start+et[ft]*jt.step}}catch(zt){st=!0,bt=zt}finally{try{!Z&&ht.return&&ht.return()}finally{if(st)throw bt}}return g.get(V)}};_.shape=new Map;var R=!0,M=!1,q=void 0;try{for(var N,J=C.axes.keys()[Symbol.iterator]();!(R=(N=J.next()).done);R=!0){var Q=N.value,nt=S.axes.get(Q).values.length;_.shape.set(Q,nt)}}catch(et){M=!0,q=et}finally{try{!R&&J.return&&J.return()}finally{if(M)throw q}}return _},I={type:Xe,domainType:A.domainType,parameters:A.parameters,loadDomain:function(){return Promise.resolve(S)},loadRange:function(g){return A.loadRange(g).then(j)},loadRanges:function(g){return A.loadRanges(g).then(function(_){return new Map([].concat(yt(_)).map(function(R){var M=K(R,2);return[M[0],j(M[1])]}))})}};return I.subsetByIndex=Cr.bind(null,I),I.subsetByValue=xr.bind(null,I),I})}function xr(A,i){return A.loadDomain().then(function(C){var S={},j=!0,U=!1,W=void 0;try{for(var I,g=Object.keys(i)[Symbol.iterator]();!(j=(I=g.next()).done);j=!0){var _=I.value,R=i[_];if(null!=R&&C.axes.has(_)){var q=C.axes.get(_).values,N=br(C,_),J=mr(C,_),Q=J?fr(C,_):void 0;if("number"==typeof R||"string"==typeof R||R instanceof Date){var et,nt=R;if(N?(nt=Ne(nt),q=q.map(function(oe){return new Date(oe).getTime()})):J&&(nt=Q(nt)),-1===(et=q.indexOf?q.indexOf(nt):Array.prototype.indexOf.call(q,nt)))throw new Error("Domain value not found: "+R);S[_]=et}else if("target"in R){var V=R.target;if(N)V=Ne(V),q=q.map(function(oe){return new Date(oe).getTime()});else if(J)V=Q(V);else if("number"!=typeof q[0]||"number"!=typeof V)throw new Error("Invalid axis or constraint value type");var Z=hr(q,V);S[_]=Z}else{if(!("start"in R)||!("stop"in R))throw new Error("Invalid subset constraints");var st=R.start,bt=R.stop;if(N){var Tt=[Ne(st),Ne(bt)];st=Tt[0],bt=Tt[1],q=q.map(function(oe){return new Date(oe).getTime()})}else if(J){var ht=[Q(st),Q(bt)];st=ht[0],bt=ht[1]}else if("number"!=typeof q[0]||"number"!=typeof st)throw new Error("Invalid axis or constraint value type");var ft=Bt(q,st),jt=K(ft,2),qt=jt[0],Wt=jt[1],zt=Bt(q,bt),At=K(zt,2),Ft=At[0],Xt=At[1],Ht=Math.min(qt,Wt,Ft,Xt),Jt=Math.max(qt,Wt,Ft,Xt)+1;S[_]={start:Ht,stop:Jt}}}}}catch(oe){U=!0,W=oe}finally{try{!j&&g.return&&g.return()}finally{if(U)throw W}}return A.subsetByIndex(S)})}function _e(A){Re(A),A.subsetByIndex=Cr.bind(null,A),A.subsetByValue=xr.bind(null,A)}function Me(A){Re(A),A.loadRanges=function i(C){return C||(C=A.parameters.keys()),Promise.all([].concat(yt(C)).map(A.loadRange)).then(function(S){return new Map(C.map(function(j,U){return[j,S[U]]}))})}}function Ge(A){var i=void 0;if(A instanceof Map)i=new Map(A);else for(var C in i=Object.create(Object.getPrototypeOf(A)),A)i[C]=A[C];return i}function me(A,i){return{type:Xe,domainType:A.domainType,parameters:i,loadDomain:function(){return A.loadDomain()},loadRange:function(S){return A.loadRange(S)},loadRanges:function(S){return A.loadRanges(S)},subsetByIndex:function(S){return A.subsetByIndex(S).then(function(j){return me(j,i)})},subsetByValue:function(S){return A.subsetByValue(S).then(function(j){return me(j,i)})}}}function Mr(A,i){Re(A);var C=i.parameter,S=i.inputParameters,j=i.dataType,U=void 0===j?"float":j,W=i.fn,I=new Map(A.parameters);I.set(C.key,C);var R={type:Xe,domainType:A.domainType,parameters:I,loadDomain:function(){return A.loadDomain()},loadRange:function(M){return C.key===M?A.loadRanges(S).then(function(M){var q=S.map(function(Q){return M.get(Q)});return{shape:q[0].shape,dataType:U,get:function(Q){return W.apply(void 0,[Q].concat(yt(q)))}}}):A.loadRange(M)},subsetByIndex:function(M){return A.subsetByIndex(M).then(function(q){return Mr(q,i)})},subsetByValue:function(M){return A.subsetByValue(M).then(function(q){return Mr(q,i)})}};return Me(R),R}function Ar(A,i){var C=!0,S=!1,j=void 0;try{for(var U,W=Object.keys(A)[Symbol.iterator]();!(C=(U=W.next()).done);C=!0){var I=U.value;i[I]=A[I]}}catch(g){S=!0,j=g}finally{try{!C&&W.return&&W.return()}finally{if(S)throw j}}}var Ye="Domain",Xe="Coverage",wr=Xe+"Collection",ir="http://covjson.org/def/core#",He=ir+"tuple",qr=ir+"polygon",pr="en",Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol?"symbol":typeof A},ai=function(A,i){if(!(A instanceof i))throw new TypeError("Cannot call a class as a function")},$=function(){function A(i,C){for(var S=0;S<C.length;S++){var j=C[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(i,j.key,j)}}return function(i,C,S){return C&&A(i.prototype,C),S&&A(i,S),i}}(),ut=function(A,i,C){return i in A?Object.defineProperty(A,i,{value:C,enumerable:!0,configurable:!0,writable:!0}):A[i]=C,A},K=function(i,C){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return function A(i,C){var S=[],j=!0,U=!1,W=void 0;try{for(var I,g=i[Symbol.iterator]();!(j=(I=g.next()).done)&&(S.push(I.value),!C||S.length!==C);j=!0);}catch(_){U=!0,W=_}finally{try{!j&&g.return&&g.return()}finally{if(U)throw W}}return S}(i,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")},yt=function(A){if(Array.isArray(A)){for(var i=0,C=Array(A.length);i<A.length;i++)C[i]=A[i];return C}return Array.from(A)},pt=dt(function(A){A.exports=function(i,C,S,j,U){var W,I;W=i/C;for(var g=0;15>g;g++)if(W+=I=(i-(C*W-S*Math.sin(2*W)+j*Math.sin(4*W)-U*Math.sin(6*W)))/(C-2*S*Math.cos(2*W)+4*j*Math.cos(4*W)-6*U*Math.cos(6*W)),Math.abs(I)<=1e-10)return W;return NaN}}),Mt=pt&&"object"==typeof pt&&"default"in pt?pt.default:pt,wt=dt(function(A){A.exports=function(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}}),Ot=wt&&"object"==typeof wt&&"default"in wt?wt.default:wt,It=dt(function(A){A.exports=function(i,C,S){var j=C*S;return i/Math.sqrt(1-j*j)}}),Nt=It&&"object"==typeof It&&"default"in It?It.default:It,Rt=dt(function(A){A.exports=function(i){return i*i*i*(35/3072)}}),te=Rt&&"object"==typeof Rt&&"default"in Rt?Rt.default:Rt,Ct=dt(function(A){A.exports=function(i){return.05859375*i*i*(1+.75*i)}}),ue=Ct&&"object"==typeof Ct&&"default"in Ct?Ct.default:Ct,re=dt(function(A){A.exports=function(i){return.375*i*(1+.25*i*(1+.46875*i))}}),fe=re&&"object"==typeof re&&"default"in re?re.default:re,Ut=dt(function(A){A.exports=function(i){return 1-.25*i*(1+i/16*(3+1.25*i))}}),Zt=Ut&&"object"==typeof Ut&&"default"in Ut?Ut.default:Ut,ce=dt(function(A){A.exports=function(i,C,S,j,U){return i*U-C*Math.sin(2*U)+S*Math.sin(4*U)-j*Math.sin(6*U)}}),Oe=ce&&"object"==typeof ce&&"default"in ce?ce.default:ce,ke=dt(function(A){A.exports=function(i){return 0>i?-1:1}}),Ue=ke&&"object"==typeof ke&&"default"in ke?ke.default:ke,De=dt(function(A){var i=2*Math.PI,S=Ue;A.exports=function(j){return Math.abs(j)<=3.14159265359?j:j-S(j)*i}}),ye=De&&"object"==typeof De&&"default"in De?De.default:De,Ce=dt(function(A,i){var C=ye,S=Math.PI/2,j=1e-10,U=Oe,W=Zt,I=fe,g=ue,_=te,R=Nt,M=Ot,q=Mt;i.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},i.forward=function(N){var J,Q,nt,et,V,Z,st,bt,Tt,ht,ft,jt,qt,Wt,zt,At,Ft,Xt,Ht,Jt,oe,de,P=N.x,t=N.y,v=Math.sin(N.y),u=Math.cos(N.y),r=C(P-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=j?(N.x=this.x0+this.a*(S-t)*Math.sin(r),N.y=this.y0-this.a*(S-t)*Math.cos(r),N):Math.abs(this.sin_p12+1)<=j?(N.x=this.x0+this.a*(S+t)*Math.sin(r),N.y=this.y0+this.a*(S+t)*Math.cos(r),N):(Xt=this.sin_p12*v+this.cos_p12*u*Math.cos(r),Ft=(At=Math.acos(Xt))/Math.sin(At),N.x=this.x0+this.a*Ft*u*Math.sin(r),N.y=this.y0+this.a*Ft*(this.cos_p12*v-this.sin_p12*u*Math.cos(r)),N):(J=W(this.es),Q=I(this.es),nt=g(this.es),et=_(this.es),Math.abs(this.sin_p12-1)<=j?(V=this.a*U(J,Q,nt,et,S),Z=this.a*U(J,Q,nt,et,t),N.x=this.x0+(V-Z)*Math.sin(r),N.y=this.y0-(V-Z)*Math.cos(r),N):Math.abs(this.sin_p12+1)<=j?(V=this.a*U(J,Q,nt,et,S),Z=this.a*U(J,Q,nt,et,t),N.x=this.x0+(V+Z)*Math.sin(r),N.y=this.y0+(V+Z)*Math.cos(r),N):(st=v/u,bt=R(this.a,this.e,this.sin_p12),Tt=R(this.a,this.e,v),ht=Math.atan((1-this.es)*st+this.es*bt*this.sin_p12/(Tt*u)),Ht=0===(ft=Math.atan2(Math.sin(r),this.cos_p12*Math.tan(ht)-this.sin_p12*Math.cos(r)))?Math.asin(this.cos_p12*Math.sin(ht)-this.sin_p12*Math.cos(ht)):Math.abs(Math.abs(ft)-Math.PI)<=j?-Math.asin(this.cos_p12*Math.sin(ht)-this.sin_p12*Math.cos(ht)):Math.asin(Math.sin(r)*Math.cos(ht)/Math.sin(ft)),jt=this.e*this.sin_p12/Math.sqrt(1-this.es),qt=this.e*this.cos_p12*Math.cos(ft)/Math.sqrt(1-this.es),N.x=this.x0+(At=bt*Ht*(1-(Jt=Ht*Ht)*(zt=qt*qt)*(1-zt)/6+(oe=Jt*Ht)/8*(Wt=jt*qt)*(1-2*zt)+(de=oe*Ht)/120*(zt*(4-7*zt)-3*jt*jt*(1-7*zt))-de*Ht/48*Wt))*Math.sin(ft),N.y=this.y0+At*Math.cos(ft),N))},i.inverse=function(N){var J,Q,nt,et,V,Z,st,bt,Tt,ht,ft,jt,Wt,zt,At,Ft,Xt,Ht,Jt,oe,de,le;return N.x-=this.x0,N.y-=this.y0,this.sphere?(J=Math.sqrt(N.x*N.x+N.y*N.y))>2*S*this.a?void 0:(Q=J/this.a,nt=Math.sin(Q),et=Math.cos(Q),V=this.long0,Math.abs(J)<=j?Z=this.lat0:(Z=M(et*this.sin_p12+N.y*nt*this.cos_p12/J),st=Math.abs(this.lat0)-S,V=C(Math.abs(st)<=j?this.lat0>=0?this.long0+Math.atan2(N.x,-N.y):this.long0-Math.atan2(-N.x,N.y):this.long0+Math.atan2(N.x*nt,J*this.cos_p12*et-N.y*this.sin_p12*nt))),N.x=V,N.y=Z,N):(bt=W(this.es),Tt=I(this.es),ht=g(this.es),ft=_(this.es),Math.abs(this.sin_p12-1)<=j?(jt=this.a*U(bt,Tt,ht,ft,S),J=Math.sqrt(N.x*N.x+N.y*N.y),Z=q((jt-J)/this.a,bt,Tt,ht,ft),V=C(this.long0+Math.atan2(N.x,-1*N.y)),N.x=V,N.y=Z,N):Math.abs(this.sin_p12+1)<=j?(jt=this.a*U(bt,Tt,ht,ft,S),J=Math.sqrt(N.x*N.x+N.y*N.y),Z=q((J-jt)/this.a,bt,Tt,ht,ft),V=C(this.long0+Math.atan2(N.x,N.y)),N.x=V,N.y=Z,N):(J=Math.sqrt(N.x*N.x+N.y*N.y),At=Math.atan2(N.x,N.y),Wt=R(this.a,this.e,this.sin_p12),Ft=Math.cos(At),Jt=3*this.es*(1-(Ht=-(Xt=this.e*this.cos_p12*Ft)*Xt/(1-this.es)))*this.sin_p12*this.cos_p12*Ft/(1-this.es),le=1-Ht*(de=(oe=J/Wt)-Ht*(1+Ht)*Math.pow(oe,3)/6-Jt*(1+3*Ht)*Math.pow(oe,4)/24)*de/2-oe*de*de*de/6,zt=Math.asin(this.sin_p12*Math.cos(de)+this.cos_p12*Math.sin(de)*Ft),V=C(this.long0+Math.asin(Math.sin(At)*Math.sin(de)/Math.cos(zt))),Z=Math.atan((1-this.es*le*this.sin_p12/Math.sin(zt))*Math.tan(zt)/(1-this.es)),N.x=V,N.y=Z,N))},i.names=["Azimuthal_Equidistant","aeqd"]}),Qe=Ce&&"object"==typeof Ce&&"default"in Ce?Ce.default:Ce,ge=dt(function(A,i){var C=ye,S=Math.PI/2,j=1e-10,U=Ot;i.init=function(){this.R=this.a},i.forward=function(W){var I,g,R=W.y,M=C(W.x-this.long0);Math.abs(R)<=j&&(I=this.x0+this.R*M,g=this.y0);var q=U(2*Math.abs(R/Math.PI));(Math.abs(M)<=j||Math.abs(Math.abs(R)-S)<=j)&&(I=this.x0,g=R>=0?this.y0+Math.PI*this.R*Math.tan(.5*q):this.y0+Math.PI*this.R*-Math.tan(.5*q));var N=.5*Math.abs(Math.PI/M-M/Math.PI),J=N*N,Q=Math.sin(q),nt=Math.cos(q),et=nt/(Q+nt-1),Z=et*(2/Q-1),st=Z*Z,bt=Math.PI*this.R*(N*(et-st)+Math.sqrt(J*(et-st)*(et-st)-(st+J)*(et*et-st)))/(st+J);0>M&&(bt=-bt),I=this.x0+bt;var Tt=J+et;return bt=Math.PI*this.R*(Z*Tt-N*Math.sqrt((st+J)*(J+1)-Tt*Tt))/(st+J),g=R>=0?this.y0+bt:this.y0-bt,W.x=I,W.y=g,W},i.inverse=function(W){var I,g,_,R,M,q,N,J,Q,nt,et,V;return W.x-=this.x0,W.y-=this.y0,et=Math.PI*this.R,M=(_=W.x/et)*_+(R=W.y/et)*R,et=3*(R*R/(J=-2*(q=-Math.abs(R)*(1+M))+1+2*R*R+M*M)+(2*(N=q-2*R*R+_*_)*N*N/J/J/J-9*q*N/J/J)/27)/(Q=(q-N*N/3/J)/J)/(nt=2*Math.sqrt(-Q/3)),Math.abs(et)>1&&(et=et>=0?1:-1),V=Math.acos(et)/3,g=W.y>=0?(-nt*Math.cos(V+Math.PI/3)-N/3/J)*Math.PI:-(-nt*Math.cos(V+Math.PI/3)-N/3/J)*Math.PI,I=Math.abs(_)<j?this.long0:C(this.long0+Math.PI*(M-1+Math.sqrt(1+2*(_*_-R*R)+M*M))/2/_),W.x=I,W.y=g,W},i.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]}),ze=ge&&"object"==typeof ge&&"default"in ge?ge.default:ge,Fe=dt(function(A){var i=Math.PI/2,C=Ue;A.exports=function(S){return Math.abs(S)<i?S:S-C(S)*Math.PI}}),Ie=Fe&&"object"==typeof Fe&&"default"in Fe?Fe.default:Fe,Ze=dt(function(A){A.exports=function(i,C,S){var j=i*C;return S/Math.sqrt(1-j*j)}}),pe=Ze&&"object"==typeof Ze&&"default"in Ze?Ze.default:Ze,be=dt(function(A,i){var C=Zt,S=fe,j=ue,U=te,W=pe,I=Oe,g=ye,_=Ie,R=Mt;i.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=C(this.es),this.e1=S(this.es),this.e2=j(this.es),this.e3=U(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=W(this.e,this.sinphi,this.cosphi),this.ml1=I(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=W(this.e,this.sinphi,this.cosphi),this.ml2=I(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=I(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},i.forward=function(q){var N,J=q.x,Q=q.y;if(this.sphere)N=this.a*(this.g-Q);else{var nt=I(this.e0,this.e1,this.e2,this.e3,Q);N=this.a*(this.g-nt)}var et=this.ns*g(J-this.long0),V=this.x0+N*Math.sin(et),Z=this.y0+this.rh-N*Math.cos(et);return q.x=V,q.y=Z,q},i.inverse=function(q){var N,J,Q,nt;q.x-=this.x0,q.y=this.rh-q.y+this.y0,this.ns>=0?(J=Math.sqrt(q.x*q.x+q.y*q.y),N=1):(J=-Math.sqrt(q.x*q.x+q.y*q.y),N=-1);var et=0;return 0!==J&&(et=Math.atan2(N*q.x,N*q.y)),this.sphere?(nt=g(this.long0+et/this.ns),Q=_(this.g-J/this.a),q.x=nt,q.y=Q,q):(Q=R(this.g-J/this.a,this.e0,this.e1,this.e2,this.e3),nt=g(this.long0+et/this.ns),q.x=nt,q.y=Q,q)},i.names=["Equidistant_Conic","eqdc"]}),$e=be&&"object"==typeof be&&"default"in be?be.default:be,Ee=dt(function(A,i){var C=ye;i.init=function(){},i.forward=function(j){for(var W=j.y,I=C(j.x-this.long0),g=W,_=Math.PI*Math.sin(W),R=0;;R++){var M=-(g+Math.sin(g)-_)/(1+Math.cos(g));if(g+=M,Math.abs(M)<1e-10)break}g/=2,Math.PI/2-Math.abs(W)<1e-10&&(I=0);var q=.900316316158*this.a*I*Math.cos(g)+this.x0,N=1.4142135623731*this.a*Math.sin(g)+this.y0;return j.x=q,j.y=N,j},i.inverse=function(j){var U,W;j.x-=this.x0,j.y-=this.y0,W=j.y/(1.4142135623731*this.a),Math.abs(W)>.999999999999&&(W=.999999999999),U=Math.asin(W);var I=C(this.long0+j.x/(.900316316158*this.a*Math.cos(U)));I<-Math.PI&&(I=-Math.PI),I>Math.PI&&(I=Math.PI),W=(2*U+Math.sin(2*U))/Math.PI,Math.abs(W)>1&&(W=1);var g=Math.asin(W);return j.x=I,j.y=g,j},i.names=["Mollweide","moll"]}),or=Ee&&"object"==typeof Ee&&"default"in Ee?Ee.default:Ee,Pr=dt(function(A){A.exports=function(i,C,S,j){return j[0]*i-(S*=C)*(j[1]+(C*=C)*(j[2]+C*(j[3]+C*j[4])))}}),jr=Pr&&"object"==typeof Pr&&"default"in Pr?Pr.default:Pr,Ir=dt(function(A){var i=jr;A.exports=function(j,U,W){for(var I=1/(1-U),g=j,_=20;_;--_){var R=Math.sin(g),M=1-U*R*R;if(g-=M=(i(g,R,Math.cos(g),W)-j)*(M*Math.sqrt(M))*I,Math.abs(M)<1e-10)return g}return g}}),Tr=Ir&&"object"==typeof Ir&&"default"in Ir?Ir.default:Ir,nr=dt(function(A){var S=.046875,j=.01953125,U=.01068115234375;A.exports=function(N){var J=[];J[0]=1-N*(.25+N*(S+N*(j+N*U))),J[1]=N*(.75-N*(S+N*(j+N*U)));var Q=N*N;return J[2]=Q*(.46875-N*(.013020833333333334+.007120768229166667*N)),J[3]=(Q*=N)*(.3645833333333333-.005696614583333333*N),J[4]=Q*N*.3076171875,J}}),kr=nr&&"object"==typeof nr&&"default"in nr?nr.default:nr,tt=dt(function(A,i){var C=ye,S=Ie,j=kr,W=jr,I=Tr,g=Math.PI/2,R=Ot;i.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=j(this.es)},i.forward=function(M){var q,N,J=M.x,Q=M.y;if(J=C(J-this.long0),this.sphere){if(this.m)for(var nt=this.n*Math.sin(Q),et=20;et;--et){var V=(this.m*Q+Math.sin(Q)-nt)/(this.m+Math.cos(Q));if(Q-=V,Math.abs(V)<1e-10)break}else Q=1!==this.n?Math.asin(this.n*Math.sin(Q)):Q;q=this.a*this.C_x*J*(this.m+Math.cos(Q)),N=this.a*this.C_y*Q}else{var Z=Math.sin(Q),st=Math.cos(Q);N=this.a*W(Q,Z,st,this.en),q=this.a*J*st/Math.sqrt(1-this.es*Z*Z)}return M.x=q,M.y=N,M},i.inverse=function(M){var q,N,J,Q;return M.x-=this.x0,J=M.x/this.a,M.y-=this.y0,q=M.y/this.a,this.sphere?(q/=this.C_y,J/=this.C_x*(this.m+Math.cos(q)),this.m?q=R((this.m*q+Math.sin(q))/this.n):1!==this.n&&(q=R(Math.sin(q)/this.n)),J=C(J+this.long0),q=S(q)):(q=I(M.y/this.a,this.es,this.en),Q=Math.abs(q),g>Q?(Q=Math.sin(q),N=this.long0+M.x*Math.sqrt(1-this.es*Q*Q)/(this.a*Math.cos(q)),J=C(N)):g>Q-1e-10&&(J=this.long0)),M.x=J,M.y=q,M},i.names=["Sinusoidal","sinu"]}),D=tt&&"object"==typeof tt&&"default"in tt?tt.default:tt,e=dt(function(A,i){var C=ye;i.init=function(){},i.forward=function(S){var U=S.y,W=C(S.x-this.long0),I=this.x0+this.a*W,g=this.y0+this.a*Math.log(Math.tan(Math.PI/4+U/2.5))*1.25;return S.x=I,S.y=g,S},i.inverse=function(S){S.x-=this.x0,S.y-=this.y0;var j=C(this.long0+S.x/this.a),U=2.5*(Math.atan(Math.exp(.8*S.y/this.a))-Math.PI/4);return S.x=j,S.y=U,S},i.names=["Miller_Cylindrical","mill"]}),n=e&&"object"==typeof e&&"default"in e?e.default:e,y=dt(function(A,i){var C=484813681109536e-20;i.iterations=1,i.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},i.forward=function(S){var j,_=(S.y-this.lat0)/C*1e-5,R=S.x-this.long0,M=1,q=0;for(j=1;10>=j;j++)q+=this.A[j]*(M*=_);var J,Q=q,nt=R,et=1,V=0,Z=0,st=0;for(j=1;6>=j;j++)J=V*Q+et*nt,Z=Z+this.B_re[j]*(et=et*Q-V*nt)-this.B_im[j]*(V=J),st=st+this.B_im[j]*et+this.B_re[j]*V;return S.x=st*this.a+this.x0,S.y=Z*this.a+this.y0,S},i.inverse=function(S){var j,W,M=(S.y-this.y0)/this.a,q=(S.x-this.x0)/this.a,N=1,J=0,Q=0,nt=0;for(j=1;6>=j;j++)W=J*M+N*q,Q=Q+this.C_re[j]*(N=N*M-J*q)-this.C_im[j]*(J=W),nt=nt+this.C_im[j]*N+this.C_re[j]*J;for(var et=0;et<this.iterations;et++){var Z,st=Q,bt=nt,Tt=M,ht=q;for(j=2;6>=j;j++)Z=bt*Q+st*nt,Tt+=(j-1)*(this.B_re[j]*(st=st*Q-bt*nt)-this.B_im[j]*(bt=Z)),ht+=(j-1)*(this.B_im[j]*st+this.B_re[j]*bt);st=1,bt=0;var ft=this.B_re[1],jt=this.B_im[1];for(j=2;6>=j;j++)Z=bt*Q+st*nt,ft+=j*(this.B_re[j]*(st=st*Q-bt*nt)-this.B_im[j]*(bt=Z)),jt+=j*(this.B_im[j]*st+this.B_re[j]*bt);var qt=ft*ft+jt*jt;Q=(Tt*ft+ht*jt)/qt,nt=(ht*ft-Tt*jt)/qt}var Wt=Q,zt=nt,At=1,Ft=0;for(j=1;9>=j;j++)Ft+=this.D[j]*(At*=Wt);var Xt=this.lat0+Ft*C*1e5;return S.x=this.long0+zt,S.y=Xt,S},i.names=["New_Zealand_Map_Grid","nzmg"]}),H=y&&"object"==typeof y&&"default"in y?y.default:y,F=dt(function(A,i){var C=Zt,S=fe,j=ue,U=te,W=ye,I=Ie,g=Oe,_=1e-10,R=Nt;i.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=C(this.es),this.e1=S(this.es),this.e2=j(this.es),this.e3=U(this.es),this.ml0=this.a*g(this.e0,this.e1,this.e2,this.e3,this.lat0)},i.forward=function(q){var N,J,Q,et=q.y,V=W(q.x-this.long0);if(Q=V*Math.sin(et),this.sphere)Math.abs(et)<=_?(N=this.a*V,J=-1*this.a*this.lat0):(N=this.a*Math.sin(Q)/Math.tan(et),J=this.a*(I(et-this.lat0)+(1-Math.cos(Q))/Math.tan(et)));else if(Math.abs(et)<=_)N=this.a*V,J=-1*this.ml0;else{var Z=R(this.a,this.e,Math.sin(et))/Math.tan(et);N=Z*Math.sin(Q),J=this.a*g(this.e0,this.e1,this.e2,this.e3,et)-this.ml0+Z*(1-Math.cos(Q))}return q.x=N+this.x0,q.y=J+this.y0,q},i.inverse=function(q){var N,J,Q,nt,et,V,Z,st,bt;if(Q=q.x-this.x0,nt=q.y-this.y0,this.sphere)if(Math.abs(nt+this.a*this.lat0)<=_)N=W(Q/this.a+this.long0),J=0;else{var Tt;for(Z=Q*Q/this.a/this.a+(V=this.lat0+nt/this.a)*V,st=V,et=20;et;--et)if(st+=bt=-1*(V*(st*(Tt=Math.tan(st))+1)-st-.5*(st*st+Z)*Tt)/((st-V)/Tt-1),Math.abs(bt)<=_){J=st;break}N=W(this.long0+Math.asin(Q*Math.tan(st)/this.a)/Math.sin(J))}else if(Math.abs(nt+this.ml0)<=_)J=0,N=W(this.long0+Q/this.a);else{var ht,ft,jt,qt,Wt;for(Z=Q*Q/this.a/this.a+(V=(this.ml0+nt)/this.a)*V,st=V,et=20;et;--et)if(Wt=this.e*Math.sin(st),ht=Math.sqrt(1-Wt*Wt)*Math.tan(st),ft=this.a*g(this.e0,this.e1,this.e2,this.e3,st),jt=this.e0-2*this.e1*Math.cos(2*st)+4*this.e2*Math.cos(4*st)-6*this.e3*Math.cos(6*st),st-=bt=(V*(ht*(qt=ft/this.a)+1)-qt-.5*ht*(qt*qt+Z))/(this.es*Math.sin(2*st)*(qt*qt+Z-2*V*qt)/(4*ht)+(V-qt)*(ht*jt-2/Math.sin(2*st))-jt),Math.abs(bt)<=_){J=st;break}ht=Math.sqrt(1-this.es*Math.pow(Math.sin(J),2))*Math.tan(J),N=W(this.long0+Math.asin(Q*ht/this.a)/Math.sin(J))}return q.x=N,q.y=J,q},i.names=["Polyconic","poly"]}),Y=F&&"object"==typeof F&&"default"in F?F.default:F,at=dt(function(A,i){var C=ye,S=Ie;i.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},i.forward=function(j){var W=j.y,I=C(j.x-this.long0),g=S(W-this.lat0);return j.x=this.x0+this.a*I*this.rc,j.y=this.y0+this.a*g,j},i.inverse=function(j){var W=j.y;return j.x=C(this.long0+(j.x-this.x0)/(this.a*this.rc)),j.y=S(this.lat0+(W-this.y0)/this.a),j},i.names=["Equirectangular","Equidistant_Cylindrical","eqc"]}),lt=at&&"object"==typeof at&&"default"in at?at.default:at,X=dt(function(A){var i=Math.PI/2;A.exports=function(C,S){var j=1-(1-C*C)/(2*C)*Math.log((1-C)/(1+C));if(Math.abs(Math.abs(S)-j)<1e-6)return 0>S?-1*i:i;for(var U,W,I,g,_=Math.asin(.5*S),R=0;30>R;R++)if(W=Math.sin(_),I=Math.cos(_),g=C*W,_+=U=Math.pow(1-g*g,2)/(2*I)*(S/(1-C*C)-W/(1-g*g)+.5/C*Math.log((1-g)/(1+g))),Math.abs(U)<=1e-10)return _;return NaN}}),ct=X&&"object"==typeof X&&"default"in X?X.default:X,it=dt(function(A){A.exports=function(i,C){var S;return i>1e-7?(1-i*i)*(C/(1-(S=i*C)*S)-.5/i*Math.log((1-S)/(1+S))):2*C}}),gt=it&&"object"==typeof it&&"default"in it?it.default:it,xt=dt(function(A,i){var C=ye,S=gt,j=pe,U=ct;i.init=function(){this.sphere||(this.k0=j(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},i.forward=function(W){var I,g,R=W.y,M=C(W.x-this.long0);if(this.sphere)I=this.x0+this.a*M*Math.cos(this.lat_ts),g=this.y0+this.a*Math.sin(R)/Math.cos(this.lat_ts);else{var q=S(this.e,Math.sin(R));I=this.x0+this.a*this.k0*M,g=this.y0+this.a*q*.5/this.k0}return W.x=I,W.y=g,W},i.inverse=function(W){var I,g;return W.x-=this.x0,W.y-=this.y0,this.sphere?(I=C(this.long0+W.x/this.a/Math.cos(this.lat_ts)),g=Math.asin(W.y/this.a*Math.cos(this.lat_ts))):(g=U(this.e,2*W.y*this.k0/this.a),I=C(this.long0+W.x/(this.a*this.k0))),W.x=I,W.y=g,W},i.names=["cea"]}),Pt=xt&&"object"==typeof xt&&"default"in xt?xt.default:xt,St=dt(function(A,i){var C=ye,j=Ot;i.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},i.forward=function(U){var W,I,g,_,M,q,N,Q=U.y;return g=C(U.x-this.long0),W=Math.sin(Q),I=Math.cos(Q),_=Math.cos(g),(M=this.sin_p14*W+this.cos_p14*I*_)>0||Math.abs(M)<=1e-10?(q=this.x0+1*this.a*I*Math.sin(g)/M,N=this.y0+1*this.a*(this.cos_p14*W-this.sin_p14*I*_)/M):(q=this.x0+this.infinity_dist*I*Math.sin(g),N=this.y0+this.infinity_dist*(this.cos_p14*W-this.sin_p14*I*_)),U.x=q,U.y=N,U},i.inverse=function(U){var W,I,g,_,R,M;return U.x=(U.x-this.x0)/this.a,U.y=(U.y-this.y0)/this.a,U.x/=this.k0,U.y/=this.k0,(W=Math.sqrt(U.x*U.x+U.y*U.y))?(_=Math.atan2(W,this.rc),I=Math.sin(_),g=Math.cos(_),M=j(g*this.sin_p14+U.y*I*this.cos_p14/W),R=Math.atan2(U.x*I,W*this.cos_p14*g-U.y*this.sin_p14*I),R=C(this.long0+R)):(M=this.phic0,R=0),U.x=R,U.y=M,U},i.names=["gnom"]}),Dt=St&&"object"==typeof St&&"default"in St?St.default:St,Lt=dt(function(A,i){var C=1e-10,S=pe,j=gt,U=ye,W=Ot;i.init=function(){Math.abs(this.lat1+this.lat2)<C||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=S(this.e3,this.sin_po,this.cos_po),this.qs1=j(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=S(this.e3,this.sin_po,this.cos_po),this.qs2=j(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=j(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>C?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},i.forward=function(I){var g=I.x,_=I.y;this.sin_phi=Math.sin(_),this.cos_phi=Math.cos(_);var R=j(this.e3,this.sin_phi,this.cos_phi),M=this.a*Math.sqrt(this.c-this.ns0*R)/this.ns0,q=this.ns0*U(g-this.long0),N=M*Math.sin(q)+this.x0,J=this.rh-M*Math.cos(q)+this.y0;return I.x=N,I.y=J,I},i.inverse=function(I){var g,R,M,q,N;return I.x-=this.x0,I.y=this.rh-I.y+this.y0,this.ns0>=0?(g=Math.sqrt(I.x*I.x+I.y*I.y),R=1):(g=-Math.sqrt(I.x*I.x+I.y*I.y),R=-1),M=0,0!==g&&(M=Math.atan2(R*I.x,R*I.y)),R=g*this.ns0/this.a,N=this.sphere?Math.asin((this.c-R*R)/(2*this.ns0)):this.phi1z(this.e3,(this.c-R*R)/this.ns0),q=U(M/this.ns0+this.long0),I.x=q,I.y=N,I},i.phi1z=function(I,g){var _,M,q,N,J=W(.5*g);if(C>I)return J;for(var Q=I*I,nt=1;25>=nt;nt++)if(J+=N=.5*(q=1-(M=I*(_=Math.sin(J)))*M)*q/Math.cos(J)*(g/(1-Q)-_/q+.5/I*Math.log((1-M)/(1+M))),Math.abs(N)<=1e-7)return J;return null},i.names=["Albers_Conic_Equal_Area","Albers","aea"]}),ie=Lt&&"object"==typeof Lt&&"default"in Lt?Lt.default:Lt,ee=dt(function(A,i){var C=Math.PI/2,S=Math.PI/4,j=1e-10,U=gt,W=ye;i.S_POLE=1,i.N_POLE=2,i.EQUIT=3,i.OBLIQ=4,i.init=function(){var g,I=Math.abs(this.lat0);if(this.mode=Math.abs(I-C)<j?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(I)<j?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=U(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),g=Math.sin(this.lat0),this.sinb1=U(this.e,g)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*g*g)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},i.forward=function(I){var g,_,R,M,q,N,J,Q,nt,et,V=I.x,Z=I.y;if(V=W(V-this.long0),this.sphere){if(q=Math.sin(Z),et=Math.cos(Z),R=Math.cos(V),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(j>=(_=this.mode===this.EQUIT?1+et*R:1+this.sinph0*q+this.cosph0*et*R))return null;g=(_=Math.sqrt(2/_))*et*Math.sin(V),_*=this.mode===this.EQUIT?q:this.cosph0*q-this.sinph0*et*R}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(R=-R),Math.abs(Z+this.phi0)<j)return null;_=S-.5*Z,g=(_=2*(this.mode===this.S_POLE?Math.cos(_):Math.sin(_)))*Math.sin(V),_*=R}}else{switch(J=0,Q=0,nt=0,R=Math.cos(V),M=Math.sin(V),q=Math.sin(Z),N=U(this.e,q),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(J=N/this.qp,Q=Math.sqrt(1-J*J)),this.mode){case this.OBLIQ:nt=1+this.sinb1*J+this.cosb1*Q*R;break;case this.EQUIT:nt=1+Q*R;break;case this.N_POLE:nt=C+Z,N=this.qp-N;break;case this.S_POLE:nt=Z-C,N=this.qp+N}if(Math.abs(nt)<j)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:nt=Math.sqrt(2/nt),_=this.mode===this.OBLIQ?this.ymf*nt*(this.cosb1*J-this.sinb1*Q*R):(nt=Math.sqrt(2/(1+Q*R)))*J*this.ymf,g=this.xmf*nt*Q*M;break;case this.N_POLE:case this.S_POLE:N>=0?(g=(nt=Math.sqrt(N))*M,_=R*(this.mode===this.S_POLE?nt:-nt)):g=_=0}}return I.x=this.a*g+this.x0,I.y=this.a*_+this.y0,I},i.inverse=function(I){I.x-=this.x0,I.y-=this.y0;var g,_,R,M,q,N,J,Q=I.x/this.a,nt=I.y/this.a;if(this.sphere){var et,V=0,Z=0;if((_=.5*(et=Math.sqrt(Q*Q+nt*nt)))>1)return null;switch(_=2*Math.asin(_),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(Z=Math.sin(_),V=Math.cos(_)),this.mode){case this.EQUIT:_=Math.abs(et)<=j?0:Math.asin(nt*Z/et),Q*=Z,nt=V*et;break;case this.OBLIQ:_=Math.abs(et)<=j?this.phi0:Math.asin(V*this.sinph0+nt*Z*this.cosph0/et),Q*=Z*this.cosph0,nt=(V-Math.sin(_)*this.sinph0)*et;break;case this.N_POLE:nt=-nt,_=C-_;break;case this.S_POLE:_-=C}g=0!==nt||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(Q,nt):0}else{if(J=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(Q/=this.dd,nt*=this.dd,N=Math.sqrt(Q*Q+nt*nt),j>N)return I.x=0,I.y=this.phi0,I;M=2*Math.asin(.5*N/this.rq),R=Math.cos(M),Q*=M=Math.sin(M),this.mode===this.OBLIQ?(q=this.qp*(J=R*this.sinb1+nt*M*this.cosb1/N),nt=N*this.cosb1*R-nt*this.sinb1*M):(q=this.qp*(J=nt*M/N),nt=N*R)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(nt=-nt),!(q=Q*Q+nt*nt))return I.x=0,I.y=this.phi0,I;J=1-q/this.qp,this.mode===this.S_POLE&&(J=-J)}g=Math.atan2(Q,nt),_=this.authlat(Math.asin(J),this.apa)}return I.x=W(this.long0+g),I.y=_,I},i.P00=.3333333333333333,i.P01=.17222222222222222,i.P02=.10257936507936508,i.P10=.06388888888888888,i.P11=.0664021164021164,i.P20=.016415012942191543,i.authset=function(I){var g,_=[];return _[0]=I*this.P00,_[0]+=(g=I*I)*this.P01,_[1]=g*this.P10,_[0]+=(g*=I)*this.P02,_[1]+=g*this.P11,_[2]=g*this.P20,_},i.authlat=function(I,g){var _=I+I;return I+g[0]*Math.sin(_)+g[1]*Math.sin(_+_)+g[2]*Math.sin(_+_+_)},i.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]}),ne=ee&&"object"==typeof ee&&"default"in ee?ee.default:ee,Qt=dt(function(A,i){var C=Oe,S=Zt,j=fe,U=ue,W=te,I=Nt,g=ye,_=Ie,R=Mt,M=Math.PI/2;i.init=function(){this.sphere||(this.e0=S(this.es),this.e1=j(this.es),this.e2=U(this.es),this.e3=W(this.es),this.ml0=this.a*C(this.e0,this.e1,this.e2,this.e3,this.lat0))},i.forward=function(N){var J,Q,nt=N.x,et=N.y;if(nt=g(nt-this.long0),this.sphere)J=this.a*Math.asin(Math.cos(et)*Math.sin(nt)),Q=this.a*(Math.atan2(Math.tan(et),Math.cos(nt))-this.lat0);else{var V=Math.sin(et),Z=Math.cos(et),st=I(this.a,this.e,V),bt=Math.tan(et)*Math.tan(et),Tt=nt*Math.cos(et),ht=Tt*Tt,ft=this.es*Z*Z/(1-this.es);J=st*Tt*(1-ht*bt*(1/6-(8-bt+8*ft)*ht/120)),Q=this.a*C(this.e0,this.e1,this.e2,this.e3,et)-this.ml0+st*V/Z*ht*(.5+(5-bt+6*ft)*ht/24)}return N.x=J+this.x0,N.y=Q+this.y0,N},i.inverse=function(N){N.x-=this.x0,N.y-=this.y0;var J,Q,nt=N.x/this.a,et=N.y/this.a;if(this.sphere){var V=et+this.lat0;J=Math.asin(Math.sin(V)*Math.cos(nt)),Q=Math.atan2(Math.tan(nt),Math.cos(V))}else{var st=R(this.ml0/this.a+et,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(st)-M)<=1e-10)return N.x=this.long0,N.y=M,0>et&&(N.y*=-1),N;var bt=I(this.a,this.e,Math.sin(st)),Tt=bt*bt*bt/this.a/this.a*(1-this.es),ht=Math.pow(Math.tan(st),2),ft=nt*this.a/bt,jt=ft*ft;J=st-bt*Math.tan(st)/Tt*ft*ft*(.5-(1+3*ht)*ft*ft/24),Q=ft*(1-jt*(ht/3+(1+3*ht)*ht*jt/15))/Math.cos(st)}return N.x=g(Q+this.long0),N.y=_(J),N},i.names=["Cassini","Cassini_Soldner","cass"]}),Se=Qt&&"object"==typeof Qt&&"default"in Qt?Qt.default:Qt,qe=dt(function(A,i){var C=ye;i.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},i.forward=function(S){var j,U,W,I,g,_,R,q=S.y,N=C(S.x-this.long0);return j=Math.pow((1+this.e*Math.sin(q))/(1-this.e*Math.sin(q)),this.alfa*this.e/2),U=2*(Math.atan(this.k*Math.pow(Math.tan(q/2+this.s45),this.alfa)/j)-this.s45),W=-N*this.alfa,I=Math.asin(Math.cos(this.ad)*Math.sin(U)+Math.sin(this.ad)*Math.cos(U)*Math.cos(W)),g=Math.asin(Math.cos(U)*Math.sin(W)/Math.cos(I)),_=this.n*g,R=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(I/2+this.s45),this.n),S.y=R*Math.cos(_)/1,S.x=R*Math.sin(_)/1,this.czech||(S.y*=-1,S.x*=-1),S},i.inverse=function(S){var j,U,W,I,_,R,M,q=S.x;S.x=S.y,S.y=q,this.czech||(S.y*=-1,S.x*=-1),_=Math.sqrt(S.x*S.x+S.y*S.y),I=Math.atan2(S.y,S.x)/Math.sin(this.s0),W=2*(Math.atan(Math.pow(this.ro0/_,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),j=Math.asin(Math.cos(this.ad)*Math.sin(W)-Math.sin(this.ad)*Math.cos(W)*Math.cos(I)),U=Math.asin(Math.cos(W)*Math.sin(I)/Math.cos(j)),S.x=this.long0-U/this.alfa,R=j,M=0;var N=0;do{S.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(j/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(R))/(1-this.e*Math.sin(R)),this.e/2))-this.s45),Math.abs(R-S.y)<1e-10&&(M=1),R=S.y,N+=1}while(0===M&&15>N);return N>=15?null:S},i.names=["Krovak","krovak"]}),Te=qe&&"object"==typeof qe&&"default"in qe?qe.default:qe,Yt=dt(function(A){var i=Math.PI/2;A.exports=function(C,S){for(var j,U,W=.5*C,I=i-2*Math.atan(S),g=0;15>=g;g++)if(j=C*Math.sin(I),I+=U=i-2*Math.atan(S*Math.pow((1-j)/(1+j),W))-I,Math.abs(U)<=1e-10)return I;return-9999}}),Be=Yt&&"object"==typeof Yt&&"default"in Yt?Yt.default:Yt,dr=dt(function(A){var i=Math.PI/2;A.exports=function(C,S,j){var U=C*j;return U=Math.pow((1-U)/(1+U),.5*C),Math.tan(.5*(i-S))/U}}),ar=dr&&"object"==typeof dr&&"default"in dr?dr.default:dr,Ke=dt(function(A,i){var C=1e-10,S=pe,j=ar,U=Math.PI/2,W=Ue,I=ye,g=Be;i.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<C)){var _=this.b/this.a;this.e=Math.sqrt(1-_*_);var R=Math.sin(this.lat1),M=Math.cos(this.lat1),q=S(this.e,R,M),N=j(this.e,this.lat1,R),J=Math.sin(this.lat2),Q=Math.cos(this.lat2),nt=S(this.e,J,Q),et=j(this.e,this.lat2,J),V=j(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>C?Math.log(q/nt)/Math.log(N/et):R,isNaN(this.ns)&&(this.ns=R),this.f0=q/(this.ns*Math.pow(N,this.ns)),this.rh=this.a*this.f0*Math.pow(V,this.ns),this.title||(this.title="Lambert Conformal Conic")}},i.forward=function(_){var R=_.x,M=_.y;Math.abs(2*Math.abs(M)-Math.PI)<=C&&(M=W(M)*(U-2*C));var q,N,J=Math.abs(Math.abs(M)-U);if(J>C)q=j(this.e,M,Math.sin(M)),N=this.a*this.f0*Math.pow(q,this.ns);else{if(0>=(J=M*this.ns))return null;N=0}var Q=this.ns*I(R-this.long0);return _.x=this.k0*(N*Math.sin(Q))+this.x0,_.y=this.k0*(this.rh-N*Math.cos(Q))+this.y0,_},i.inverse=function(_){var R,M,q,N,J,Q=(_.x-this.x0)/this.k0,nt=this.rh-(_.y-this.y0)/this.k0;this.ns>0?(R=Math.sqrt(Q*Q+nt*nt),M=1):(R=-Math.sqrt(Q*Q+nt*nt),M=-1);var et=0;if(0!==R&&(et=Math.atan2(M*Q,M*nt)),0!==R||this.ns>0){if(M=1/this.ns,q=Math.pow(R/(this.a*this.f0),M),-9999===(N=g(this.e,q)))return null}else N=-U;return J=I(et/this.ns+this.long0),_.x=J,_.y=N,_},i.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]}),Lr=Ke&&"object"==typeof Ke&&"default"in Ke?Ke.default:Ke,tr=dt(function(A,i){var C=ar,S=ye,j=Be,U=Math.PI/2,W=Math.PI/4,I=1e-10;i.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var g=Math.sin(this.lat0),_=Math.cos(this.lat0),R=this.e*g;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(_,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-R*R);var N,J,M=C(this.e,this.lat0,g),q=this.bl/_*Math.sqrt((1-this.es)/(1-R*R));if(1>q*q&&(q=1),isNaN(this.longc)){var Q=C(this.e,this.lat1,Math.sin(this.lat1)),nt=C(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(q+Math.sqrt(q*q-1))*Math.pow(M,this.bl):(q-Math.sqrt(q*q-1))*Math.pow(M,this.bl);var et=Math.pow(Q,this.bl),V=Math.pow(nt,this.bl);J=.5*((N=this.el/et)-1/N);var Z=(this.el*this.el-V*et)/(this.el*this.el+V*et),st=(V-et)/(V+et),bt=S(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(Z*Math.tan(.5*this.bl*bt)/st)/this.bl,this.long0=S(this.long0);var Tt=S(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*Tt)/J),this.alpha=Math.asin(q*Math.sin(this.gamma0))}else N=this.lat0>=0?q+Math.sqrt(q*q-1):q-Math.sqrt(q*q-1),this.el=N*Math.pow(M,this.bl),J=.5*(N-1/N),this.gamma0=Math.asin(Math.sin(this.alpha)/q),this.long0=this.longc-Math.asin(J*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(q*q-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(q*q-1),Math.cos(this.alpha))},i.forward=function(g){var _,R,M,N=g.y,J=S(g.x-this.long0);if(Math.abs(Math.abs(N)-U)<=I)M=N>0?-1:1,R=this.al/this.bl*Math.log(Math.tan(W+M*this.gamma0*.5)),_=-1*M*U*this.al/this.bl;else{var Q=C(this.e,N,Math.sin(N)),nt=this.el/Math.pow(Q,this.bl),et=.5*(nt-1/nt),V=.5*(nt+1/nt),Z=Math.sin(this.bl*J),st=(et*Math.sin(this.gamma0)-Z*Math.cos(this.gamma0))/V;R=Math.abs(Math.abs(st)-1)<=I?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-st)/(1+st))/this.bl,_=Math.abs(Math.cos(this.bl*J))<=I?this.al*this.bl*J:this.al*Math.atan2(et*Math.cos(this.gamma0)+Z*Math.sin(this.gamma0),Math.cos(this.bl*J))/this.bl}return this.no_rot?(g.x=this.x0+_,g.y=this.y0+R):(_-=this.uc,g.x=this.x0+R*Math.cos(this.alpha)+_*Math.sin(this.alpha),g.y=this.y0+_*Math.cos(this.alpha)-R*Math.sin(this.alpha)),g},i.inverse=function(g){var _,R;this.no_rot?(R=g.y-this.y0,_=g.x-this.x0):(R=(g.x-this.x0)*Math.cos(this.alpha)-(g.y-this.y0)*Math.sin(this.alpha),_=(g.y-this.y0)*Math.cos(this.alpha)+(g.x-this.x0)*Math.sin(this.alpha),_+=this.uc);var M=Math.exp(-1*this.bl*R/this.al),q=.5*(M-1/M),N=.5*(M+1/M),J=Math.sin(this.bl*_/this.al),Q=(J*Math.cos(this.gamma0)+q*Math.sin(this.gamma0))/N,nt=Math.pow(this.el/Math.sqrt((1+Q)/(1-Q)),1/this.bl);return Math.abs(Q-1)<I?(g.x=this.long0,g.y=U):Math.abs(Q+1)<I?(g.x=this.long0,g.y=-1*U):(g.y=j(this.e,nt),g.x=S(this.long0-Math.atan2(q*Math.cos(this.gamma0)-J*Math.sin(this.gamma0),Math.cos(this.bl*_/this.al))/this.bl)),g},i.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]}),si=tr&&"object"==typeof tr&&"default"in tr?tr.default:tr,oi=dt(function(A,i){i.init=function(){var C=this.lat0;this.lambda0=this.long0;var S=Math.sin(C),j=this.a,W=1/this.rf,I=2*W-Math.pow(W,2),g=this.e=Math.sqrt(I);this.R=this.k0*j*Math.sqrt(1-I)/(1-I*Math.pow(S,2)),this.alpha=Math.sqrt(1+I/(1-I)*Math.pow(Math.cos(C),4)),this.b0=Math.asin(S/this.alpha);var _=Math.log(Math.tan(Math.PI/4+this.b0/2)),R=Math.log(Math.tan(Math.PI/4+C/2)),M=Math.log((1+g*S)/(1-g*S));this.K=_-this.alpha*R+this.alpha*g/2*M},i.forward=function(C){var S=Math.log(Math.tan(Math.PI/4-C.y/2)),j=this.e/2*Math.log((1+this.e*Math.sin(C.y))/(1-this.e*Math.sin(C.y))),W=2*(Math.atan(Math.exp(-this.alpha*(S+j)+this.K))-Math.PI/4),I=this.alpha*(C.x-this.lambda0),g=Math.atan(Math.sin(I)/(Math.sin(this.b0)*Math.tan(W)+Math.cos(this.b0)*Math.cos(I))),_=Math.asin(Math.cos(this.b0)*Math.sin(W)-Math.sin(this.b0)*Math.cos(W)*Math.cos(I));return C.y=this.R/2*Math.log((1+Math.sin(_))/(1-Math.sin(_)))+this.y0,C.x=this.R*g+this.x0,C},i.inverse=function(C){for(var U=(C.x-this.x0)/this.R,W=2*(Math.atan(Math.exp((C.y-this.y0)/this.R))-Math.PI/4),I=Math.asin(Math.cos(this.b0)*Math.sin(W)+Math.sin(this.b0)*Math.cos(W)*Math.cos(U)),g=Math.atan(Math.sin(U)/(Math.cos(this.b0)*Math.cos(U)-Math.sin(this.b0)*Math.tan(W))),_=this.lambda0+g/this.alpha,R=0,M=I,q=-1e3,N=0;Math.abs(M-q)>1e-7;){if(++N>20)return;R=1/this.alpha*(Math.log(Math.tan(Math.PI/4+I/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(M))/2)),q=M,M=2*Math.atan(Math.exp(R))-Math.PI/2}return C.x=_,C.y=M,C},i.names=["somerc"]}),ji=oi&&"object"==typeof oi&&"default"in oi?oi.default:oi,ki=dt(function(A,i){var C=Math.PI/2,S=1e-10,j=Ue,U=pe,W=ar,I=Be,g=ye;i.ssfn_=function(_,R,M){return R*=M,Math.tan(.5*(C+_))*Math.pow((1-R)/(1+R),.5*M)},i.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=S&&(this.k0=.5*(1+j(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=S&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=S&&(this.k0=.5*this.cons*U(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/W(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=U(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-C,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},i.forward=function(_){var R,M,q,N,J,Q,nt=_.x,et=_.y,V=Math.sin(et),Z=Math.cos(et),st=g(nt-this.long0);return Math.abs(Math.abs(nt-this.long0)-Math.PI)<=S&&Math.abs(et+this.lat0)<=S?(_.x=NaN,_.y=NaN,_):this.sphere?(R=2*this.k0/(1+this.sinlat0*V+this.coslat0*Z*Math.cos(st)),_.x=this.a*R*Z*Math.sin(st)+this.x0,_.y=this.a*R*(this.coslat0*V-this.sinlat0*Z*Math.cos(st))+this.y0,_):(M=2*Math.atan(this.ssfn_(et,V,this.e))-C,N=Math.cos(M),q=Math.sin(M),Math.abs(this.coslat0)<=S?(J=W(this.e,et*this.con,this.con*V),_.x=this.x0+(Q=2*this.a*this.k0*J/this.cons)*Math.sin(nt-this.long0),_.y=this.y0-this.con*Q*Math.cos(nt-this.long0),_):(Math.abs(this.sinlat0)<S?(R=2*this.a*this.k0/(1+N*Math.cos(st)),_.y=R*q):(R=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*q+this.cosX0*N*Math.cos(st))),_.y=R*(this.cosX0*q-this.sinX0*N*Math.cos(st))+this.y0),_.x=R*N*Math.sin(st)+this.x0,_))},i.inverse=function(_){_.x-=this.x0,_.y-=this.y0;var R,M,N,J,Q=Math.sqrt(_.x*_.x+_.y*_.y);if(this.sphere){var nt=2*Math.atan(Q/(.5*this.a*this.k0));return R=this.long0,M=this.lat0,S>=Q?(_.x=R,_.y=M,_):(M=Math.asin(Math.cos(nt)*this.sinlat0+_.y*Math.sin(nt)*this.coslat0/Q),R=g(Math.abs(this.coslat0)<S?this.lat0>0?this.long0+Math.atan2(_.x,-1*_.y):this.long0+Math.atan2(_.x,_.y):this.long0+Math.atan2(_.x*Math.sin(nt),Q*this.coslat0*Math.cos(nt)-_.y*this.sinlat0*Math.sin(nt))),_.x=R,_.y=M,_)}if(Math.abs(this.coslat0)<=S){if(S>=Q)return M=this.lat0,_.x=R=this.long0,_.y=M,_;_.x*=this.con,_.y*=this.con,M=this.con*I(this.e,Q*this.cons/(2*this.a*this.k0)),R=this.con*g(this.con*this.long0+Math.atan2(_.x,-1*_.y))}else N=2*Math.atan(Q*this.cosX0/(2*this.a*this.k0*this.ms1)),R=this.long0,S>=Q?J=this.X0:(J=Math.asin(Math.cos(N)*this.sinX0+_.y*Math.sin(N)*this.cosX0/Q),R=g(this.long0+Math.atan2(_.x*Math.sin(N),Q*this.cosX0*Math.cos(N)-_.y*this.sinX0*Math.sin(N)))),M=-1*I(this.e,Math.tan(.5*(C+J)));return _.x=R,_.y=M,_},i.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]}),Si=ki&&"object"==typeof ki&&"default"in ki?ki.default:ki,Oi=dt(function(A){A.exports=function(i,C){return Math.pow((1-i)/(1+i),C)}}),Ci=Oi&&"object"==typeof Oi&&"default"in Oi?Oi.default:Oi,Ei=dt(function(A,i){var C=Math.PI/4,S=Ci,j=Math.PI/2;i.init=function(){var W=Math.sin(this.lat0),I=Math.cos(this.lat0);I*=I,this.rc=Math.sqrt(1-this.es)/(1-this.es*W*W),this.C=Math.sqrt(1+this.es*I*I/(1-this.es)),this.phic0=Math.asin(W/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+C)/(Math.pow(Math.tan(.5*this.lat0+C),this.C)*S(this.e*W,this.ratexp))},i.forward=function(W){var I=W.x,g=W.y;return W.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*g+C),this.C)*S(this.e*Math.sin(g),this.ratexp))-j,W.x=this.C*I,W},i.inverse=function(W){for(var g=W.x/this.C,_=W.y,R=Math.pow(Math.tan(.5*_+C)/this.K,1/this.C),M=20;M>0&&(_=2*Math.atan(R*S(this.e*Math.sin(W.y),-.5*this.e))-j,!(Math.abs(_-W.y)<1e-14));--M)W.y=_;return M?(W.x=g,W.y=_,W):null},i.names=["gauss"]}),Ai=Ei&&"object"==typeof Ei&&"default"in Ei?Ei.default:Ei,Ii=dt(function(A,i){var C=Ai,S=ye;i.init=function(){C.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},i.forward=function(j){var U,W,I,g;return j.x=S(j.x-this.long0),C.forward.apply(this,[j]),U=Math.sin(j.y),W=Math.cos(j.y),I=Math.cos(j.x),j.x=(g=this.k0*this.R2/(1+this.sinc0*U+this.cosc0*W*I))*W*Math.sin(j.x),j.y=g*(this.cosc0*U-this.sinc0*W*I),j.x=this.a*j.x+this.x0,j.y=this.a*j.y+this.y0,j},i.inverse=function(j){var U,W,I,g,_;if(j.x=(j.x-this.x0)/this.a,j.y=(j.y-this.y0)/this.a,j.x/=this.k0,j.y/=this.k0,_=Math.sqrt(j.x*j.x+j.y*j.y)){var R=2*Math.atan2(_,this.R2);U=Math.sin(R),W=Math.cos(R),g=Math.asin(W*this.sinc0+j.y*U*this.cosc0/_),I=Math.atan2(j.x*U,_*this.cosc0*W-j.y*this.sinc0*U)}else g=this.phic0,I=0;return j.x=I,j.y=g,C.inverse.apply(this,[j]),j.x=S(j.x+this.long0),j},i.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]}),Ti=Ii&&"object"==typeof Ii&&"default"in Ii?Ii.default:Ii,Li=dt(function(A,i){var C=Zt,S=fe,j=ue,U=te,W=Oe,I=ye,g=Math.PI/2,R=Ue,M=Ot;i.init=function(){this.e0=C(this.es),this.e1=S(this.es),this.e2=j(this.es),this.e3=U(this.es),this.ml0=this.a*W(this.e0,this.e1,this.e2,this.e3,this.lat0)},i.forward=function(q){var N,J,Q,et=q.y,V=I(q.x-this.long0),Z=Math.sin(et),st=Math.cos(et);if(this.sphere){var bt=st*Math.sin(V);if(Math.abs(Math.abs(bt)-1)<1e-10)return 93;J=.5*this.a*this.k0*Math.log((1+bt)/(1-bt)),N=Math.acos(st*Math.cos(V)/Math.sqrt(1-bt*bt)),0>et&&(N=-N),Q=this.a*this.k0*(N-this.lat0)}else{var Tt=st*V,ht=Math.pow(Tt,2),ft=this.ep2*Math.pow(st,2),jt=Math.tan(et),qt=Math.pow(jt,2);N=1-this.es*Math.pow(Z,2);var Wt=this.a/Math.sqrt(N),zt=this.a*W(this.e0,this.e1,this.e2,this.e3,et);J=this.k0*Wt*Tt*(1+ht/6*(1-qt+ft+ht/20*(5-18*qt+Math.pow(qt,2)+72*ft-58*this.ep2)))+this.x0,Q=this.k0*(zt-this.ml0+Wt*jt*(ht*(.5+ht/24*(5-qt+9*ft+4*Math.pow(ft,2)+ht/30*(61-58*qt+Math.pow(qt,2)+600*ft-330*this.ep2)))))+this.y0}return q.x=J,q.y=Q,q},i.inverse=function(q){var N,J,Q,nt,et,V;if(this.sphere){var st=Math.exp(q.x/(this.a*this.k0)),bt=.5*(st-1/st),Tt=this.lat0+q.y/(this.a*this.k0),ht=Math.cos(Tt);N=Math.sqrt((1-ht*ht)/(1+bt*bt)),et=M(N),0>Tt&&(et=-et),V=0===bt&&0===ht?this.long0:I(Math.atan2(bt,ht)+this.long0)}else{var ft=q.x-this.x0,jt=q.y-this.y0;for(J=N=(this.ml0+jt/this.k0)/this.a,nt=0;J+=Q=(N+this.e1*Math.sin(2*J)-this.e2*Math.sin(4*J)+this.e3*Math.sin(6*J))/this.e0-J,!(Math.abs(Q)<=1e-10);nt++)if(nt>=6)return 95;if(Math.abs(J)<g){var qt=Math.sin(J),Wt=Math.cos(J),zt=Math.tan(J),At=this.ep2*Math.pow(Wt,2),Ft=Math.pow(At,2),Xt=Math.pow(zt,2),Ht=Math.pow(Xt,2);N=1-this.es*Math.pow(qt,2);var Jt=this.a/Math.sqrt(N),oe=Jt*(1-this.es)/N,de=ft/(Jt*this.k0),le=Math.pow(de,2);et=J-Jt*zt*le/oe*(.5-le/24*(5+3*Xt+10*At-4*Ft-9*this.ep2-le/30*(61+90*Xt+298*At+45*Ht-252*this.ep2-3*Ft))),V=I(this.long0+de*(1-le/6*(1+2*Xt+At-le/20*(5-2*At+28*Xt-3*Ft+8*this.ep2+24*Ht)))/Wt)}else et=g*R(jt),V=this.long0}return q.x=V,q.y=et,q},i.names=["Transverse_Mercator","Transverse Mercator","tmerc"]}),hi=Li&&"object"==typeof Li&&"default"in Li?Li.default:Li,Ri=dt(function(A,i){var S=hi;i.dependsOn="tmerc",i.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,S.init.apply(this),this.forward=S.forward,this.inverse=S.inverse)},i.names=["Universal Transverse Mercator System","utm"]}),Ni=Ri&&"object"==typeof Ri&&"default"in Ri?Ri.default:Ri,ui=dt(function(A){var i=[hi,Ni,Ti,Si,ji,si,Lr,Te,Se,ne,ie,Dt,Pt,lt,Y,H,n,D,or,$e,ze,Qe];A.exports=function(C){i.forEach(function(S){C.Proj.projections.add(S)})}}),Di=ui&&"object"==typeof ui&&"default"in ui?ui.default:ui,Gi=dt(function(A,i){function C(ht){return ht*(Math.PI/180)}function S(ht){return ht/Math.PI*180}function U(ht){var ft=ht.northing,jt=ht.easting,qt=ht.zoneLetter,Wt=ht.zoneNumber;if(0>Wt||Wt>60)return null;var zt,At,Ft,Xt,Ht,Jt,de,le,P,t=.9996,v=6378137,u=.00669438,r=(1-Math.sqrt(1-u))/(1+Math.sqrt(1-u)),x=jt-5e5,O=ft;"N">qt&&(O-=1e7),de=6*(Wt-1)-180+3,zt=u/(1-u),P=(le=O/t/6367449.145945056)+(3*r/2-27*r*r*r/32)*Math.sin(2*le)+(21*r*r/16-55*r*r*r*r/32)*Math.sin(4*le)+151*r*r*r/96*Math.sin(6*le),At=v/Math.sqrt(1-u*Math.sin(P)*Math.sin(P)),Ft=Math.tan(P)*Math.tan(P),Xt=zt*Math.cos(P)*Math.cos(P),Ht=v*(1-u)/Math.pow(1-u*Math.sin(P)*Math.sin(P),1.5),Jt=x/(At*t);var b=P-At*Math.tan(P)/Ht*(Jt*Jt/2-(5+3*Ft+10*Xt-4*Xt*Xt-9*zt)*Jt*Jt*Jt*Jt/24+(61+90*Ft+298*Xt+45*Ft*Ft-252*zt-3*Xt*Xt)*Jt*Jt*Jt*Jt*Jt*Jt/720);b=S(b);var s,o=(Jt-(1+2*Ft+Xt)*Jt*Jt*Jt/6+(5-2*Xt+28*Ft-3*Xt*Xt+8*zt+24*Ft*Ft)*Jt*Jt*Jt*Jt*Jt/120)/Math.cos(P);if(o=de+S(o),ht.accuracy){var m=U({northing:ht.northing+ht.accuracy,easting:ht.easting+ht.accuracy,zoneLetter:ht.zoneLetter,zoneNumber:ht.zoneNumber});s={top:m.lat,right:m.lon,bottom:b,left:o}}else s={lat:b,lon:o};return s}function W(ht){var ft="Z";return 84>=ht&&ht>=72?ft="X":72>ht&&ht>=64?ft="W":64>ht&&ht>=56?ft="V":56>ht&&ht>=48?ft="U":48>ht&&ht>=40?ft="T":40>ht&&ht>=32?ft="S":32>ht&&ht>=24?ft="R":24>ht&&ht>=16?ft="Q":16>ht&&ht>=8?ft="P":8>ht&&ht>=0?ft="N":0>ht&&ht>=-8?ft="M":-8>ht&&ht>=-16?ft="L":-16>ht&&ht>=-24?ft="K":-24>ht&&ht>=-32?ft="J":-32>ht&&ht>=-40?ft="H":-40>ht&&ht>=-48?ft="G":-48>ht&&ht>=-56?ft="F":-56>ht&&ht>=-64?ft="E":-64>ht&&ht>=-72?ft="D":-72>ht&&ht>=-80&&(ft="C"),ft}function _(ht){var ft=ht%Q;return 0===ft&&(ft=Q),ft}function M(ht){if(ht&&0===ht.length)throw"MGRSPoint coverting from nothing";for(var ft,jt=ht.length,qt=null,Wt="",zt=0;!/[A-Z]/.test(ft=ht.charAt(zt));){if(zt>=2)throw"MGRSPoint bad conversion from: "+ht;Wt+=ft,zt++}var At=parseInt(Wt,10);if(0===zt||zt+3>jt)throw"MGRSPoint bad conversion from: "+ht;var Ft=ht.charAt(zt++);if("A">=Ft||"B"===Ft||"Y"===Ft||Ft>="Z"||"I"===Ft||"O"===Ft)throw"MGRSPoint zone letter "+Ft+" not handled: "+ht;qt=ht.substring(zt,zt+=2);for(var Xt=_(At),Ht=function q(ht,ft){for(var jt=nt.charCodeAt(ft-1),qt=1e5,Wt=!1;jt!==ht.charCodeAt(0);){if(++jt===Z&&jt++,jt===st&&jt++,jt>Tt){if(Wt)throw"Bad character: "+ht;jt=V,Wt=!0}qt+=1e5}return qt}(qt.charAt(0),Xt),Jt=function N(ht,ft){if(ht>"V")throw"MGRSPoint given invalid Northing "+ht;for(var jt=et.charCodeAt(ft-1),qt=0,Wt=!1;jt!==ht.charCodeAt(0);){if(++jt===Z&&jt++,jt===st&&jt++,jt>bt){if(Wt)throw"Bad character: "+ht;jt=V,Wt=!0}qt+=1e5}return qt}(qt.charAt(1),Xt);Jt<J(Ft);)Jt+=2e6;var oe=jt-zt;if(oe%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+ht;var de,le,P,u=oe/2,r=0,x=0;return u>0&&(de=1e5/Math.pow(10,u),le=ht.substring(zt,zt+u),r=parseFloat(le)*de,P=ht.substring(zt+u),x=parseFloat(P)*de),{easting:r+Ht,northing:x+Jt,zoneLetter:Ft,zoneNumber:At,accuracy:de}}function J(ht){var ft;switch(ht){case"C":ft=11e5;break;case"D":ft=2e6;break;case"E":ft=28e5;break;case"F":ft=37e5;break;case"G":ft=46e5;break;case"H":ft=55e5;break;case"J":ft=64e5;break;case"K":ft=73e5;break;case"L":ft=82e5;break;case"M":ft=91e5;break;case"N":ft=0;break;case"P":ft=8e5;break;case"Q":ft=17e5;break;case"R":ft=26e5;break;case"S":ft=35e5;break;case"T":ft=44e5;break;case"U":ft=53e5;break;case"V":ft=62e5;break;case"W":ft=7e6;break;case"X":ft=79e5;break;default:ft=-1}if(ft>=0)return ft;throw"Invalid zone letter: "+ht}var Q=6,nt="AJSAJS",et="AFAFAF",V=65,Z=73,st=79,bt=86,Tt=90;i.forward=function(ht,ft){return ft=ft||5,function I(ht,ft){var jt="00000"+ht.easting,qt="00000"+ht.northing;return ht.zoneNumber+ht.zoneLetter+function g(ht,ft,jt){var qt=_(jt);return function R(ht,ft,jt){var qt=jt-1,Wt=nt.charCodeAt(qt),zt=et.charCodeAt(qt),At=Wt+ht-1,Ft=zt+ft,Xt=!1;return At>Tt&&(At=At-Tt+V-1,Xt=!0),(At===Z||Z>Wt&&At>Z||(At>Z||Z>Wt)&&Xt)&&At++,(At===st||st>Wt&&At>st||(At>st||st>Wt)&&Xt)&&++At===Z&&At++,At>Tt&&(At=At-Tt+V-1),Ft>bt?(Ft=Ft-bt+V-1,Xt=!0):Xt=!1,(Ft===Z||Z>zt&&Ft>Z||(Ft>Z||Z>zt)&&Xt)&&Ft++,(Ft===st||st>zt&&Ft>st||(Ft>st||st>zt)&&Xt)&&++Ft===Z&&Ft++,Ft>bt&&(Ft=Ft-bt+V-1),String.fromCharCode(At)+String.fromCharCode(Ft)}(Math.floor(ht/1e5),Math.floor(ft/1e5)%20,qt)}(ht.easting,ht.northing,ht.zoneNumber)+jt.substr(jt.length-5,ft)+qt.substr(qt.length-5,ft)}(function j(ht){var jt,qt,Wt,zt,At,Xt,Ht,Jt=ht.lat,oe=ht.lon,le=.00669438,P=.9996,t=C(Jt),v=C(oe);Ht=Math.floor((oe+180)/6)+1,180===oe&&(Ht=60),Jt>=56&&64>Jt&&oe>=3&&12>oe&&(Ht=32),Jt>=72&&84>Jt&&(oe>=0&&9>oe?Ht=31:oe>=9&&21>oe?Ht=33:oe>=21&&33>oe?Ht=35:oe>=33&&42>oe&&(Ht=37)),Xt=C(6*(Ht-1)-180+3),jt=le/(1-le),qt=6378137/Math.sqrt(1-le*Math.sin(t)*Math.sin(t)),Wt=Math.tan(t)*Math.tan(t),zt=jt*Math.cos(t)*Math.cos(t);var u=P*qt*((At=Math.cos(t)*(v-Xt))+(1-Wt+zt)*At*At*At/6+(5-18*Wt+Wt*Wt+72*zt-58*jt)*At*At*At*At*At/120)+5e5,r=P*(6378137*(.9983242984503243*t-.002514607064228144*Math.sin(2*t)+2639046602129982e-21*Math.sin(4*t)-35*le*le*le/3072*Math.sin(6*t))+qt*Math.tan(t)*(At*At/2+(5-Wt+9*zt+4*zt*zt)*At*At*At*At/24+(61-58*Wt+Wt*Wt+600*zt-330*jt)*At*At*At*At*At*At/720));return 0>Jt&&(r+=1e7),{northing:Math.round(r),easting:Math.round(u),zoneNumber:Ht,zoneLetter:W(Jt)}}({lat:ht[1],lon:ht[0]}),ft)},i.inverse=function(ht){var ft=U(M(ht.toUpperCase()));return ft.lat&&ft.lon?[ft.lon,ft.lat,ft.lon,ft.lat]:[ft.left,ft.bottom,ft.right,ft.top]},i.toPoint=function(ht){var ft=U(M(ht.toUpperCase()));return ft.lat&&ft.lon?[ft.lon,ft.lat]:[(ft.left+ft.right)/2,(ft.top+ft.bottom)/2]}}),kn=Gi&&"object"==typeof Gi&&"default"in Gi?Gi.default:Gi,Bi=dt(function(A){A.exports=function(i){var C={x:i[0],y:i[1]};return i.length>2&&(C.z=i[2]),i.length>3&&(C.m=i[3]),C}}),li=Bi&&"object"==typeof Bi&&"default"in Bi?Bi.default:Bi,fi=dt(function(A){var i=Math.PI/2,I=484813681109536e-20,_=.3826834323650898,R=function(M){return this instanceof R?(this.datum_type=4,void(M&&(M.datumCode&&"none"===M.datumCode&&(this.datum_type=5),M.datum_params&&(this.datum_params=M.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=1),this.datum_params.length>3&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=2,this.datum_params[3]*=I,this.datum_params[4]*=I,this.datum_params[5]*=I,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=M.grids?3:this.datum_type,this.a=M.a,this.b=M.b,this.es=M.es,this.ep2=M.ep2,3===this.datum_type&&(this.grids=M.grids)))):new R(M)};R.prototype={compare_datums:function(M){return!(this.datum_type!==M.datum_type||this.a!==M.a||Math.abs(this.es-M.es)>5e-11)&&(1===this.datum_type?this.datum_params[0]===M.datum_params[0]&&this.datum_params[1]===M.datum_params[1]&&this.datum_params[2]===M.datum_params[2]:2===this.datum_type?this.datum_params[0]===M.datum_params[0]&&this.datum_params[1]===M.datum_params[1]&&this.datum_params[2]===M.datum_params[2]&&this.datum_params[3]===M.datum_params[3]&&this.datum_params[4]===M.datum_params[4]&&this.datum_params[5]===M.datum_params[5]&&this.datum_params[6]===M.datum_params[6]:3!==this.datum_type&&3!==M.datum_type||this.nadgrids===M.nadgrids)},geodetic_to_geocentric:function(M){var q,N,J,Q,nt,V,Z=M.x,st=M.y,bt=M.z?M.z:0;if(-i>st&&st>-1.001*i)st=-i;else if(st>i&&1.001*i>st)st=i;else if(-i>st||st>i)return null;return Z>Math.PI&&(Z-=2*Math.PI),nt=Math.sin(st),V=Math.cos(st),q=((Q=this.a/Math.sqrt(1-this.es*(nt*nt)))+bt)*V*Math.cos(Z),N=(Q+bt)*V*Math.sin(Z),J=(Q*(1-this.es)+bt)*nt,M.x=q,M.y=N,M.z=J,0},geocentric_to_geodetic:function(M){var q,N,J,Q,nt,et,V,Z,st,bt,Tt,ht,jt,qt,Wt,zt,Ht=M.x,Jt=M.y,oe=M.z?M.z:0;if(q=Math.sqrt(Ht*Ht+Jt*Jt),N=Math.sqrt(Ht*Ht+Jt*Jt+oe*oe),q/this.a<1e-12){if(qt=0,N/this.a<1e-12)return Wt=i,void(zt=-this.b)}else qt=Math.atan2(Jt,Ht);J=oe/N,Q=q/N,nt=1/Math.sqrt(1-this.es*(2-this.es)*Q*Q),Z=Q*(1-this.es)*nt,st=J*nt,jt=0;do{jt++,V=this.a/Math.sqrt(1-this.es*st*st),et=this.es*V/(V+(zt=q*Z+oe*st-V*(1-this.es*st*st))),ht=(Tt=J*(nt=1/Math.sqrt(1-et*(2-et)*Q*Q)))*Z-(bt=Q*(1-et)*nt)*st,Z=bt,st=Tt}while(ht*ht>1e-24&&30>jt);return Wt=Math.atan(Tt/Math.abs(bt)),M.x=qt,M.y=Wt,M.z=zt,M},geocentric_to_geodetic_noniter:function(M){var q,N,J,Q,nt,et,V,Z,st,bt,ht,ft,jt,qt,Wt,zt,At=M.x,Ft=M.y,Xt=M.z?M.z:0;if(At=parseFloat(At),Ft=parseFloat(Ft),Xt=parseFloat(Xt),zt=!1,0!==At)q=Math.atan2(Ft,At);else if(Ft>0)q=i;else if(0>Ft)q=-i;else if(zt=!0,q=0,Xt>0)N=i;else{if(!(0>Xt))return N=i,void(J=-this.b);N=-i}return nt=At*At+Ft*Ft,Q=Math.sqrt(nt),et=1.0026*Xt,Z=Math.sqrt(et*et+nt),Wt=Q-this.a*this.es*(ht=Q/Z)*ht*ht,ft=(V=Xt+this.b*this.ep2*((bt=et/Z)*bt*bt))/(st=Math.sqrt(V*V+Wt*Wt)),jt=Wt/st,qt=this.a/Math.sqrt(1-this.es*ft*ft),J=jt>=_?Q/jt-qt:-_>=jt?Q/-jt-qt:Xt/ft+qt*(this.es-1),!1===zt&&(N=Math.atan(ft/jt)),M.x=q,M.y=N,M.z=J,M},geocentric_to_wgs84:function(M){if(1===this.datum_type)M.x+=this.datum_params[0],M.y+=this.datum_params[1],M.z+=this.datum_params[2];else if(2===this.datum_type){var Q=this.datum_params[3],nt=this.datum_params[4],et=this.datum_params[5],V=this.datum_params[6],st=V*(et*M.x+M.y-Q*M.z)+this.datum_params[1],bt=V*(-nt*M.x+Q*M.y+M.z)+this.datum_params[2];M.x=V*(M.x-et*M.y+nt*M.z)+this.datum_params[0],M.y=st,M.z=bt}},geocentric_from_wgs84:function(M){if(1===this.datum_type)M.x-=this.datum_params[0],M.y-=this.datum_params[1],M.z-=this.datum_params[2];else if(2===this.datum_type){var Q=this.datum_params[3],nt=this.datum_params[4],et=this.datum_params[5],V=this.datum_params[6],Z=(M.x-this.datum_params[0])/V,st=(M.y-this.datum_params[1])/V,bt=(M.z-this.datum_params[2])/V;M.x=Z+et*st-nt*bt,M.y=-et*Z+st+Q*bt,M.z=nt*Z-Q*st+bt}}},A.exports=R}),Ui=fi&&"object"==typeof fi&&"default"in fi?fi.default:fi,ci=dt(function(A){A.exports=function(i,C){var S,j;if(i=i||{},!C)return i;for(j in C)void 0!==(S=C[j])&&(i[j]=S);return i}}),Kr=ci&&"object"==typeof ci&&"default"in ci?ci.default:ci,zi=dt(function(A,i){i.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},i.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},i.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},i.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},i.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},i.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},i.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},i.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},i.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},i.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},i.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},i.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},i.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},i.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},i.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},i.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},i.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},i.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},i.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},i.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},i.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},i.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},i.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},i.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},i.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},i.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},i.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},i.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},i.hough={a:6378270,rf:297,ellipseName:"Hough"},i.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},i.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},i.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},i.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},i.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},i.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},i.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},i.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},i.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},i.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},i.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},i.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},i.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},i.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}}),Fi=zi&&"object"==typeof zi&&"default"in zi?zi.default:zi,Yr=dt(function(A,i){i.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},i.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},i.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},i.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},i.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},i.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},i.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},i.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},i.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},i.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},i.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},i.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},i.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},i.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},i.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},i.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}}),Vi=Yr&&"object"==typeof Yr&&"default"in Yr?Yr.default:Yr,Hi=dt(function(A){var i=Vi,C=Fi,S=Kr,j=Ui;A.exports=function(_){if(_.datumCode&&"none"!==_.datumCode){var R=i[_.datumCode];R&&(_.datum_params=R.towgs84?R.towgs84.split(","):null,_.ellps=R.ellipse,_.datumName=R.datumName?R.datumName:_.datumCode)}return _.a||S(_,C[_.ellps]?C[_.ellps]:C.WGS84),_.rf&&!_.b&&(_.b=(1-1/_.rf)*_.a),(0===_.rf||Math.abs(_.a-_.b)<1e-10)&&(_.sphere=!0,_.b=_.a),_.a2=_.a*_.a,_.b2=_.b*_.b,_.es=(_.a2-_.b2)/_.a2,_.e=Math.sqrt(_.es),_.R_A&&(_.a*=1-_.es*(.16666666666666666+_.es*(.04722222222222222+.022156084656084655*_.es)),_.a2=_.a*_.a,_.b2=_.b*_.b,_.es=0),_.ep2=(_.a2-_.b2)/_.b2,_.k0||(_.k0=1),_.axis||(_.axis="enu"),_.datum||(_.datum=j(_)),_}}),Wi=Hi&&"object"==typeof Hi&&"default"in Hi?Hi.default:Hi,Ji=dt(function(A,i){function C(S){return S}i.init=function(){},i.forward=C,i.inverse=C,i.names=["longlat","identity"]}),Qi=Ji&&"object"==typeof Ji&&"default"in Ji?Ji.default:Ji,Xi=dt(function(A,i){var C=pe,S=Math.PI/2,U=57.29577951308232,W=ye,I=Math.PI/4,g=ar,_=Be;i.init=function(){var R=this.b/this.a;this.es=1-R*R,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):C(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},i.forward=function(R){var N,J,M=R.x,q=R.y;if(q*U>90&&-90>q*U&&M*U>180&&-180>M*U)return null;if(Math.abs(Math.abs(q)-S)<=1e-10)return null;if(this.sphere)N=this.x0+this.a*this.k0*W(M-this.long0),J=this.y0+this.a*this.k0*Math.log(Math.tan(I+.5*q));else{var Q=Math.sin(q),nt=g(this.e,q,Q);N=this.x0+this.a*this.k0*W(M-this.long0),J=this.y0-this.a*this.k0*Math.log(nt)}return R.x=N,R.y=J,R},i.inverse=function(R){var M,q,N=R.x-this.x0,J=R.y-this.y0;if(this.sphere)q=S-2*Math.atan(Math.exp(-J/(this.a*this.k0)));else{var Q=Math.exp(-J/(this.a*this.k0));if(-9999===(q=_(this.e,Q)))return null}return M=W(this.long0+N/(this.a*this.k0)),R.x=M,R.y=q,R},i.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]}),Ki=Xi&&"object"==typeof Xi&&"default"in Xi?Xi.default:Xi,Yi=dt(function(A,i){function C(W,I){var g=U.length;return W.names?(U[g]=W,W.names.forEach(function(_){j[_.toLowerCase()]=g}),this):(console.log(I),!0)}var S=[Ki,Qi],j={},U=[];i.add=C,i.get=function(W){if(!W)return!1;var I=W.toLowerCase();return typeof j[I]<"u"&&U[j[I]]?U[j[I]]:void 0},i.start=function(){S.forEach(C)}}),Zi=Yi&&"object"==typeof Yi&&"default"in Yi?Yi.default:Yi,$i=dt(function(A,i){i.ft={to_meter:.3048},i["us-ft"]={to_meter:1200/3937}}),tn=$i&&"object"==typeof $i&&"default"in $i?$i.default:$i,en=dt(function(A,i){i.greenwich=0,i.lisbon=-9.131906111111,i.paris=2.337229166667,i.bogota=-74.080916666667,i.madrid=-3.687938888889,i.rome=12.452333333333,i.bern=7.439583333333,i.jakarta=106.807719444444,i.ferro=-17.666666666667,i.brussels=4.367975,i.stockholm=18.058277777778,i.athens=23.7163375,i.oslo=10.722916666667}),rn=en&&"object"==typeof en&&"default"in en?en.default:en,nn=dt(function(A){var i=.017453292519943295,C=rn,S=tn;A.exports=function(j){var U={},W={};j.split("+").map(function(M){return M.trim()}).filter(function(M){return M}).forEach(function(M){var q=M.split("=");q.push(!0),W[q[0].toLowerCase()]=q[1]});var I,g,_,R={proj:"projName",datum:"datumCode",rf:function(M){U.rf=parseFloat(M)},lat_0:function(M){U.lat0=M*i},lat_1:function(M){U.lat1=M*i},lat_2:function(M){U.lat2=M*i},lat_ts:function(M){U.lat_ts=M*i},lon_0:function(M){U.long0=M*i},lon_1:function(M){U.long1=M*i},lon_2:function(M){U.long2=M*i},alpha:function(M){U.alpha=parseFloat(M)*i},lonc:function(M){U.longc=M*i},x_0:function(M){U.x0=parseFloat(M)},y_0:function(M){U.y0=parseFloat(M)},k_0:function(M){U.k0=parseFloat(M)},k:function(M){U.k0=parseFloat(M)},a:function(M){U.a=parseFloat(M)},b:function(M){U.b=parseFloat(M)},r_a:function(){U.R_A=!0},zone:function(M){U.zone=parseInt(M,10)},south:function(){U.utmSouth=!0},towgs84:function(M){U.datum_params=M.split(",").map(function(q){return parseFloat(q)})},to_meter:function(M){U.to_meter=parseFloat(M)},units:function(M){U.units=M,S[M]&&(U.to_meter=S[M].to_meter)},from_greenwich:function(M){U.from_greenwich=M*i},pm:function(M){U.from_greenwich=(C[M]?C[M]:parseFloat(M))*i},nadgrids:function(M){"@null"===M?U.datumCode="none":U.nadgrids=M},axis:function(M){var q="ewnsud";3===M.length&&-1!==q.indexOf(M.substr(0,1))&&-1!==q.indexOf(M.substr(1,1))&&-1!==q.indexOf(M.substr(2,1))&&(U.axis=M)}};for(I in W)g=W[I],I in R?"function"==typeof(_=R[I])?_(g):U[_]=g:U[I]=g;return"string"==typeof U.datumCode&&"WGS84"!==U.datumCode&&(U.datumCode=U.datumCode.toLowerCase()),U}}),pi=nn&&"object"==typeof nn&&"default"in nn?nn.default:nn,an=dt(function(A){function i(g,_,R){g[_]=R.map(function(M){var q={};return C(M,q),q}).reduce(function(M,q){return I(M,q)},{})}function C(g,_){var R;return Array.isArray(g)?("PARAMETER"===(R=g.shift())&&(R=g.shift()),void(1===g.length?Array.isArray(g[0])?(_[R]={},C(g[0],_[R])):_[R]=g[0]:g.length?"TOWGS84"===R?_[R]=g:(_[R]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(R)>-1?(_[R]={name:g[0].toLowerCase(),convert:g[1]},3===g.length&&(_[R].auth=g[2])):"SPHEROID"===R?(_[R]={name:g[0],a:g[1],rf:g[2]},4===g.length&&(_[R].auth=g[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(R)>-1?(g[0]=["name",g[0]],i(_,R,g)):g.every(function(M){return Array.isArray(M)})?i(_,R,g):C(g,_[R])):_[R]=!0)):void(_[g]=!0)}function j(g){return g*W}var W=.017453292519943295,I=Kr;A.exports=function(g,_){var R=JSON.parse((","+g).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),M=R.shift(),q=R.shift();R.unshift(["name",q]),R.unshift(["type",M]),R.unshift("output");var N={};return C(R,N),function U(g){function _(q){var N=g.to_meter||1;return parseFloat(q,10)*N}"GEOGCS"===g.type?g.projName="longlat":"LOCAL_CS"===g.type?(g.projName="identity",g.local=!0):g.projName="object"==typeof g.PROJECTION?Object.keys(g.PROJECTION)[0]:g.PROJECTION,g.UNIT&&(g.units=g.UNIT.name.toLowerCase(),"metre"===g.units&&(g.units="meter"),g.UNIT.convert&&("GEOGCS"===g.type?g.DATUM&&g.DATUM.SPHEROID&&(g.to_meter=parseFloat(g.UNIT.convert,10)*g.DATUM.SPHEROID.a):g.to_meter=parseFloat(g.UNIT.convert,10))),g.GEOGCS&&(g.datumCode=g.GEOGCS.DATUM?g.GEOGCS.DATUM.name.toLowerCase():g.GEOGCS.name.toLowerCase(),"d_"===g.datumCode.slice(0,2)&&(g.datumCode=g.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==g.datumCode&&"new_zealand_1949"!==g.datumCode||(g.datumCode="nzgd49"),"wgs_1984"===g.datumCode&&("Mercator_Auxiliary_Sphere"===g.PROJECTION&&(g.sphere=!0),g.datumCode="wgs84"),"_ferro"===g.datumCode.slice(-6)&&(g.datumCode=g.datumCode.slice(0,-6)),"_jakarta"===g.datumCode.slice(-8)&&(g.datumCode=g.datumCode.slice(0,-8)),~g.datumCode.indexOf("belge")&&(g.datumCode="rnb72"),g.GEOGCS.DATUM&&g.GEOGCS.DATUM.SPHEROID&&(g.ellps=g.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===g.ellps.toLowerCase().slice(0,13)&&(g.ellps="intl"),g.a=g.GEOGCS.DATUM.SPHEROID.a,g.rf=parseFloat(g.GEOGCS.DATUM.SPHEROID.rf,10)),~g.datumCode.indexOf("osgb_1936")&&(g.datumCode="osgb36")),g.b&&!isFinite(g.b)&&(g.b=g.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",j],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",j],["x0","false_easting",_],["y0","false_northing",_],["long0","central_meridian",j],["lat0","latitude_of_origin",j],["lat0","standard_parallel_1",j],["lat1","standard_parallel_1",j],["lat2","standard_parallel_2",j],["alpha","azimuth",j],["srsCode","name"]].forEach(function(q){return function S(g,_){var R=_[0],M=_[1];!(R in g)&&M in g&&(g[R]=g[M],3===_.length&&(g[R]=_[2](g[R])))}(g,q)}),g.long0||!g.longc||"Albers_Conic_Equal_Area"!==g.projName&&"Lambert_Azimuthal_Equal_Area"!==g.projName||(g.long0=g.longc),g.lat_ts||!g.lat1||"Stereographic_South_Pole"!==g.projName&&"Polar Stereographic (variant B)"!==g.projName||(g.lat0=j(g.lat1>0?90:-90),g.lat_ts=g.lat1)}(N.output),I(_,N.output)}}),di=an&&"object"==typeof an&&"default"in an?an.default:an,yi=dt(function(A){A.exports=function(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}}),sn=yi&&"object"==typeof yi&&"default"in yi?yi.default:yi,vi=dt(function(A){function i(U){var W=this;if(2===arguments.length){var I=arguments[1];i[U]="string"==typeof I?"+"===I.charAt(0)?S(arguments[1]):j(arguments[1]):I}else if(1===arguments.length){if(Array.isArray(U))return U.map(function(g){Array.isArray(g)?i.apply(W,g):i(g)});if("string"==typeof U){if(U in i)return i[U]}else"EPSG"in U?i["EPSG:"+U.EPSG]=U:"ESRI"in U?i["ESRI:"+U.ESRI]=U:"IAU2000"in U?i["IAU2000:"+U.IAU2000]=U:console.log(U);return}}var S=pi,j=di;sn(i),A.exports=i}),mi=vi&&"object"==typeof vi&&"default"in vi?vi.default:vi,on=dt(function(A){var W=mi,I=di,g=pi;A.exports=function U(_){return function i(_){return"string"==typeof _}(_)?function C(_){return _ in W}(_)?W[_]:function S(_){return["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(M,q){return M+1+_.indexOf(q)},0)}(_)?I(_):function j(_){return"+"===_[0]}(_)?g(_):void 0:_}}),hn=on&&"object"==typeof on&&"default"in on?on.default:on,gi=dt(function(A){function i(W,I){if(!(this instanceof i))return new i(W);I=I||function(M){if(M)throw M};var g=C(W);if("object"==typeof g){var _=U(g),R=i.projections.get(_.projName);R?(S(this,_),S(this,R),this.init(),I(null,this)):I(W)}else I(W)}var C=hn,S=Kr,U=Wi;(i.projections=Zi).start(),A.exports=i}),Zr=gi&&"object"==typeof gi&&"default"in gi?gi.default:gi,un=dt(function(A){A.exports=function(i,C,S){var j,U,W,I=S.x,g=S.y,_=S.z||0;for(W=0;3>W;W++)if(!C||2!==W||void 0!==S.z)switch(0===W?(j=I,U="x"):1===W?(j=g,U="y"):(j=_,U="z"),i.axis[W]){case"e":case"n":S[U]=j;break;case"w":case"s":S[U]=-j;break;case"u":void 0!==S[U]&&(S.z=j);break;case"d":void 0!==S[U]&&(S.z=-j);break;default:return null}return S}}),ln=un&&"object"==typeof un&&"default"in un?un.default:un,$r=dt(function(A){var i=1,C=2,U=6378137,W=.006694379990141316;A.exports=function(I,g,_){function R(Z){return Z===i||Z===C}var M,q,N;if(I.compare_datums(g)||5===I.datum_type||5===g.datum_type)return _;var J=I.a,Q=I.es,nt=g.a,et=g.es,V=I.datum_type;if(3===V)if(0===this.apply_gridshift(I,0,_))I.a=U,I.es=W;else{if(!I.datum_params)return I.a=J,I.es=I.es,_;for(M=1,q=0,N=I.datum_params.length;N>q;q++)M*=I.datum_params[q];if(0===M)return I.a=J,I.es=I.es,_;V=I.datum_params.length>3?C:i}return 3===g.datum_type&&(g.a=U,g.es=W),(I.es!==g.es||I.a!==g.a||R(V)||R(g.datum_type))&&(I.geodetic_to_geocentric(_),R(I.datum_type)&&I.geocentric_to_wgs84(_),R(g.datum_type)&&g.geocentric_from_wgs84(_),g.geocentric_to_geodetic(_)),3===g.datum_type&&this.apply_gridshift(g,1,_),I.a=J,I.es=Q,g.a=nt,g.es=et,_}}),fn=$r&&"object"==typeof $r&&"default"in $r?$r.default:$r,cn=dt(function(A){var i=.017453292519943295,C=57.29577951308232,S=1,j=2,U=fn,W=ln,I=Zr,g=li;A.exports=function _(R,M,q){function N(Q,nt){return(Q.datum.datum_type===S||Q.datum.datum_type===j)&&"WGS84"!==nt.datumCode}var J;return Array.isArray(q)&&(q=g(q)),R.datum&&M.datum&&(N(R,M)||N(M,R))&&(_(R,J=new I("WGS84"),q),R=J),"enu"!==R.axis&&W(R,!1,q),"longlat"===R.projName?(q.x*=i,q.y*=i):(R.to_meter&&(q.x*=R.to_meter,q.y*=R.to_meter),R.inverse(q)),R.from_greenwich&&(q.x+=R.from_greenwich),q=U(R.datum,M.datum,q),M.from_greenwich&&(q.x-=M.from_greenwich),"longlat"===M.projName?(q.x*=C,q.y*=C):(M.forward(q),M.to_meter&&(q.x/=M.to_meter,q.y/=M.to_meter)),"enu"!==M.axis&&W(M,!0,q),q}}),_i=cn&&"object"==typeof cn&&"default"in cn?cn.default:cn,pn=dt(function(A){function i(S,j,U){if(!(this instanceof i))return new i(S,j,U);if(Array.isArray(S))this.x=S[0],this.y=S[1],this.z=S[2]||0;else if("object"==typeof S)this.x=S.x,this.y=S.y,this.z=S.z||0;else if("string"==typeof S&&typeof j>"u"){var W=S.split(",");this.x=parseFloat(W[0],10),this.y=parseFloat(W[1],10),this.z=parseFloat(W[2],10)||0}else this.x=S,this.y=j,this.z=U||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var C=kn;i.fromMGRS=function(S){return new i(C.toPoint(S))},i.prototype.toMGRS=function(S){return C.forward([this.x,this.y],S)},A.exports=i}),dn=pn&&"object"==typeof pn&&"default"in pn?pn.default:pn,Mi=dt(function(A){function i(I,g,_){var R;return Array.isArray(_)?(R=U(I,g,_),3===_.length?[R.x,R.y,R.z]:[R.x,R.y]):U(I,g,_)}function C(I){return I instanceof j?I:I.oProj?I.oProj:j(I)}var j=Zr,U=_i,W=j("WGS84");A.exports=function S(I,g,_){I=C(I);var R,M=!1;return typeof g>"u"?(g=I,I=W,M=!0):(typeof g.x<"u"||Array.isArray(g))&&(_=g,g=I,I=W,M=!0),g=C(g),_?i(I,g,_):(R={forward:function(q){return i(I,g,q)},inverse:function(q){return i(g,I,q)}},M&&(R.oProj=g),R)}}),yn=Mi&&"object"==typeof Mi&&"default"in Mi?Mi.default:Mi,vn=dt(function(A){var i=yn;i.defaultDatum="WGS84",i.Proj=Zr,i.WGS84=new i.Proj("WGS84"),i.Point=dn,i.toPoint=li,i.defs=mi,i.transform=_i,i.mgrs=kn,i.version="2.3.14",Di(i),A.exports=i}),mn=vn&&"object"==typeof vn&&"default"in vn?vn.default:vn;!function(A){function i(V){if("string"!=typeof V&&(V=String(V)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(V))throw new TypeError("Invalid character in header field name");return V.toLowerCase()}function C(V){return"string"!=typeof V&&(V=String(V)),V}function S(V){var Z={next:function(){var st=V.shift();return{done:void 0===st,value:st}}};return Q.iterable&&(Z[Symbol.iterator]=function(){return Z}),Z}function j(V){this.map={},V instanceof j?V.forEach(function(Z,st){this.append(st,Z)},this):V&&Object.getOwnPropertyNames(V).forEach(function(Z){this.append(Z,V[Z])},this)}function U(V){return V.bodyUsed?Promise.reject(new TypeError("Already read")):void(V.bodyUsed=!0)}function W(V){return new Promise(function(Z,st){V.onload=function(){Z(V.result)},V.onerror=function(){st(V.error)}})}function I(V){var Z=new FileReader;return Z.readAsArrayBuffer(V),W(Z)}function _(){return this.bodyUsed=!1,this._initBody=function(V){if(this._bodyInit=V,"string"==typeof V)this._bodyText=V;else if(Q.blob&&Blob.prototype.isPrototypeOf(V))this._bodyBlob=V;else if(Q.formData&&FormData.prototype.isPrototypeOf(V))this._bodyFormData=V;else if(Q.searchParams&&URLSearchParams.prototype.isPrototypeOf(V))this._bodyText=V.toString();else if(V){if(!Q.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(V))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof V?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Q.searchParams&&URLSearchParams.prototype.isPrototypeOf(V)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Q.blob?(this.blob=function(){var V=U(this);if(V)return V;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(I)},this.text=function(){var V=U(this);if(V)return V;if(this._bodyBlob)return function g(V){var Z=new FileReader;return Z.readAsText(V),W(Z)}(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){return U(this)||Promise.resolve(this._bodyText)},Q.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}function M(V,Z){var st=(Z=Z||{}).body;if(M.prototype.isPrototypeOf(V)){if(V.bodyUsed)throw new TypeError("Already read");this.url=V.url,this.credentials=V.credentials,Z.headers||(this.headers=new j(V.headers)),this.method=V.method,this.mode=V.mode,st||(st=V._bodyInit,V.bodyUsed=!0)}else this.url=V;if(this.credentials=Z.credentials||this.credentials||"omit",!Z.headers&&this.headers||(this.headers=new j(Z.headers)),this.method=function R(V){var Z=V.toUpperCase();return nt.indexOf(Z)>-1?Z:V}(Z.method||this.method||"GET"),this.mode=Z.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&st)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(st)}function q(V){var Z=new FormData;return V.trim().split("&").forEach(function(st){if(st){var bt=st.split("="),Tt=bt.shift().replace(/\+/g," "),ht=bt.join("=").replace(/\+/g," ");Z.append(decodeURIComponent(Tt),decodeURIComponent(ht))}}),Z}function N(V){var Z=new j;return(V.getAllResponseHeaders()||"").trim().split("\n").forEach(function(bt){var Tt=bt.trim().split(":"),ht=Tt.shift().trim(),ft=Tt.join(":").trim();Z.append(ht,ft)}),Z}function J(V,Z){Z||(Z={}),this.type="default",this.status=Z.status,this.ok=this.status>=200&&this.status<300,this.statusText=Z.statusText,this.headers=Z.headers instanceof j?Z.headers:new j(Z.headers),this.url=Z.url||"",this._initBody(V)}if(!A.fetch){var Q={searchParams:"URLSearchParams"in A,iterable:"Symbol"in A&&"iterator"in Symbol,blob:"FileReader"in A&&"Blob"in A&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in A,arrayBuffer:"ArrayBuffer"in A};j.prototype.append=function(V,Z){V=i(V),Z=C(Z);var st=this.map[V];st||(this.map[V]=st=[]),st.push(Z)},j.prototype.delete=function(V){delete this.map[i(V)]},j.prototype.get=function(V){var Z=this.map[i(V)];return Z?Z[0]:null},j.prototype.getAll=function(V){return this.map[i(V)]||[]},j.prototype.has=function(V){return this.map.hasOwnProperty(i(V))},j.prototype.set=function(V,Z){this.map[i(V)]=[C(Z)]},j.prototype.forEach=function(V,Z){Object.getOwnPropertyNames(this.map).forEach(function(st){this.map[st].forEach(function(bt){V.call(Z,bt,st,this)},this)},this)},j.prototype.keys=function(){var V=[];return this.forEach(function(Z,st){V.push(st)}),S(V)},j.prototype.values=function(){var V=[];return this.forEach(function(Z){V.push(Z)}),S(V)},j.prototype.entries=function(){var V=[];return this.forEach(function(Z,st){V.push([st,Z])}),S(V)},Q.iterable&&(j.prototype[Symbol.iterator]=j.prototype.entries);var nt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];M.prototype.clone=function(){return new M(this)},_.call(M.prototype),_.call(J.prototype),J.prototype.clone=function(){return new J(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new j(this.headers),url:this.url})},J.error=function(){var V=new J(null,{status:0,statusText:""});return V.type="error",V};var et=[301,302,303,307,308];J.redirect=function(V,Z){if(-1===et.indexOf(Z))throw new RangeError("Invalid status code");return new J(null,{status:Z,headers:{location:V}})},A.Headers=j,A.Request=M,A.Response=J,A.fetch=function(V,Z){return new Promise(function(st,bt){var ht;ht=M.prototype.isPrototypeOf(V)&&!Z?V:new M(V,Z);var ft=new XMLHttpRequest;ft.onload=function(){var jt={status:ft.status,statusText:ft.statusText,headers:N(ft),url:"responseURL"in ft?ft.responseURL:/^X-Request-URL:/m.test(ft.getAllResponseHeaders())?ft.getResponseHeader("X-Request-URL"):void 0};st(new J("response"in ft?ft.response:ft.responseText,jt))},ft.onerror=function(){bt(new TypeError("Network request failed"))},ft.ontimeout=function(){bt(new TypeError("Network request failed"))},ft.open(ht.method,ht.url,!0),"include"===ht.credentials&&(ft.withCredentials=!0),"responseType"in ft&&Q.blob&&(ft.responseType="blob"),ht.headers.forEach(function(jt,qt){ft.setRequestHeader(qt,jt)}),ft.send(typeof ht._bodyInit>"u"?null:ht._bodyInit)})},A.fetch.polyfill=!0}}(typeof self<"u"?self:this);var gn,bi=dt(function(A,i){function W(et,V){var Z=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!et||!V)throw new Error("crsUri and proj cannot be empty");var st=void 0;if("string"==typeof V){if(!(st=(0,R.default)(V)))throw new Error("Unsupported proj4 string: "+V);Z.reverseAxes&&(st=g(st))}else st=V;return J[et]=st,st}function g(et){return{forward:function(V){return et.forward(V).reverse()},inverse:function(V){return et.inverse([V[1],V[0]])}}}Object.defineProperty(i,"__esModule",{value:!0}),i.get=function j(et){return J[et]},i.load=function U(et){if(et in J)return Promise.resolve(J[et]);var V=function I(et){if(0!==et.indexOf(N))throw new Error("Unsupported CRS URI: "+et);return et.substr(N.length)}(et);return fetch("https://epsg.io/"+V+".proj4").then(function(st){if(!st.ok)throw new Error("HTTP response code: "+st.status);return st.text()}).then(function(st){return W(et,st,{reverseAxes:et in Q})})},i.set=W;var R=function C(et){return et&&et.__esModule?et:{default:et}}(mn),M="http://www.opengis.net/def/crs/",q=M+"OGC/",N=M+"EPSG/0/",J={},Q=function S(et,V,Z){return V in et?Object.defineProperty(et,V,{value:Z,enumerable:!0,configurable:!0,writable:!0}):et[V]=Z,et}({},N+4326,!0),nt=(0,R.default)("+proj=longlat +datum=WGS84 +no_defs");W(q+"1.3/CRS84",nt),W(N+4979,g(nt))}),ra=bi.load,_n=bi.get,Mn="http://www.opengis.net/def/crs/",Sn=Mn+"EPSG/0/4979",On=Mn+"EPSG/0/4326",bn=Mn+"OGC/1.3/CRS84",wn=[Sn,On,bn],Pn=(ut(gn={},Sn,1),ut(gn,On,1),ut(gn,bn,0),gn),jn=function(){function A(i){ai(this,A),this._collection=i,this._filter={},this._subset={}}return $(A,[{key:"filter",value:function(i){return Ar(i,this._filter),this}},{key:"subset",value:function(i){return Ar(i,this._subset),this}},{key:"execute",value:function(){var i=this,C=this._collection,S={type:wr,coverages:[],parameters:C.parameters,domainType:C.domainType},j=[],U=!0,W=!1,I=void 0;try{for(var g,_=function(){var M=g.value;j.push(M.loadDomain().then(function(q){return function Xr(A,i){var C=!0,S=!1,j=void 0;try{for(var U,W=Object.keys(i)[Symbol.iterator]();!(C=(U=W.next()).done);C=!0){var I=U.value,g=i[I];if(!A.axes.has(I))throw new Error('Axis "'+I+'" does not exist');var R=A.axes.get(I).values,M=R[0],q=R[R.length-1];if("number"!=typeof M&&"string"!=typeof M)throw new Error("Can only filter primitive axis values");var N=g.start,J=g.stop;if(br(A,I)){var Q=[Ne(M),Ne(q)];M=Q[0],q=Q[1];var nt=[Ne(N),Ne(J)];N=nt[0],J=nt[1]}else if(mr(A,I)){var et=fr(A,I),V=[et(N),et(J)];N=V[0],J=V[1]}if(M>q){var Z=[q,M];M=Z[0],q=Z[1]}if(N>q||M>J)return!1}}catch(st){S=!0,j=st}finally{try{!C&&W.return&&W.return()}finally{if(S)throw j}}return!0}(q,i._filter)?0!==Object.keys(i._subset).length?M.subsetByValue(i._subset).then(function(N){S.coverages.push(N)}):void S.coverages.push(M):void 0}))},R=C.coverages[Symbol.iterator]();!(U=(g=R.next()).done);U=!0)_()}catch(M){W=!0,I=M}finally{try{!U&&R.return&&R.return()}finally{if(W)throw I}}return Promise.all(j).then(function(){return S.query=function(){return new A(S)},S})}}]),A}();mt.minMax=function Et(A){for(var i=A.length,C=1/0,S=-1/0;i--;){var j=A[i];null==j||(C>j?C=j:j>S&&(S=j))}return C===1/0?C=S:S===-1/0&&(S=C),C!==1/0&&C!==-1/0||(C=null,S=null),[C,S]},mt.indicesOfNearest=Bt,mt.indexOfNearest=hr,mt.DOMAIN=Ye,mt.COVERAGE=Xe,mt.COVERAGECOLLECTION=wr,mt.COVJSON_DATATYPE_TUPLE=He,mt.COVJSON_DATATYPE_POLYGON=qr,mt.getLanguageTag=xe,mt.getLanguageString=Jr,mt.stringifyUnit=function Gr(A,i){if(!A)return"";if(A.symbol){var C=A.symbol.value||A.symbol;return"http://www.opengis.net/def/uom/UCUM/"===A.symbol.type&&("Cel"===C?C="\xb0C":"1"===C&&(C="")),C}return Jr(A.label,i)},mt.minMaxOfRange=function Br(A){var i=1/0,C=-1/0;return Nr(A,function(j){null!==j&&(i>j&&(i=j),j>C&&(C=j))}),i===1/0?[void 0,void 0]:[i,C]},mt.reduceRange=function Ur(A,i,C){var S=C;return Nr(A,function(U){S=i(S,U)}),S},mt.iterateRange=Nr,mt.getCategory=function zr(A,i){var C=!0,S=!1,j=void 0;try{for(var U,W=function(){var _=K(U.value,2),R=_[0];if(-1!==_[1].indexOf(i))return{v:A.observedProperty.categories.filter(function(N){return N.id===R})[0]}},I=A.categoryEncoding[Symbol.iterator]();!(C=(U=I.next()).done);C=!0){var g=W();if("object"===(typeof g>"u"?"undefined":Hr(g)))return g.v}}catch(_){S=!0,j=_}finally{try{!C&&I.return&&I.return()}finally{if(S)throw j}}},mt.isCoverage=yr,mt.checkCoverage=Re,mt.isDomain=vr,mt.checkDomain=Dr,mt.getReferenceObject=ur,mt.getHorizontalCRSReferenceObject=Ve,mt.isEllipsoidalCRS=Sr,mt.getProjection=lr,mt.loadProjection=function sr(A){try{return lr(A)}catch{}var i=Ve(A);if(!i)throw new Error("No horizontal CRS found in coverage domain");return ra(i.system.id).then(function(S){return rr(S)})},mt.getHorizontalCRSComponents=function Fr(A){return er(A)},mt.getHorizontalCRSCoordinateIDs=er,mt.reprojectCoords=function Vr(A,i,C){return C.project(i.unproject(A))},mt.getLongitudeWrapper=fr,mt.isLongitudeAxis=mr,mt.isISODateAxis=br,mt.asTime=Ne,mt.normalizeIndexSubsetConstraints=gr,mt.subsetDomainByIndex=Or,mt.fromDomain=function Pi(A){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];Dr(A);var C=i.gridAxes,S=K(C=void 0===C?["x","y"]:C,2),j=S[0],U=S[1],W="domain",g=A.axes.has(j)&&A.axes.has(U)&&(A.axes.get(j).values.length>1||A.axes.get(U).values.length>1),_=void 0,R=void 0,M="a";g?(_=[{id:M,label:{en:"A"}},{id:"b",label:{en:"B"}}],R=new Map([[M,[0]],["b",[1]]])):(_=[{id:M,label:{en:"X"}}],R=new Map([[M,[0]]]));var Q=new Map;Q.set(W,{key:W,observedProperty:{label:{en:"Domain"},categories:_},categoryEncoding:R});var et,nt=new Map([].concat(yt(A.axes)).map(function(st){var bt=K(st,2);return[bt[0],bt[1].values.length]}));et=g?function(bt){var Tt=bt.x,ft=bt.y;return function(bt){return bt%2}((void 0===Tt?0:Tt)+(void 0===ft?0:ft))?0:1}:function(){return 0};var Z={type:Xe,domainType:A.domainType,parameters:Q,loadDomain:function(){return Promise.resolve(A)},loadRange:function(){return Promise.resolve({shape:nt,dataType:"integer",get:et})}};return Me(Z),_e(Z),Z},mt.fromXndarray=function ii(A){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],C=i.parameter,S=void 0===C?{key:"p1",observedProperty:{label:{en:"Parameter 1"}}}:C,j=i.referencing,U=i.domainType,W=new Map;W.set(S.key,S),j||(j=[],A.coords.has("x")&&A.coords.has("y")&&j.push({coordinates:["x","y"],system:{type:"GeographicCRS",id:"http://www.opengis.net/def/crs/OGC/1.3/CRS84"}}),A.coords.has("t")&&j.push({coordinates:["t"],system:{type:"TemporalRS",calendar:"Gregorian"}}));var I=new Map,g=!0,_=!1,R=void 0;try{for(var M,q=A.coords[Symbol.iterator]();!(g=(M=q.next()).done);g=!0){for(var N=K(M.value,2),J=N[0],Q=N[1],nt=new Array(Q.size),et=0;et<Q.size;et++)nt[et]=Q.get(et);I.set(J,{key:J,coordinates:[J],values:nt})}}catch(ht){_=!0,R=ht}finally{try{!g&&q.return&&q.return()}finally{if(_)throw R}}var V={type:Ye,domainType:U,referencing:j,axes:I},Z=new Map([].concat(yt(V.axes)).map(function(ht){var ft=K(ht,2);return[ft[0],ft[1].values.length]})),st=-1!==A.dtype.indexOf("int")?"integer":"float",Tt={type:Xe,domainType:U,parameters:W,loadDomain:function(){return Promise.resolve(V)},loadRange:function(){return Promise.resolve({shape:Z,dataType:st,get:A.xget.bind(A)})}};return Me(Tt),_e(Tt),Tt},mt.addSubsetFunctions=_e,mt.addLoadRangesFunction=Me,mt.reproject=function Je(A,i){return A.loadDomain().then(function(C){var S=Ve(C);if(S.coordinates.length>2)throw new Error("Reprojection not supported for >2D CRSs");if(S.coordinates.some(C.axes.has))throw new Error("Grid reprojection not supported yet");var j=K(S.coordinates,2),U=j[0],W=j[1],g=[].concat(yt(C.axes.values())).find(function(Ht){return S.coordinates.every(function(Jt){return-1!==Ht.coordinates.indexOf(Jt)})}),_=g.coordinates.indexOf(U),R=g.coordinates.indexOf(W),M=lr(C),q=lr(i),N=void 0;if(g.dataType!==He)throw new Error("Unsupported data type: "+g.dataType);N=g.values.map(function(Ht){return Ht.slice()});var J=!0,Q=!1,nt=void 0;try{for(var et,V=N[Symbol.iterator]();!(J=(et=V.next()).done);J=!0){var Z=et.value,Tt=M.unproject({x:Z[_],y:Z[R]}),ht=q.project(Tt),jt=ht.y;Z[_]=ht.x,Z[R]=jt}}catch(Ht){Q=!0,nt=Ht}finally{try{!J&&V.return&&V.return()}finally{if(Q)throw nt}}var qt=new Map(C.axes),Wt=Ge(g);delete Wt.bounds,Wt.values=N,qt.set(g.key,Wt);var zt=Ve(i);if(zt.coordinates.length>2)throw new Error("Reprojection not supported for >2D CRSs");var At=C.referencing.map(function(Ht){return Ht===S?{coordinates:S.coordinates,system:zt.system}:Ht}),Ft={type:Ye,domainType:C.domainType,axes:qt,referencing:At};return{type:Xe,domainType:A.domainType,parameters:A.parameters,loadDomain:function(){return Promise.resolve(Ft)},loadRange:function(Ht){return A.loadRange(Ht)},loadRanges:function(Ht){return A.loadRanges(Ht)},subsetByIndex:function(Ht){return A.subsetByIndex(Ht).then(function(Jt){return Je(Jt,i)})},subsetByValue:function(Ht){return A.subsetByValue(Ht).then(function(Jt){return Je(Jt,i)})}}})},mt.subsetByBbox=function ri(A,i){var C,S=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2],j=K(i,4),W=j[1],g=j[3];return A.subsetByValue((ut(C={},S[0],{start:j[0],stop:j[2]}),ut(C,S[1],{start:W,stop:g}),C))},mt.subsetByIndex=Cr,mt.subsetByValue=xr,mt.withSimpleDerivedParameter=function Qr(A,i){var S=i.inputParameters,U=i.fn,W={parameter:i.parameter,inputParameters:S,dataType:i.dataType,fn:function(I){for(var g=arguments.length,_=Array(g>1?g-1:0),R=1;g>R;R++)_[R-1]=arguments[R];var M=S.map(function(q,N){return _[N].get(I)});return M.some(function(q){return null===q})?null:U.apply(void 0,yt(M))}};return Mr(A,W)},mt.withParameters=me,mt.withCategories=function we(A,i,C,S){if(Re(A),C.categories.some(function(jt){return!jt.id}))throw new Error('At least one category object is missing the "id" property');var j=Ge(A.parameters),U=Ge(j.get(i));j.set(i,U),j.get(i).observedProperty=C;var W=A.parameters.get(i).categoryEncoding,I=new Map,g=C.categories,_=!0,R=!1,M=void 0;try{for(var q,N=g[Symbol.iterator]();!(_=(q=N.next()).done);_=!0){var J=q.value,Q=[],nt=!0,et=!1,V=void 0;try{for(var Z,st=S[Symbol.iterator]();!(nt=(Z=st.next()).done);nt=!0){var bt=K(Z.value,2),Tt=bt[0];bt[1]===J.id&&W.has(Tt)&&Q.push.apply(Q,yt(W.get(Tt)))}}catch(jt){et=!0,V=jt}finally{try{!nt&&st.return&&st.return()}finally{if(et)throw V}}Q.length>0&&I.set(J.id,Q)}}catch(jt){R=!0,M=jt}finally{try{!_&&N.return&&N.return()}finally{if(R)throw M}}return j.get(i).categoryEncoding=I,me(A,j)},mt.withDomainType=function Ae(A,i){Re(A);var C=function(j){return{type:Ye,domainType:i,axes:j.axes,referencing:j.referencing}};return{type:Xe,domainType:i,parameters:A.parameters,loadDomain:function(){return A.loadDomain().then(C)},loadRange:function(j){return A.loadRange(j)},loadRanges:function(j){return A.loadRanges(j)},subsetByIndex:function(j){return A.subsetByIndex(j).then(function(U){return Ae(U,i)})},subsetByValue:function(j){return A.subsetByValue(j).then(function(U){return Ae(U,i)})}}},mt.asCovJSONDomainType=function cr(A){return A.loadDomain().then(function(i){})},mt.renameAxes=function _r(A,i){Re(A),i=new Map(i);var C=!0,S=!1,j=void 0;try{for(var U,W=A.axes.keys()[Symbol.iterator]();!(C=(U=W.next()).done);C=!0){var I=U.value;i.has(I)||i.set(I,I)}}catch(J){S=!0,j=J}finally{try{!C&&W.return&&W.return()}finally{if(S)throw j}}var g=function(J){var Q=new Map,nt=!0,et=!1,V=void 0;try{for(var Z,st=i[Symbol.iterator]();!(nt=(Z=st.next()).done);nt=!0){var bt=K(Z.value,2),ht=bt[1],ft=J.axes.get(bt[0]),Wt=ft.values,zt=ft.bounds,At={key:ht,dataType:ft.dataType,coordinates:ft.coordinates.map(function(Ht){return i.has(Ht)?i.get(Ht):Ht}),values:Wt,bounds:zt};Q.set(ht,At)}}catch(Ht){et=!0,V=Ht}finally{try{!nt&&st.return&&st.return()}finally{if(et)throw V}}var Ft=J.referencing.map(function(Ht){var oe=Ht.system;return{coordinates:Ht.coordinates.map(function(de){return i.has(de)?i.get(de):de}),system:oe}});return{type:Ye,domainType:J.domainType,axes:Q,referencing:Ft}},_=[].concat(yt(i)).map(function(J){var Q=K(J,2);return"['"+Q[0]+"']:obj['"+Q[1]+"']"}).join(","),R=function(J){var Q=new Function("range","return function get (obj){return range.get({"+_+"})}")(J);return{shape:new Map([].concat(yt(J.shape)).map(function(et){var V=K(et,2),st=V[1];return[i.get(V[0]),st]})),dataType:J.dataType,get:Q}};return{type:Xe,domainType:A.domainType,parameters:A.parameters,loadDomain:function(){return A.loadDomain().then(g)},loadRange:function(J){return A.loadRange(J).then(R)},loadRanges:function(J){return A.loadRanges(J).then(function(Q){return new Map([].concat(yt(Q)).map(function(nt){var et=K(nt,2);return[et[0],R(et[1])]}))})},subsetByIndex:function(J){return A.subsetByIndex(J).then(function(Q){return _r(Q,i)})},subsetByValue:function(J){return A.subsetByValue(J).then(function(Q){return _r(Q,i)})}}},mt.mapRange=function Er(A,i,C,S){Re(A);var j=function(g){return{shape:g.shape,dataType:S||g.dataType,get:function(R){return C(R,g)}}};return{type:Xe,domainType:A.domainType,parameters:A.parameters,loadDomain:function(){return A.loadDomain()},loadRange:function(g){return i===g?A.loadRange(g).then(j):A.loadRange(g)},loadRanges:function(g){return A.loadRanges(g).then(function(_){return new Map([].concat(yt(_)).map(function(R){var M=K(R,2),q=M[0],N=M[1];return[q,i===q?j(N):N]}))})},subsetByIndex:function(g){return A.subsetByIndex(g).then(function(_){return Er(_,i,C,S)})},subsetByValue:function(g){return A.subsetByValue(g).then(function(_){return Er(_,i,C,S)})}}},mt.withDerivedParameter=Mr,mt.addCollectionQueryFunction=function ni(A){if(A.paging)throw new Error("Paged collections not supported");A.query=function(){return new jn(A)}},mt.CollectionQuery=jn})(this.CovUtils=this.CovUtils||{}),function(mt){"use strict";function Bt(P,t){if(0===P.length)throw new Error("Array must have at least one element");var v=-1,u=P.length;if(1===P.length||P[0]<P[1])for(;u-v>1;){var x=Math.round((v+u)/2);P[x]<=t?v=x:u=x}else for(;u-v>1;){var O=Math.round((v+u)/2);P[O]>=t?v=O:u=O}return P[v]===t&&(u=v),-1===v&&(v=u),u===P.length&&(u=v),[v,u]}function hr(P,t){var v=Bt(P,t),u=v[0],r=v[1];return Math.abs(t-P[u])<=Math.abs(t-P[r])?u:r}function xe(P){var t=arguments.length<=1||void 0===arguments[1]?$:arguments[1];if(t in P)return t;var v=t.split("-")[0],u=Object.keys(P).filter(function(r){return v===r.split("-")[0]});return u.length?u[0]:Object.keys(P)[0]}function Jr(P){return P[xe(P,arguments.length<=1||void 0===arguments[1]?$:arguments[1])]}function Nr(P,t){var v=[].concat(wt(P.shape));v.sort(function(w,k){return Mt(w,2)[1]-Mt(k,2)[1]});var u="var obj = {}",r="",x=!0,O=!1,b=void 0;try{for(var o,s=v[Symbol.iterator]();!(x=(o=s.next()).done);x=!0){var m=Mt(o.value,2),a=m[0];u+="\n      for (var i"+a+"=0; i"+a+" < "+m[1]+"; ++i"+a+") {\n        obj['"+a+"'] = i"+a+"\n    ",r+="}"}}catch(w){O=!0,b=w}finally{try{!x&&s.return&&s.return()}finally{if(O)throw b}}u+="\n    fn(get(obj))\n  ",new Function("return function iterRange (get, fn) { "+u+" "+r+" }")()(P.get,t)}function yr(P){return P.type===He}function Re(P){if(!yr(P))throw new Error("must be a Coverage")}function vr(P){return P.type===ir}function Dr(P){if(!vr(P))throw new Error("must be a Domain")}function dt(P,t){return P(t={exports:{}},t.exports),t.exports}function ur(P,t){return P.referencing.find(function(u){return-1!==u.coordinates.indexOf(t)})}function Ve(P){return P.referencing.find(function(u){return-1!==["GeodeticCRS","GeographicCRS","GeocentricCRS","ProjectedCRS"].indexOf(u.system.type)})}function Sr(P){return"GeographicCRS"===P.type||-1!==A.indexOf(P.id)}function lr(P){if(P.referencing.some(function(x){return Sr(x.system)}))return function ei(P){var t=P.referencing.find(function(ae){return Sr(ae.system)}),v=i[t.system.id];if(v>1)throw new Error;var u=t.coordinates[v],r=void 0,x=void 0;if(P.axes.has(u)){var b=P.axes.get(u).values;if((r=b[0])>(x=b[b.length-1])){var o=[x,r];r=o[0],x=o[1]}}else{var m=[].concat(wt(P.axes.values())).find(function(ae){return-1!==ae.coordinates.indexOf(u)}),a=m.coordinates.indexOf(u);if(r=1/0,x=-1/0,m.dataType===Hr){var f=!0,d=!1,w=void 0;try{for(var k,G=m.values[Symbol.iterator]();!(f=(k=G.next()).done);f=!0){var h=k.value[a];r=Math.min(h,r),x=Math.max(h,x)}}catch(ae){d=!0,w=ae}finally{try{!f&&G.return&&G.return()}finally{if(d)throw w}}}else{if(m.dataType!==ai)throw new Error("Unsupported data type: "+m.dataType);var p=!0,l=!1,c=void 0;try{for(var T,E=m.values[Symbol.iterator]();!(p=(T=E.next()).done);p=!0){var z=T.value,rt=!0,ot=!1,vt=void 0;try{for(var _t,kt=z[Symbol.iterator]();!(rt=(_t=kt.next()).done);rt=!0){var Gt=_t.value,$t=!0,Vt=!1,Kt=void 0;try{for(var se,ve=Gt[Symbol.iterator]();!($t=(se=ve.next()).done);$t=!0){var Le=se.value[a];r=Math.min(Le,r),x=Math.max(Le,x)}}catch(ae){Vt=!0,Kt=ae}finally{try{!$t&&ve.return&&ve.return()}finally{if(Vt)throw Kt}}}}catch(ae){ot=!0,vt=ae}finally{try{!rt&&kt.return&&kt.return()}finally{if(ot)throw vt}}}}catch(ae){l=!0,c=ae}finally{try{!p&&E.return&&E.return()}finally{if(l)throw c}}}}var Pe=(x+r)/2,We=Pe-180,je=Pe+180;return{project:function(ae){var Wr,Rr=ae.lon,xi=ae.lat;Wr=Rr>=We&&je>=Rr?Rr:((Rr-We)%360+360)%360+We;var wi=Mt(0===v?[Wr,xi]:[xi,Wr],2);return{x:wi[0],y:wi[1]}},unproject:function(ae){var Rr=ae.x,xi=ae.y,ti=Mt(0===v?[Rr,xi]:[xi,Rr],2);return{lon:ti[0],lat:ti[1]}}}}(P);var v=Ve(P);if(!v)throw new Error("No horizontal CRS found in coverage domain");var u=v.system.id,r=On(u);if(!r)throw new Error("Projection "+u+" not cached in uriproj, use loadProjection() instead");return rr(r)}function er(P){return Ve(P).coordinates}function rr(P){return{project:function(t){var r=P.forward([t.lon,t.lat]),x=Mt(r,2);return{x:x[0],y:x[1]}},unproject:function(t){var r=P.inverse([t.x,t.y]),x=Mt(r,2);return{lon:x[0],lat:x[1]}}}}function fr(P,t){if(!mr(P,t))throw new Error("'"+t+"' is not a longitude axis");var v=P.axes.get(t).values,u=v[0],r=v[v.length-1];if(u>r){var x=[r,u];u=x[0],r=x[1]}var O=(r+u)/2,b=O-180,o=O+180;return function(s){return s>=b&&o>=s?s:((s-b)%360+360)%360+b}}function mr(P,t){var v=ur(P,t);if(!v)return!1;var u=v.system.id;if(-1===A.indexOf(u))return!1;var r=v.coordinates.indexOf(t);return i[u]===r}function br(P,t){var v=P.axes.get(t).values[0];return"string"==typeof v&&!isNaN(new Date(v).getTime())}function Ne(P){var t=void 0,v=!1;if("string"==typeof P?t=new Date(P).getTime():P instanceof Date?t=P.getTime():v=!0,isNaN(t)&&(v=!0),v)throw new Error("Invalid date: "+P);return t}function gr(P,t){var v={};for(var u in t)if(P.axes.has(u)&&null!=t[u]){if("number"==typeof t[u]){var r=t[u];v[u]={start:r,stop:r+1}}else v[u]=t[u];var x=v[u],O=x.start,b=void 0===O?0:O,o=x.stop,s=void 0===o?P.axes.get(u).values.length:o,m=x.step,a=void 0===m?1:m;if(0>=a)throw new Error("Invalid constraint for "+u+": step="+a+" must be > 0");if(b>=s||0>b)throw new Error("Invalid constraint for "+u+": stop="+s+" must be > start="+b+" and both >= 0");v[u]={start:b,stop:s,step:a}}var f=!0,d=!1,w=void 0;try{for(var k,G=P.axes.keys()[Symbol.iterator]();!(f=(k=G.next()).done);f=!0){var B=k.value;if(!(B in v)){var h=P.axes.get(B).values.length;v[B]={start:0,stop:h,step:1}}}}catch(p){d=!0,w=p}finally{try{!f&&G.return&&G.return()}finally{if(d)throw w}}return v}function Or(P,t){t=gr(P,t);var v={type:ir,domainType:P.domainType,axes:new Map(P.axes),referencing:P.referencing},u=!0,r=!1,x=void 0;try{for(var O,b=function(){var s=O.value,m=P.axes.get(s),a=m.values,f=m.bounds,d=t[s],w=void 0,k=void 0,G=d.start,B=d.stop,h=d.step;if(0===G&&B===a.length&&1===h)w=a,k=f;else if(1===h)w=a.subarray?a.subarray(G,B):a.slice(G,B),f&&(k={get:function(rt){return f.get(G+rt)}});else{var p=Math.trunc((B-G)/h);w=new a.constructor(p+(B-G)%h);for(var T=G,E=0;B>T;T+=h,E++)w[E]=a[T];f&&(k={get:function(rt){return f.get(G+rt*h)}})}v.axes.set(s,{dataType:m.dataType,coordinates:m.coordinates,values:w,bounds:k})},o=Object.keys(t)[Symbol.iterator]();!(u=(O=o.next()).done);u=!0)b()}catch(s){r=!0,x=s}finally{try{!u&&o.return&&o.return()}finally{if(r)throw x}}return v}function Cr(P,t){return P.loadDomain().then(function(v){t=gr(v,t);var u=Or(v,t),r=function(o){var s={dataType:o.dataType,get:function(B){var h={},p=!0,l=!1,c=void 0;try{for(var T,E=Object.keys(B)[Symbol.iterator]();!(p=(T=E.next()).done);p=!0){var z=T.value,rt=t[z];h[z]=rt.start+B[z]*rt.step}}catch(_t){l=!0,c=_t}finally{try{!p&&E.return&&E.return()}finally{if(l)throw c}}return o.get(h)}};s.shape=new Map;var m=!0,a=!1,f=void 0;try{for(var d,w=v.axes.keys()[Symbol.iterator]();!(m=(d=w.next()).done);m=!0){var k=d.value,G=u.axes.get(k).values.length;s.shape.set(k,G)}}catch(B){a=!0,f=B}finally{try{!m&&w.return&&w.return()}finally{if(a)throw f}}return s},b={type:He,domainType:P.domainType,parameters:P.parameters,loadDomain:function(){return Promise.resolve(u)},loadRange:function(o){return P.loadRange(o).then(r)},loadRanges:function(o){return P.loadRanges(o).then(function(s){return new Map([].concat(wt(s)).map(function(m){var a=Mt(m,2);return[a[0],r(a[1])]}))})}};return b.subsetByIndex=Cr.bind(null,b),b.subsetByValue=xr.bind(null,b),b})}function xr(P,t){return P.loadDomain().then(function(v){var u={},r=!0,x=!1,O=void 0;try{for(var b,o=Object.keys(t)[Symbol.iterator]();!(r=(b=o.next()).done);r=!0){var s=b.value,m=t[s];if(null!=m&&v.axes.has(s)){var f=v.axes.get(s).values,d=br(v,s),w=mr(v,s),k=w?fr(v,s):void 0;if("number"==typeof m||"string"==typeof m||m instanceof Date){var B,G=m;if(d?(G=Ne(G),f=f.map(function(se){return new Date(se).getTime()})):w&&(G=k(G)),-1===(B=f.indexOf?f.indexOf(G):Array.prototype.indexOf.call(f,G)))throw new Error("Domain value not found: "+m);u[s]=B}else if("target"in m){var h=m.target;if(d)h=Ne(h),f=f.map(function(se){return new Date(se).getTime()});else if(w)h=k(h);else if("number"!=typeof f[0]||"number"!=typeof h)throw new Error("Invalid axis or constraint value type");var p=hr(f,h);u[s]=p}else{if(!("start"in m)||!("stop"in m))throw new Error("Invalid subset constraints");var l=m.start,c=m.stop;if(d){var T=[Ne(l),Ne(c)];l=T[0],c=T[1],f=f.map(function(se){return new Date(se).getTime()})}else if(w){var E=[k(l),k(c)];l=E[0],c=E[1]}else if("number"!=typeof f[0]||"number"!=typeof l)throw new Error("Invalid axis or constraint value type");var z=Bt(f,l),rt=Mt(z,2),ot=rt[0],vt=rt[1],_t=Bt(f,c),kt=Mt(_t,2),Gt=kt[0],$t=kt[1],Vt=Math.min(ot,vt,Gt,$t),Kt=Math.max(ot,vt,Gt,$t)+1;u[s]={start:Vt,stop:Kt}}}}}catch(se){x=!0,O=se}finally{try{!r&&o.return&&o.return()}finally{if(x)throw O}}return P.subsetByIndex(u)})}function _e(P){Re(P),P.subsetByIndex=Cr.bind(null,P),P.subsetByValue=xr.bind(null,P)}function Me(P){Re(P),P.loadRanges=function t(v){return v||(v=P.parameters.keys()),Promise.all([].concat(wt(v)).map(P.loadRange)).then(function(u){return new Map(v.map(function(r,x){return[r,u[x]]}))})}}function Ge(P){var t=void 0;if(P instanceof Map)t=new Map(P);else for(var v in t=Object.create(Object.getPrototypeOf(P)),P)t[v]=P[v];return t}function me(P,t){return{type:He,domainType:P.domainType,parameters:t,loadDomain:function(){return P.loadDomain()},loadRange:function(u){return P.loadRange(u)},loadRanges:function(u){return P.loadRanges(u)},subsetByIndex:function(u){return P.subsetByIndex(u).then(function(r){return me(r,t)})},subsetByValue:function(u){return P.subsetByValue(u).then(function(r){return me(r,t)})}}}function Er(P,t,v,u){Re(P);var r=function(o){return{shape:o.shape,dataType:u||o.dataType,get:function(m){return v(m,o)}}};return{type:He,domainType:P.domainType,parameters:P.parameters,loadDomain:function(){return P.loadDomain()},loadRange:function(o){return t===o?P.loadRange(o).then(r):P.loadRange(o)},loadRanges:function(o){return P.loadRanges(o).then(function(s){return new Map([].concat(wt(s)).map(function(m){var a=Mt(m,2),f=a[0],d=a[1];return[f,t===f?r(d):d]}))})},subsetByIndex:function(o){return P.subsetByIndex(o).then(function(s){return Er(s,t,v,u)})},subsetByValue:function(o){return P.subsetByValue(o).then(function(s){return Er(s,t,v,u)})}}}function Mr(P,t){Re(P);var v=t.parameter,u=t.inputParameters,r=t.dataType,x=void 0===r?"float":r,O=t.fn,b=new Map(P.parameters);b.set(v.key,v);var m={type:He,domainType:P.domainType,parameters:b,loadDomain:function(){return P.loadDomain()},loadRange:function(a){return v.key===a?P.loadRanges(u).then(function(a){var f=u.map(function(k){return a.get(k)});return{shape:f[0].shape,dataType:x,get:function(k){return O.apply(void 0,[k].concat(wt(f)))}}}):P.loadRange(a)},subsetByIndex:function(a){return P.subsetByIndex(a).then(function(f){return Mr(f,t)})},subsetByValue:function(a){return P.subsetByValue(a).then(function(f){return Mr(f,t)})}};return Me(m),m}function Ar(P,t){var v=!0,u=!1,r=void 0;try{for(var x,O=Object.keys(P)[Symbol.iterator]();!(v=(x=O.next()).done);v=!0){var b=x.value;t[b]=P[b]}}catch(o){u=!0,r=o}finally{try{!v&&O.return&&O.return()}finally{if(u)throw r}}}function Ye(P){for(var v=arguments.length<=1||void 0===arguments[1]||!arguments[1]?zt:Ft,u=0;u<P.length;u++){var r=v(P[u]);(0===u&&0>r||u>0&&r>0)&&P[u].reverse()}}function Xe(P){var t=P.map(qt),v=P.length;return function(u){for(var r=0;v>r;r++)if(t[r](u)<=0)return r;return-1}}var ir="Domain",He="Coverage",qr=He+"Collection",pr="http://covjson.org/def/core#",Hr=pr+"tuple",ai=pr+"polygon",$="en",ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol?"symbol":typeof P},K=function(P,t){if(!(P instanceof t))throw new TypeError("Cannot call a class as a function")},yt=function(){function P(t,v){for(var u=0;u<v.length;u++){var r=v[u];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,v,u){return v&&P(t.prototype,v),u&&P(t,u),t}}(),pt=function(P,t,v){return t in P?Object.defineProperty(P,t,{value:v,enumerable:!0,configurable:!0,writable:!0}):P[t]=v,P},Mt=function(t,v){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function P(t,v){var u=[],r=!0,x=!1,O=void 0;try{for(var b,o=t[Symbol.iterator]();!(r=(b=o.next()).done)&&(u.push(b.value),!v||u.length!==v);r=!0);}catch(s){x=!0,O=s}finally{try{!r&&o.return&&o.return()}finally{if(x)throw O}}return u}(t,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")},wt=function(P){if(Array.isArray(P)){for(var t=0,v=Array(P.length);t<P.length;t++)v[t]=P[t];return v}return Array.from(P)},Ot=dt(function(P){P.exports=function(t,v,u,r,x){var O,b;O=t/v;for(var o=0;15>o;o++)if(O+=b=(t-(v*O-u*Math.sin(2*O)+r*Math.sin(4*O)-x*Math.sin(6*O)))/(v-2*u*Math.cos(2*O)+4*r*Math.cos(4*O)-6*x*Math.cos(6*O)),Math.abs(b)<=1e-10)return O;return NaN}}),It=Ot&&"object"==typeof Ot&&"default"in Ot?Ot.default:Ot,Nt=dt(function(P){P.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}}),Rt=Nt&&"object"==typeof Nt&&"default"in Nt?Nt.default:Nt,te=dt(function(P){P.exports=function(t,v,u){var r=v*u;return t/Math.sqrt(1-r*r)}}),Ct=te&&"object"==typeof te&&"default"in te?te.default:te,ue=dt(function(P){P.exports=function(t){return t*t*t*(35/3072)}}),re=ue&&"object"==typeof ue&&"default"in ue?ue.default:ue,fe=dt(function(P){P.exports=function(t){return.05859375*t*t*(1+.75*t)}}),Ut=fe&&"object"==typeof fe&&"default"in fe?fe.default:fe,Zt=dt(function(P){P.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}}),ce=Zt&&"object"==typeof Zt&&"default"in Zt?Zt.default:Zt,Oe=dt(function(P){P.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}}),ke=Oe&&"object"==typeof Oe&&"default"in Oe?Oe.default:Oe,Ue=dt(function(P){P.exports=function(t,v,u,r,x){return t*x-v*Math.sin(2*x)+u*Math.sin(4*x)-r*Math.sin(6*x)}}),De=Ue&&"object"==typeof Ue&&"default"in Ue?Ue.default:Ue,ye=dt(function(P){P.exports=function(t){return 0>t?-1:1}}),Ce=ye&&"object"==typeof ye&&"default"in ye?ye.default:ye,Qe=dt(function(P){var t=2*Math.PI,u=Ce;P.exports=function(r){return Math.abs(r)<=3.14159265359?r:r-u(r)*t}}),ge=Qe&&"object"==typeof Qe&&"default"in Qe?Qe.default:Qe,ze=dt(function(P,t){var v=ge,u=Math.PI/2,r=1e-10,x=De,O=ke,b=ce,o=Ut,s=re,m=Ct,a=Rt,f=It;t.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},t.forward=function(d){var w,k,G,B,h,p,l,c,T,E,z,rt,ot,vt,_t,kt,Gt,$t,Vt,Kt,se,ve,Le=d.x,Pe=d.y,We=Math.sin(d.y),je=Math.cos(d.y),ae=v(Le-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=r?(d.x=this.x0+this.a*(u-Pe)*Math.sin(ae),d.y=this.y0-this.a*(u-Pe)*Math.cos(ae),d):Math.abs(this.sin_p12+1)<=r?(d.x=this.x0+this.a*(u+Pe)*Math.sin(ae),d.y=this.y0+this.a*(u+Pe)*Math.cos(ae),d):($t=this.sin_p12*We+this.cos_p12*je*Math.cos(ae),Gt=(kt=Math.acos($t))/Math.sin(kt),d.x=this.x0+this.a*Gt*je*Math.sin(ae),d.y=this.y0+this.a*Gt*(this.cos_p12*We-this.sin_p12*je*Math.cos(ae)),d):(w=O(this.es),k=b(this.es),G=o(this.es),B=s(this.es),Math.abs(this.sin_p12-1)<=r?(h=this.a*x(w,k,G,B,u),p=this.a*x(w,k,G,B,Pe),d.x=this.x0+(h-p)*Math.sin(ae),d.y=this.y0-(h-p)*Math.cos(ae),d):Math.abs(this.sin_p12+1)<=r?(h=this.a*x(w,k,G,B,u),p=this.a*x(w,k,G,B,Pe),d.x=this.x0+(h+p)*Math.sin(ae),d.y=this.y0+(h+p)*Math.cos(ae),d):(l=We/je,c=m(this.a,this.e,this.sin_p12),T=m(this.a,this.e,We),E=Math.atan((1-this.es)*l+this.es*c*this.sin_p12/(T*je)),Vt=0===(z=Math.atan2(Math.sin(ae),this.cos_p12*Math.tan(E)-this.sin_p12*Math.cos(ae)))?Math.asin(this.cos_p12*Math.sin(E)-this.sin_p12*Math.cos(E)):Math.abs(Math.abs(z)-Math.PI)<=r?-Math.asin(this.cos_p12*Math.sin(E)-this.sin_p12*Math.cos(E)):Math.asin(Math.sin(ae)*Math.cos(E)/Math.sin(z)),rt=this.e*this.sin_p12/Math.sqrt(1-this.es),ot=this.e*this.cos_p12*Math.cos(z)/Math.sqrt(1-this.es),d.x=this.x0+(kt=c*Vt*(1-(Kt=Vt*Vt)*(_t=ot*ot)*(1-_t)/6+(se=Kt*Vt)/8*(vt=rt*ot)*(1-2*_t)+(ve=se*Vt)/120*(_t*(4-7*_t)-3*rt*rt*(1-7*_t))-ve*Vt/48*vt))*Math.sin(z),d.y=this.y0+kt*Math.cos(z),d))},t.inverse=function(d){var w,k,G,B,h,p,l,c,T,E,z,rt,vt,_t,kt,Gt,$t,Vt,Kt,se,ve,he;return d.x-=this.x0,d.y-=this.y0,this.sphere?(w=Math.sqrt(d.x*d.x+d.y*d.y))>2*u*this.a?void 0:(k=w/this.a,G=Math.sin(k),B=Math.cos(k),h=this.long0,Math.abs(w)<=r?p=this.lat0:(p=a(B*this.sin_p12+d.y*G*this.cos_p12/w),l=Math.abs(this.lat0)-u,h=v(Math.abs(l)<=r?this.lat0>=0?this.long0+Math.atan2(d.x,-d.y):this.long0-Math.atan2(-d.x,d.y):this.long0+Math.atan2(d.x*G,w*this.cos_p12*B-d.y*this.sin_p12*G))),d.x=h,d.y=p,d):(c=O(this.es),T=b(this.es),E=o(this.es),z=s(this.es),Math.abs(this.sin_p12-1)<=r?(rt=this.a*x(c,T,E,z,u),w=Math.sqrt(d.x*d.x+d.y*d.y),p=f((rt-w)/this.a,c,T,E,z),h=v(this.long0+Math.atan2(d.x,-1*d.y)),d.x=h,d.y=p,d):Math.abs(this.sin_p12+1)<=r?(rt=this.a*x(c,T,E,z,u),w=Math.sqrt(d.x*d.x+d.y*d.y),p=f((w-rt)/this.a,c,T,E,z),h=v(this.long0+Math.atan2(d.x,d.y)),d.x=h,d.y=p,d):(w=Math.sqrt(d.x*d.x+d.y*d.y),kt=Math.atan2(d.x,d.y),vt=m(this.a,this.e,this.sin_p12),Gt=Math.cos(kt),Kt=3*this.es*(1-(Vt=-($t=this.e*this.cos_p12*Gt)*$t/(1-this.es)))*this.sin_p12*this.cos_p12*Gt/(1-this.es),he=1-Vt*(ve=(se=w/vt)-Vt*(1+Vt)*Math.pow(se,3)/6-Kt*(1+3*Vt)*Math.pow(se,4)/24)*ve/2-se*ve*ve*ve/6,_t=Math.asin(this.sin_p12*Math.cos(ve)+this.cos_p12*Math.sin(ve)*Gt),h=v(this.long0+Math.asin(Math.sin(kt)*Math.sin(ve)/Math.cos(_t))),p=Math.atan((1-this.es*he*this.sin_p12/Math.sin(_t))*Math.tan(_t)/(1-this.es)),d.x=h,d.y=p,d))},t.names=["Azimuthal_Equidistant","aeqd"]}),Fe=ze&&"object"==typeof ze&&"default"in ze?ze.default:ze,Ie=dt(function(P,t){var v=ge,u=Math.PI/2,r=1e-10,x=Rt;t.init=function(){this.R=this.a},t.forward=function(O){var b,o,m=O.y,a=v(O.x-this.long0);Math.abs(m)<=r&&(b=this.x0+this.R*a,o=this.y0);var f=x(2*Math.abs(m/Math.PI));(Math.abs(a)<=r||Math.abs(Math.abs(m)-u)<=r)&&(b=this.x0,o=m>=0?this.y0+Math.PI*this.R*Math.tan(.5*f):this.y0+Math.PI*this.R*-Math.tan(.5*f));var d=.5*Math.abs(Math.PI/a-a/Math.PI),w=d*d,k=Math.sin(f),G=Math.cos(f),B=G/(k+G-1),p=B*(2/k-1),l=p*p,c=Math.PI*this.R*(d*(B-l)+Math.sqrt(w*(B-l)*(B-l)-(l+w)*(B*B-l)))/(l+w);0>a&&(c=-c),b=this.x0+c;var T=w+B;return c=Math.PI*this.R*(p*T-d*Math.sqrt((l+w)*(w+1)-T*T))/(l+w),o=m>=0?this.y0+c:this.y0-c,O.x=b,O.y=o,O},t.inverse=function(O){var b,o,s,m,a,f,d,w,k,G,B,h;return O.x-=this.x0,O.y-=this.y0,B=Math.PI*this.R,a=(s=O.x/B)*s+(m=O.y/B)*m,B=3*(m*m/(w=-2*(f=-Math.abs(m)*(1+a))+1+2*m*m+a*a)+(2*(d=f-2*m*m+s*s)*d*d/w/w/w-9*f*d/w/w)/27)/(k=(f-d*d/3/w)/w)/(G=2*Math.sqrt(-k/3)),Math.abs(B)>1&&(B=B>=0?1:-1),h=Math.acos(B)/3,o=O.y>=0?(-G*Math.cos(h+Math.PI/3)-d/3/w)*Math.PI:-(-G*Math.cos(h+Math.PI/3)-d/3/w)*Math.PI,b=Math.abs(s)<r?this.long0:v(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(s*s-m*m)+a*a))/2/s),O.x=b,O.y=o,O},t.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]}),Ze=Ie&&"object"==typeof Ie&&"default"in Ie?Ie.default:Ie,pe=dt(function(P){var t=Math.PI/2,v=Ce;P.exports=function(u){return Math.abs(u)<t?u:u-v(u)*Math.PI}}),be=pe&&"object"==typeof pe&&"default"in pe?pe.default:pe,$e=dt(function(P){P.exports=function(t,v,u){var r=t*v;return u/Math.sqrt(1-r*r)}}),Ee=$e&&"object"==typeof $e&&"default"in $e?$e.default:$e,or=dt(function(P,t){var v=ke,u=ce,r=Ut,x=re,O=Ee,b=De,o=ge,s=be,m=It;t.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=v(this.es),this.e1=u(this.es),this.e2=r(this.es),this.e3=x(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=O(this.e,this.sinphi,this.cosphi),this.ml1=b(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=O(this.e,this.sinphi,this.cosphi),this.ml2=b(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=b(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},t.forward=function(f){var d,w=f.x,k=f.y;if(this.sphere)d=this.a*(this.g-k);else{var G=b(this.e0,this.e1,this.e2,this.e3,k);d=this.a*(this.g-G)}var B=this.ns*o(w-this.long0),h=this.x0+d*Math.sin(B),p=this.y0+this.rh-d*Math.cos(B);return f.x=h,f.y=p,f},t.inverse=function(f){var d,w,k,G;f.x-=this.x0,f.y=this.rh-f.y+this.y0,this.ns>=0?(w=Math.sqrt(f.x*f.x+f.y*f.y),d=1):(w=-Math.sqrt(f.x*f.x+f.y*f.y),d=-1);var B=0;return 0!==w&&(B=Math.atan2(d*f.x,d*f.y)),this.sphere?(G=o(this.long0+B/this.ns),k=s(this.g-w/this.a),f.x=G,f.y=k,f):(k=m(this.g-w/this.a,this.e0,this.e1,this.e2,this.e3),G=o(this.long0+B/this.ns),f.x=G,f.y=k,f)},t.names=["Equidistant_Conic","eqdc"]}),Pr=or&&"object"==typeof or&&"default"in or?or.default:or,jr=dt(function(P,t){var v=ge;t.init=function(){},t.forward=function(r){for(var O=r.y,b=v(r.x-this.long0),o=O,s=Math.PI*Math.sin(O),m=0;;m++){var a=-(o+Math.sin(o)-s)/(1+Math.cos(o));if(o+=a,Math.abs(a)<1e-10)break}o/=2,Math.PI/2-Math.abs(O)<1e-10&&(b=0);var f=.900316316158*this.a*b*Math.cos(o)+this.x0,d=1.4142135623731*this.a*Math.sin(o)+this.y0;return r.x=f,r.y=d,r},t.inverse=function(r){var x,O;r.x-=this.x0,r.y-=this.y0,O=r.y/(1.4142135623731*this.a),Math.abs(O)>.999999999999&&(O=.999999999999),x=Math.asin(O);var b=v(this.long0+r.x/(.900316316158*this.a*Math.cos(x)));b<-Math.PI&&(b=-Math.PI),b>Math.PI&&(b=Math.PI),O=(2*x+Math.sin(2*x))/Math.PI,Math.abs(O)>1&&(O=1);var o=Math.asin(O);return r.x=b,r.y=o,r},t.names=["Mollweide","moll"]}),Ir=jr&&"object"==typeof jr&&"default"in jr?jr.default:jr,Tr=dt(function(P){P.exports=function(t,v,u,r){return r[0]*t-(u*=v)*(r[1]+(v*=v)*(r[2]+v*(r[3]+v*r[4])))}}),nr=Tr&&"object"==typeof Tr&&"default"in Tr?Tr.default:Tr,kr=dt(function(P){var t=nr;P.exports=function(r,x,O){for(var b=1/(1-x),o=r,s=20;s;--s){var m=Math.sin(o),a=1-x*m*m;if(o-=a=(t(o,m,Math.cos(o),O)-r)*(a*Math.sqrt(a))*b,Math.abs(a)<1e-10)return o}return o}}),tt=kr&&"object"==typeof kr&&"default"in kr?kr.default:kr,D=dt(function(P){var u=.046875,r=.01953125,x=.01068115234375;P.exports=function(d){var w=[];w[0]=1-d*(.25+d*(u+d*(r+d*x))),w[1]=d*(.75-d*(u+d*(r+d*x)));var k=d*d;return w[2]=k*(.46875-d*(.013020833333333334+.007120768229166667*d)),w[3]=(k*=d)*(.3645833333333333-.005696614583333333*d),w[4]=k*d*.3076171875,w}}),e=D&&"object"==typeof D&&"default"in D?D.default:D,n=dt(function(P,t){var v=ge,u=be,r=e,O=nr,b=tt,o=Math.PI/2,m=Rt;t.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=r(this.es)},t.forward=function(a){var f,d,w=a.x,k=a.y;if(w=v(w-this.long0),this.sphere){if(this.m)for(var G=this.n*Math.sin(k),B=20;B;--B){var h=(this.m*k+Math.sin(k)-G)/(this.m+Math.cos(k));if(k-=h,Math.abs(h)<1e-10)break}else k=1!==this.n?Math.asin(this.n*Math.sin(k)):k;f=this.a*this.C_x*w*(this.m+Math.cos(k)),d=this.a*this.C_y*k}else{var p=Math.sin(k),l=Math.cos(k);d=this.a*O(k,p,l,this.en),f=this.a*w*l/Math.sqrt(1-this.es*p*p)}return a.x=f,a.y=d,a},t.inverse=function(a){var f,d,w,k;return a.x-=this.x0,w=a.x/this.a,a.y-=this.y0,f=a.y/this.a,this.sphere?(f/=this.C_y,w/=this.C_x*(this.m+Math.cos(f)),this.m?f=m((this.m*f+Math.sin(f))/this.n):1!==this.n&&(f=m(Math.sin(f)/this.n)),w=v(w+this.long0),f=u(f)):(f=b(a.y/this.a,this.es,this.en),k=Math.abs(f),o>k?(k=Math.sin(f),d=this.long0+a.x*Math.sqrt(1-this.es*k*k)/(this.a*Math.cos(f)),w=v(d)):o>k-1e-10&&(w=this.long0)),a.x=w,a.y=f,a},t.names=["Sinusoidal","sinu"]}),y=n&&"object"==typeof n&&"default"in n?n.default:n,H=dt(function(P,t){var v=ge;t.init=function(){},t.forward=function(u){var x=u.y,O=v(u.x-this.long0),b=this.x0+this.a*O,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+x/2.5))*1.25;return u.x=b,u.y=o,u},t.inverse=function(u){u.x-=this.x0,u.y-=this.y0;var r=v(this.long0+u.x/this.a),x=2.5*(Math.atan(Math.exp(.8*u.y/this.a))-Math.PI/4);return u.x=r,u.y=x,u},t.names=["Miller_Cylindrical","mill"]}),F=H&&"object"==typeof H&&"default"in H?H.default:H,Y=dt(function(P,t){var v=484813681109536e-20;t.iterations=1,t.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},t.forward=function(u){var r,s=(u.y-this.lat0)/v*1e-5,m=u.x-this.long0,a=1,f=0;for(r=1;10>=r;r++)f+=this.A[r]*(a*=s);var w,k=f,G=m,B=1,h=0,p=0,l=0;for(r=1;6>=r;r++)w=h*k+B*G,p=p+this.B_re[r]*(B=B*k-h*G)-this.B_im[r]*(h=w),l=l+this.B_im[r]*B+this.B_re[r]*h;return u.x=l*this.a+this.x0,u.y=p*this.a+this.y0,u},t.inverse=function(u){var r,O,a=(u.y-this.y0)/this.a,f=(u.x-this.x0)/this.a,d=1,w=0,k=0,G=0;for(r=1;6>=r;r++)O=w*a+d*f,k=k+this.C_re[r]*(d=d*a-w*f)-this.C_im[r]*(w=O),G=G+this.C_im[r]*d+this.C_re[r]*w;for(var B=0;B<this.iterations;B++){var p,l=k,c=G,T=a,E=f;for(r=2;6>=r;r++)p=c*k+l*G,T+=(r-1)*(this.B_re[r]*(l=l*k-c*G)-this.B_im[r]*(c=p)),E+=(r-1)*(this.B_im[r]*l+this.B_re[r]*c);l=1,c=0;var z=this.B_re[1],rt=this.B_im[1];for(r=2;6>=r;r++)p=c*k+l*G,z+=r*(this.B_re[r]*(l=l*k-c*G)-this.B_im[r]*(c=p)),rt+=r*(this.B_im[r]*l+this.B_re[r]*c);var ot=z*z+rt*rt;k=(T*z+E*rt)/ot,G=(E*z-T*rt)/ot}var vt=k,_t=G,kt=1,Gt=0;for(r=1;9>=r;r++)Gt+=this.D[r]*(kt*=vt);var $t=this.lat0+Gt*v*1e5;return u.x=this.long0+_t,u.y=$t,u},t.names=["New_Zealand_Map_Grid","nzmg"]}),at=Y&&"object"==typeof Y&&"default"in Y?Y.default:Y,lt=dt(function(P,t){var v=ke,u=ce,r=Ut,x=re,O=ge,b=be,o=De,s=1e-10,m=Ct;t.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=v(this.es),this.e1=u(this.es),this.e2=r(this.es),this.e3=x(this.es),this.ml0=this.a*o(this.e0,this.e1,this.e2,this.e3,this.lat0)},t.forward=function(f){var d,w,k,B=f.y,h=O(f.x-this.long0);if(k=h*Math.sin(B),this.sphere)Math.abs(B)<=s?(d=this.a*h,w=-1*this.a*this.lat0):(d=this.a*Math.sin(k)/Math.tan(B),w=this.a*(b(B-this.lat0)+(1-Math.cos(k))/Math.tan(B)));else if(Math.abs(B)<=s)d=this.a*h,w=-1*this.ml0;else{var p=m(this.a,this.e,Math.sin(B))/Math.tan(B);d=p*Math.sin(k),w=this.a*o(this.e0,this.e1,this.e2,this.e3,B)-this.ml0+p*(1-Math.cos(k))}return f.x=d+this.x0,f.y=w+this.y0,f},t.inverse=function(f){var d,w,k,G,B,h,p,l,c;if(k=f.x-this.x0,G=f.y-this.y0,this.sphere)if(Math.abs(G+this.a*this.lat0)<=s)d=O(k/this.a+this.long0),w=0;else{var T;for(p=k*k/this.a/this.a+(h=this.lat0+G/this.a)*h,l=h,B=20;B;--B)if(l+=c=-1*(h*(l*(T=Math.tan(l))+1)-l-.5*(l*l+p)*T)/((l-h)/T-1),Math.abs(c)<=s){w=l;break}d=O(this.long0+Math.asin(k*Math.tan(l)/this.a)/Math.sin(w))}else if(Math.abs(G+this.ml0)<=s)w=0,d=O(this.long0+k/this.a);else{var E,z,rt,ot,vt;for(p=k*k/this.a/this.a+(h=(this.ml0+G)/this.a)*h,l=h,B=20;B;--B)if(vt=this.e*Math.sin(l),E=Math.sqrt(1-vt*vt)*Math.tan(l),z=this.a*o(this.e0,this.e1,this.e2,this.e3,l),rt=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(h*(E*(ot=z/this.a)+1)-ot-.5*E*(ot*ot+p))/(this.es*Math.sin(2*l)*(ot*ot+p-2*h*ot)/(4*E)+(h-ot)*(E*rt-2/Math.sin(2*l))-rt),Math.abs(c)<=s){w=l;break}E=Math.sqrt(1-this.es*Math.pow(Math.sin(w),2))*Math.tan(w),d=O(this.long0+Math.asin(k*E/this.a)/Math.sin(w))}return f.x=d,f.y=w,f},t.names=["Polyconic","poly"]}),X=lt&&"object"==typeof lt&&"default"in lt?lt.default:lt,ct=dt(function(P,t){var v=ge,u=be;t.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},t.forward=function(r){var O=r.y,b=v(r.x-this.long0),o=u(O-this.lat0);return r.x=this.x0+this.a*b*this.rc,r.y=this.y0+this.a*o,r},t.inverse=function(r){var O=r.y;return r.x=v(this.long0+(r.x-this.x0)/(this.a*this.rc)),r.y=u(this.lat0+(O-this.y0)/this.a),r},t.names=["Equirectangular","Equidistant_Cylindrical","eqc"]}),it=ct&&"object"==typeof ct&&"default"in ct?ct.default:ct,gt=dt(function(P){var t=Math.PI/2;P.exports=function(v,u){var r=1-(1-v*v)/(2*v)*Math.log((1-v)/(1+v));if(Math.abs(Math.abs(u)-r)<1e-6)return 0>u?-1*t:t;for(var x,O,b,o,s=Math.asin(.5*u),m=0;30>m;m++)if(O=Math.sin(s),b=Math.cos(s),o=v*O,s+=x=Math.pow(1-o*o,2)/(2*b)*(u/(1-v*v)-O/(1-o*o)+.5/v*Math.log((1-o)/(1+o))),Math.abs(x)<=1e-10)return s;return NaN}}),xt=gt&&"object"==typeof gt&&"default"in gt?gt.default:gt,Pt=dt(function(P){P.exports=function(t,v){var u;return t>1e-7?(1-t*t)*(v/(1-(u=t*v)*u)-.5/t*Math.log((1-u)/(1+u))):2*v}}),St=Pt&&"object"==typeof Pt&&"default"in Pt?Pt.default:Pt,Dt=dt(function(P,t){var v=ge,u=St,r=Ee,x=xt;t.init=function(){this.sphere||(this.k0=r(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},t.forward=function(O){var b,o,m=O.y,a=v(O.x-this.long0);if(this.sphere)b=this.x0+this.a*a*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(m)/Math.cos(this.lat_ts);else{var f=u(this.e,Math.sin(m));b=this.x0+this.a*this.k0*a,o=this.y0+this.a*f*.5/this.k0}return O.x=b,O.y=o,O},t.inverse=function(O){var b,o;return O.x-=this.x0,O.y-=this.y0,this.sphere?(b=v(this.long0+O.x/this.a/Math.cos(this.lat_ts)),o=Math.asin(O.y/this.a*Math.cos(this.lat_ts))):(o=x(this.e,2*O.y*this.k0/this.a),b=v(this.long0+O.x/(this.a*this.k0))),O.x=b,O.y=o,O},t.names=["cea"]}),Lt=Dt&&"object"==typeof Dt&&"default"in Dt?Dt.default:Dt,ie=dt(function(P,t){var v=ge,r=Rt;t.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},t.forward=function(x){var O,b,o,s,a,f,d,k=x.y;return o=v(x.x-this.long0),O=Math.sin(k),b=Math.cos(k),s=Math.cos(o),(a=this.sin_p14*O+this.cos_p14*b*s)>0||Math.abs(a)<=1e-10?(f=this.x0+1*this.a*b*Math.sin(o)/a,d=this.y0+1*this.a*(this.cos_p14*O-this.sin_p14*b*s)/a):(f=this.x0+this.infinity_dist*b*Math.sin(o),d=this.y0+this.infinity_dist*(this.cos_p14*O-this.sin_p14*b*s)),x.x=f,x.y=d,x},t.inverse=function(x){var O,b,o,s,m,a;return x.x=(x.x-this.x0)/this.a,x.y=(x.y-this.y0)/this.a,x.x/=this.k0,x.y/=this.k0,(O=Math.sqrt(x.x*x.x+x.y*x.y))?(s=Math.atan2(O,this.rc),b=Math.sin(s),o=Math.cos(s),a=r(o*this.sin_p14+x.y*b*this.cos_p14/O),m=Math.atan2(x.x*b,O*this.cos_p14*o-x.y*this.sin_p14*b),m=v(this.long0+m)):(a=this.phic0,m=0),x.x=m,x.y=a,x},t.names=["gnom"]}),ee=ie&&"object"==typeof ie&&"default"in ie?ie.default:ie,ne=dt(function(P,t){var v=1e-10,u=Ee,r=St,x=ge,O=Rt;t.init=function(){Math.abs(this.lat1+this.lat2)<v||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=u(this.e3,this.sin_po,this.cos_po),this.qs1=r(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=u(this.e3,this.sin_po,this.cos_po),this.qs2=r(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=r(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>v?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},t.forward=function(b){var o=b.x,s=b.y;this.sin_phi=Math.sin(s),this.cos_phi=Math.cos(s);var m=r(this.e3,this.sin_phi,this.cos_phi),a=this.a*Math.sqrt(this.c-this.ns0*m)/this.ns0,f=this.ns0*x(o-this.long0),d=a*Math.sin(f)+this.x0,w=this.rh-a*Math.cos(f)+this.y0;return b.x=d,b.y=w,b},t.inverse=function(b){var o,m,a,f,d;return b.x-=this.x0,b.y=this.rh-b.y+this.y0,this.ns0>=0?(o=Math.sqrt(b.x*b.x+b.y*b.y),m=1):(o=-Math.sqrt(b.x*b.x+b.y*b.y),m=-1),a=0,0!==o&&(a=Math.atan2(m*b.x,m*b.y)),m=o*this.ns0/this.a,d=this.sphere?Math.asin((this.c-m*m)/(2*this.ns0)):this.phi1z(this.e3,(this.c-m*m)/this.ns0),f=x(a/this.ns0+this.long0),b.x=f,b.y=d,b},t.phi1z=function(b,o){var s,a,f,d,w=O(.5*o);if(v>b)return w;for(var k=b*b,G=1;25>=G;G++)if(w+=d=.5*(f=1-(a=b*(s=Math.sin(w)))*a)*f/Math.cos(w)*(o/(1-k)-s/f+.5/b*Math.log((1-a)/(1+a))),Math.abs(d)<=1e-7)return w;return null},t.names=["Albers_Conic_Equal_Area","Albers","aea"]}),Qt=ne&&"object"==typeof ne&&"default"in ne?ne.default:ne,Se=dt(function(P,t){var v=Math.PI/2,u=Math.PI/4,r=1e-10,x=St,O=ge;t.S_POLE=1,t.N_POLE=2,t.EQUIT=3,t.OBLIQ=4,t.init=function(){var o,b=Math.abs(this.lat0);if(this.mode=Math.abs(b-v)<r?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(b)<r?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=x(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),o=Math.sin(this.lat0),this.sinb1=x(this.e,o)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*o*o)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},t.forward=function(b){var o,s,m,a,f,d,w,k,G,B,h=b.x,p=b.y;if(h=O(h-this.long0),this.sphere){if(f=Math.sin(p),B=Math.cos(p),m=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r>=(s=this.mode===this.EQUIT?1+B*m:1+this.sinph0*f+this.cosph0*B*m))return null;o=(s=Math.sqrt(2/s))*B*Math.sin(h),s*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*B*m}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),Math.abs(p+this.phi0)<r)return null;s=u-.5*p,o=(s=2*(this.mode===this.S_POLE?Math.cos(s):Math.sin(s)))*Math.sin(h),s*=m}}else{switch(w=0,k=0,G=0,m=Math.cos(h),a=Math.sin(h),f=Math.sin(p),d=x(this.e,f),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(w=d/this.qp,k=Math.sqrt(1-w*w)),this.mode){case this.OBLIQ:G=1+this.sinb1*w+this.cosb1*k*m;break;case this.EQUIT:G=1+k*m;break;case this.N_POLE:G=v+p,d=this.qp-d;break;case this.S_POLE:G=p-v,d=this.qp+d}if(Math.abs(G)<r)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:G=Math.sqrt(2/G),s=this.mode===this.OBLIQ?this.ymf*G*(this.cosb1*w-this.sinb1*k*m):(G=Math.sqrt(2/(1+k*m)))*w*this.ymf,o=this.xmf*G*k*a;break;case this.N_POLE:case this.S_POLE:d>=0?(o=(G=Math.sqrt(d))*a,s=m*(this.mode===this.S_POLE?G:-G)):o=s=0}}return b.x=this.a*o+this.x0,b.y=this.a*s+this.y0,b},t.inverse=function(b){b.x-=this.x0,b.y-=this.y0;var o,s,m,a,f,d,w,k=b.x/this.a,G=b.y/this.a;if(this.sphere){var B,h=0,p=0;if((s=.5*(B=Math.sqrt(k*k+G*G)))>1)return null;switch(s=2*Math.asin(s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(s),h=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(B)<=r?0:Math.asin(G*p/B),k*=p,G=h*B;break;case this.OBLIQ:s=Math.abs(B)<=r?this.phi0:Math.asin(h*this.sinph0+G*p*this.cosph0/B),k*=p*this.cosph0,G=(h-Math.sin(s)*this.sinph0)*B;break;case this.N_POLE:G=-G,s=v-s;break;case this.S_POLE:s-=v}o=0!==G||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(k,G):0}else{if(w=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(k/=this.dd,G*=this.dd,d=Math.sqrt(k*k+G*G),r>d)return b.x=0,b.y=this.phi0,b;a=2*Math.asin(.5*d/this.rq),m=Math.cos(a),k*=a=Math.sin(a),this.mode===this.OBLIQ?(f=this.qp*(w=m*this.sinb1+G*a*this.cosb1/d),G=d*this.cosb1*m-G*this.sinb1*a):(f=this.qp*(w=G*a/d),G=d*m)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(G=-G),!(f=k*k+G*G))return b.x=0,b.y=this.phi0,b;w=1-f/this.qp,this.mode===this.S_POLE&&(w=-w)}o=Math.atan2(k,G),s=this.authlat(Math.asin(w),this.apa)}return b.x=O(this.long0+o),b.y=s,b},t.P00=.3333333333333333,t.P01=.17222222222222222,t.P02=.10257936507936508,t.P10=.06388888888888888,t.P11=.0664021164021164,t.P20=.016415012942191543,t.authset=function(b){var o,s=[];return s[0]=b*this.P00,s[0]+=(o=b*b)*this.P01,s[1]=o*this.P10,s[0]+=(o*=b)*this.P02,s[1]+=o*this.P11,s[2]=o*this.P20,s},t.authlat=function(b,o){var s=b+b;return b+o[0]*Math.sin(s)+o[1]*Math.sin(s+s)+o[2]*Math.sin(s+s+s)},t.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]}),qe=Se&&"object"==typeof Se&&"default"in Se?Se.default:Se,Te=dt(function(P,t){var v=De,u=ke,r=ce,x=Ut,O=re,b=Ct,o=ge,s=be,m=It,a=Math.PI/2;t.init=function(){this.sphere||(this.e0=u(this.es),this.e1=r(this.es),this.e2=x(this.es),this.e3=O(this.es),this.ml0=this.a*v(this.e0,this.e1,this.e2,this.e3,this.lat0))},t.forward=function(d){var w,k,G=d.x,B=d.y;if(G=o(G-this.long0),this.sphere)w=this.a*Math.asin(Math.cos(B)*Math.sin(G)),k=this.a*(Math.atan2(Math.tan(B),Math.cos(G))-this.lat0);else{var h=Math.sin(B),p=Math.cos(B),l=b(this.a,this.e,h),c=Math.tan(B)*Math.tan(B),T=G*Math.cos(B),E=T*T,z=this.es*p*p/(1-this.es);w=l*T*(1-E*c*(1/6-(8-c+8*z)*E/120)),k=this.a*v(this.e0,this.e1,this.e2,this.e3,B)-this.ml0+l*h/p*E*(.5+(5-c+6*z)*E/24)}return d.x=w+this.x0,d.y=k+this.y0,d},t.inverse=function(d){d.x-=this.x0,d.y-=this.y0;var w,k,G=d.x/this.a,B=d.y/this.a;if(this.sphere){var h=B+this.lat0;w=Math.asin(Math.sin(h)*Math.cos(G)),k=Math.atan2(Math.tan(G),Math.cos(h))}else{var l=m(this.ml0/this.a+B,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-a)<=1e-10)return d.x=this.long0,d.y=a,0>B&&(d.y*=-1),d;var c=b(this.a,this.e,Math.sin(l)),T=c*c*c/this.a/this.a*(1-this.es),E=Math.pow(Math.tan(l),2),z=G*this.a/c,rt=z*z;w=l-c*Math.tan(l)/T*z*z*(.5-(1+3*E)*z*z/24),k=z*(1-rt*(E/3+(1+3*E)*E*rt/15))/Math.cos(l)}return d.x=o(k+this.long0),d.y=s(w),d},t.names=["Cassini","Cassini_Soldner","cass"]}),Yt=Te&&"object"==typeof Te&&"default"in Te?Te.default:Te,Be=dt(function(P,t){var v=ge;t.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},t.forward=function(u){var r,x,O,b,o,s,m,f=u.y,d=v(u.x-this.long0);return r=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),x=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/r)-this.s45),O=-d*this.alfa,b=Math.asin(Math.cos(this.ad)*Math.sin(x)+Math.sin(this.ad)*Math.cos(x)*Math.cos(O)),o=Math.asin(Math.cos(x)*Math.sin(O)/Math.cos(b)),s=this.n*o,m=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(b/2+this.s45),this.n),u.y=m*Math.cos(s)/1,u.x=m*Math.sin(s)/1,this.czech||(u.y*=-1,u.x*=-1),u},t.inverse=function(u){var r,x,O,b,s,m,a,f=u.x;u.x=u.y,u.y=f,this.czech||(u.y*=-1,u.x*=-1),s=Math.sqrt(u.x*u.x+u.y*u.y),b=Math.atan2(u.y,u.x)/Math.sin(this.s0),O=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),r=Math.asin(Math.cos(this.ad)*Math.sin(O)-Math.sin(this.ad)*Math.cos(O)*Math.cos(b)),x=Math.asin(Math.cos(O)*Math.sin(b)/Math.cos(r)),u.x=this.long0-x/this.alfa,m=r,a=0;var d=0;do{u.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(r/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(m))/(1-this.e*Math.sin(m)),this.e/2))-this.s45),Math.abs(m-u.y)<1e-10&&(a=1),m=u.y,d+=1}while(0===a&&15>d);return d>=15?null:u},t.names=["Krovak","krovak"]}),dr=Be&&"object"==typeof Be&&"default"in Be?Be.default:Be,ar=dt(function(P){var t=Math.PI/2;P.exports=function(v,u){for(var r,x,O=.5*v,b=t-2*Math.atan(u),o=0;15>=o;o++)if(r=v*Math.sin(b),b+=x=t-2*Math.atan(u*Math.pow((1-r)/(1+r),O))-b,Math.abs(x)<=1e-10)return b;return-9999}}),Ke=ar&&"object"==typeof ar&&"default"in ar?ar.default:ar,Lr=dt(function(P){var t=Math.PI/2;P.exports=function(v,u,r){var x=v*r;return x=Math.pow((1-x)/(1+x),.5*v),Math.tan(.5*(t-u))/x}}),tr=Lr&&"object"==typeof Lr&&"default"in Lr?Lr.default:Lr,si=dt(function(P,t){var v=1e-10,u=Ee,r=tr,x=Math.PI/2,O=Ce,b=ge,o=Ke;t.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<v)){var s=this.b/this.a;this.e=Math.sqrt(1-s*s);var m=Math.sin(this.lat1),a=Math.cos(this.lat1),f=u(this.e,m,a),d=r(this.e,this.lat1,m),w=Math.sin(this.lat2),k=Math.cos(this.lat2),G=u(this.e,w,k),B=r(this.e,this.lat2,w),h=r(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>v?Math.log(f/G)/Math.log(d/B):m,isNaN(this.ns)&&(this.ns=m),this.f0=f/(this.ns*Math.pow(d,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},t.forward=function(s){var m=s.x,a=s.y;Math.abs(2*Math.abs(a)-Math.PI)<=v&&(a=O(a)*(x-2*v));var f,d,w=Math.abs(Math.abs(a)-x);if(w>v)f=r(this.e,a,Math.sin(a)),d=this.a*this.f0*Math.pow(f,this.ns);else{if(0>=(w=a*this.ns))return null;d=0}var k=this.ns*b(m-this.long0);return s.x=this.k0*(d*Math.sin(k))+this.x0,s.y=this.k0*(this.rh-d*Math.cos(k))+this.y0,s},t.inverse=function(s){var m,a,f,d,w,k=(s.x-this.x0)/this.k0,G=this.rh-(s.y-this.y0)/this.k0;this.ns>0?(m=Math.sqrt(k*k+G*G),a=1):(m=-Math.sqrt(k*k+G*G),a=-1);var B=0;if(0!==m&&(B=Math.atan2(a*k,a*G)),0!==m||this.ns>0){if(a=1/this.ns,f=Math.pow(m/(this.a*this.f0),a),-9999===(d=o(this.e,f)))return null}else d=-x;return w=b(B/this.ns+this.long0),s.x=w,s.y=d,s},t.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]}),oi=si&&"object"==typeof si&&"default"in si?si.default:si,ji=dt(function(P,t){var v=tr,u=ge,r=Ke,x=Math.PI/2,O=Math.PI/4,b=1e-10;t.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var o=Math.sin(this.lat0),s=Math.cos(this.lat0),m=this.e*o;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(s,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-m*m);var d,w,a=v(this.e,this.lat0,o),f=this.bl/s*Math.sqrt((1-this.es)/(1-m*m));if(1>f*f&&(f=1),isNaN(this.longc)){var k=v(this.e,this.lat1,Math.sin(this.lat1)),G=v(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(f+Math.sqrt(f*f-1))*Math.pow(a,this.bl):(f-Math.sqrt(f*f-1))*Math.pow(a,this.bl);var B=Math.pow(k,this.bl),h=Math.pow(G,this.bl);w=.5*((d=this.el/B)-1/d);var p=(this.el*this.el-h*B)/(this.el*this.el+h*B),l=(h-B)/(h+B),c=u(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*c)/l)/this.bl,this.long0=u(this.long0);var T=u(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*T)/w),this.alpha=Math.asin(f*Math.sin(this.gamma0))}else d=this.lat0>=0?f+Math.sqrt(f*f-1):f-Math.sqrt(f*f-1),this.el=d*Math.pow(a,this.bl),w=.5*(d-1/d),this.gamma0=Math.asin(Math.sin(this.alpha)/f),this.long0=this.longc-Math.asin(w*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(f*f-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(f*f-1),Math.cos(this.alpha))},t.forward=function(o){var s,m,a,d=o.y,w=u(o.x-this.long0);if(Math.abs(Math.abs(d)-x)<=b)a=d>0?-1:1,m=this.al/this.bl*Math.log(Math.tan(O+a*this.gamma0*.5)),s=-1*a*x*this.al/this.bl;else{var k=v(this.e,d,Math.sin(d)),G=this.el/Math.pow(k,this.bl),B=.5*(G-1/G),h=.5*(G+1/G),p=Math.sin(this.bl*w),l=(B*Math.sin(this.gamma0)-p*Math.cos(this.gamma0))/h;m=Math.abs(Math.abs(l)-1)<=b?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-l)/(1+l))/this.bl,s=Math.abs(Math.cos(this.bl*w))<=b?this.al*this.bl*w:this.al*Math.atan2(B*Math.cos(this.gamma0)+p*Math.sin(this.gamma0),Math.cos(this.bl*w))/this.bl}return this.no_rot?(o.x=this.x0+s,o.y=this.y0+m):(s-=this.uc,o.x=this.x0+m*Math.cos(this.alpha)+s*Math.sin(this.alpha),o.y=this.y0+s*Math.cos(this.alpha)-m*Math.sin(this.alpha)),o},t.inverse=function(o){var s,m;this.no_rot?(m=o.y-this.y0,s=o.x-this.x0):(m=(o.x-this.x0)*Math.cos(this.alpha)-(o.y-this.y0)*Math.sin(this.alpha),s=(o.y-this.y0)*Math.cos(this.alpha)+(o.x-this.x0)*Math.sin(this.alpha),s+=this.uc);var a=Math.exp(-1*this.bl*m/this.al),f=.5*(a-1/a),d=.5*(a+1/a),w=Math.sin(this.bl*s/this.al),k=(w*Math.cos(this.gamma0)+f*Math.sin(this.gamma0))/d,G=Math.pow(this.el/Math.sqrt((1+k)/(1-k)),1/this.bl);return Math.abs(k-1)<b?(o.x=this.long0,o.y=x):Math.abs(k+1)<b?(o.x=this.long0,o.y=-1*x):(o.y=r(this.e,G),o.x=u(this.long0-Math.atan2(f*Math.cos(this.gamma0)-w*Math.sin(this.gamma0),Math.cos(this.bl*s/this.al))/this.bl)),o},t.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]}),ki=ji&&"object"==typeof ji&&"default"in ji?ji.default:ji,Si=dt(function(P,t){t.init=function(){var v=this.lat0;this.lambda0=this.long0;var u=Math.sin(v),r=this.a,O=1/this.rf,b=2*O-Math.pow(O,2),o=this.e=Math.sqrt(b);this.R=this.k0*r*Math.sqrt(1-b)/(1-b*Math.pow(u,2)),this.alpha=Math.sqrt(1+b/(1-b)*Math.pow(Math.cos(v),4)),this.b0=Math.asin(u/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),m=Math.log(Math.tan(Math.PI/4+v/2)),a=Math.log((1+o*u)/(1-o*u));this.K=s-this.alpha*m+this.alpha*o/2*a},t.forward=function(v){var u=Math.log(Math.tan(Math.PI/4-v.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(v.y))/(1-this.e*Math.sin(v.y))),O=2*(Math.atan(Math.exp(-this.alpha*(u+r)+this.K))-Math.PI/4),b=this.alpha*(v.x-this.lambda0),o=Math.atan(Math.sin(b)/(Math.sin(this.b0)*Math.tan(O)+Math.cos(this.b0)*Math.cos(b))),s=Math.asin(Math.cos(this.b0)*Math.sin(O)-Math.sin(this.b0)*Math.cos(O)*Math.cos(b));return v.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,v.x=this.R*o+this.x0,v},t.inverse=function(v){for(var x=(v.x-this.x0)/this.R,O=2*(Math.atan(Math.exp((v.y-this.y0)/this.R))-Math.PI/4),b=Math.asin(Math.cos(this.b0)*Math.sin(O)+Math.sin(this.b0)*Math.cos(O)*Math.cos(x)),o=Math.atan(Math.sin(x)/(Math.cos(this.b0)*Math.cos(x)-Math.sin(this.b0)*Math.tan(O))),s=this.lambda0+o/this.alpha,m=0,a=b,f=-1e3,d=0;Math.abs(a-f)>1e-7;){if(++d>20)return;m=1/this.alpha*(Math.log(Math.tan(Math.PI/4+b/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(a))/2)),f=a,a=2*Math.atan(Math.exp(m))-Math.PI/2}return v.x=s,v.y=a,v},t.names=["somerc"]}),Oi=Si&&"object"==typeof Si&&"default"in Si?Si.default:Si,Ci=dt(function(P,t){var v=Math.PI/2,u=1e-10,r=Ce,x=Ee,O=tr,b=Ke,o=ge;t.ssfn_=function(s,m,a){return m*=a,Math.tan(.5*(v+s))*Math.pow((1-m)/(1+m),.5*a)},t.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=u&&(this.k0=.5*(1+r(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=u&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=u&&(this.k0=.5*this.cons*x(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/O(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=x(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-v,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},t.forward=function(s){var m,a,f,d,w,k,G=s.x,B=s.y,h=Math.sin(B),p=Math.cos(B),l=o(G-this.long0);return Math.abs(Math.abs(G-this.long0)-Math.PI)<=u&&Math.abs(B+this.lat0)<=u?(s.x=NaN,s.y=NaN,s):this.sphere?(m=2*this.k0/(1+this.sinlat0*h+this.coslat0*p*Math.cos(l)),s.x=this.a*m*p*Math.sin(l)+this.x0,s.y=this.a*m*(this.coslat0*h-this.sinlat0*p*Math.cos(l))+this.y0,s):(a=2*Math.atan(this.ssfn_(B,h,this.e))-v,d=Math.cos(a),f=Math.sin(a),Math.abs(this.coslat0)<=u?(w=O(this.e,B*this.con,this.con*h),s.x=this.x0+(k=2*this.a*this.k0*w/this.cons)*Math.sin(G-this.long0),s.y=this.y0-this.con*k*Math.cos(G-this.long0),s):(Math.abs(this.sinlat0)<u?(m=2*this.a*this.k0/(1+d*Math.cos(l)),s.y=m*f):(m=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*d*Math.cos(l))),s.y=m*(this.cosX0*f-this.sinX0*d*Math.cos(l))+this.y0),s.x=m*d*Math.sin(l)+this.x0,s))},t.inverse=function(s){s.x-=this.x0,s.y-=this.y0;var m,a,d,w,k=Math.sqrt(s.x*s.x+s.y*s.y);if(this.sphere){var G=2*Math.atan(k/(.5*this.a*this.k0));return m=this.long0,a=this.lat0,u>=k?(s.x=m,s.y=a,s):(a=Math.asin(Math.cos(G)*this.sinlat0+s.y*Math.sin(G)*this.coslat0/k),m=o(Math.abs(this.coslat0)<u?this.lat0>0?this.long0+Math.atan2(s.x,-1*s.y):this.long0+Math.atan2(s.x,s.y):this.long0+Math.atan2(s.x*Math.sin(G),k*this.coslat0*Math.cos(G)-s.y*this.sinlat0*Math.sin(G))),s.x=m,s.y=a,s)}if(Math.abs(this.coslat0)<=u){if(u>=k)return a=this.lat0,s.x=m=this.long0,s.y=a,s;s.x*=this.con,s.y*=this.con,a=this.con*b(this.e,k*this.cons/(2*this.a*this.k0)),m=this.con*o(this.con*this.long0+Math.atan2(s.x,-1*s.y))}else d=2*Math.atan(k*this.cosX0/(2*this.a*this.k0*this.ms1)),m=this.long0,u>=k?w=this.X0:(w=Math.asin(Math.cos(d)*this.sinX0+s.y*Math.sin(d)*this.cosX0/k),m=o(this.long0+Math.atan2(s.x*Math.sin(d),k*this.cosX0*Math.cos(d)-s.y*this.sinX0*Math.sin(d)))),a=-1*b(this.e,Math.tan(.5*(v+w)));return s.x=m,s.y=a,s},t.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]}),Ei=Ci&&"object"==typeof Ci&&"default"in Ci?Ci.default:Ci,Ai=dt(function(P){P.exports=function(t,v){return Math.pow((1-t)/(1+t),v)}}),Ii=Ai&&"object"==typeof Ai&&"default"in Ai?Ai.default:Ai,Ti=dt(function(P,t){var v=Math.PI/4,u=Ii,r=Math.PI/2;t.init=function(){var O=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*O*O),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(O/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+v)/(Math.pow(Math.tan(.5*this.lat0+v),this.C)*u(this.e*O,this.ratexp))},t.forward=function(O){var b=O.x,o=O.y;return O.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*o+v),this.C)*u(this.e*Math.sin(o),this.ratexp))-r,O.x=this.C*b,O},t.inverse=function(O){for(var o=O.x/this.C,s=O.y,m=Math.pow(Math.tan(.5*s+v)/this.K,1/this.C),a=20;a>0&&(s=2*Math.atan(m*u(this.e*Math.sin(O.y),-.5*this.e))-r,!(Math.abs(s-O.y)<1e-14));--a)O.y=s;return a?(O.x=o,O.y=s,O):null},t.names=["gauss"]}),Li=Ti&&"object"==typeof Ti&&"default"in Ti?Ti.default:Ti,hi=dt(function(P,t){var v=Li,u=ge;t.init=function(){v.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},t.forward=function(r){var x,O,b,o;return r.x=u(r.x-this.long0),v.forward.apply(this,[r]),x=Math.sin(r.y),O=Math.cos(r.y),b=Math.cos(r.x),r.x=(o=this.k0*this.R2/(1+this.sinc0*x+this.cosc0*O*b))*O*Math.sin(r.x),r.y=o*(this.cosc0*x-this.sinc0*O*b),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r},t.inverse=function(r){var x,O,b,o,s;if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,s=Math.sqrt(r.x*r.x+r.y*r.y)){var m=2*Math.atan2(s,this.R2);x=Math.sin(m),O=Math.cos(m),o=Math.asin(O*this.sinc0+r.y*x*this.cosc0/s),b=Math.atan2(r.x*x,s*this.cosc0*O-r.y*this.sinc0*x)}else o=this.phic0,b=0;return r.x=b,r.y=o,v.inverse.apply(this,[r]),r.x=u(r.x+this.long0),r},t.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]}),Ri=hi&&"object"==typeof hi&&"default"in hi?hi.default:hi,Ni=dt(function(P,t){var v=ke,u=ce,r=Ut,x=re,O=De,b=ge,o=Math.PI/2,m=Ce,a=Rt;t.init=function(){this.e0=v(this.es),this.e1=u(this.es),this.e2=r(this.es),this.e3=x(this.es),this.ml0=this.a*O(this.e0,this.e1,this.e2,this.e3,this.lat0)},t.forward=function(f){var d,w,k,B=f.y,h=b(f.x-this.long0),p=Math.sin(B),l=Math.cos(B);if(this.sphere){var c=l*Math.sin(h);if(Math.abs(Math.abs(c)-1)<1e-10)return 93;w=.5*this.a*this.k0*Math.log((1+c)/(1-c)),d=Math.acos(l*Math.cos(h)/Math.sqrt(1-c*c)),0>B&&(d=-d),k=this.a*this.k0*(d-this.lat0)}else{var T=l*h,E=Math.pow(T,2),z=this.ep2*Math.pow(l,2),rt=Math.tan(B),ot=Math.pow(rt,2);d=1-this.es*Math.pow(p,2);var vt=this.a/Math.sqrt(d),_t=this.a*O(this.e0,this.e1,this.e2,this.e3,B);w=this.k0*vt*T*(1+E/6*(1-ot+z+E/20*(5-18*ot+Math.pow(ot,2)+72*z-58*this.ep2)))+this.x0,k=this.k0*(_t-this.ml0+vt*rt*(E*(.5+E/24*(5-ot+9*z+4*Math.pow(z,2)+E/30*(61-58*ot+Math.pow(ot,2)+600*z-330*this.ep2)))))+this.y0}return f.x=w,f.y=k,f},t.inverse=function(f){var d,w,k,G,B,h;if(this.sphere){var l=Math.exp(f.x/(this.a*this.k0)),c=.5*(l-1/l),T=this.lat0+f.y/(this.a*this.k0),E=Math.cos(T);d=Math.sqrt((1-E*E)/(1+c*c)),B=a(d),0>T&&(B=-B),h=0===c&&0===E?this.long0:b(Math.atan2(c,E)+this.long0)}else{var z=f.x-this.x0,rt=f.y-this.y0;for(w=d=(this.ml0+rt/this.k0)/this.a,G=0;w+=k=(d+this.e1*Math.sin(2*w)-this.e2*Math.sin(4*w)+this.e3*Math.sin(6*w))/this.e0-w,!(Math.abs(k)<=1e-10);G++)if(G>=6)return 95;if(Math.abs(w)<o){var ot=Math.sin(w),vt=Math.cos(w),_t=Math.tan(w),kt=this.ep2*Math.pow(vt,2),Gt=Math.pow(kt,2),$t=Math.pow(_t,2),Vt=Math.pow($t,2);d=1-this.es*Math.pow(ot,2);var Kt=this.a/Math.sqrt(d),se=Kt*(1-this.es)/d,ve=z/(Kt*this.k0),he=Math.pow(ve,2);B=w-Kt*_t*he/se*(.5-he/24*(5+3*$t+10*kt-4*Gt-9*this.ep2-he/30*(61+90*$t+298*kt+45*Vt-252*this.ep2-3*Gt))),h=b(this.long0+ve*(1-he/6*(1+2*$t+kt-he/20*(5-2*kt+28*$t-3*Gt+8*this.ep2+24*Vt)))/vt)}else B=o*m(rt),h=this.long0}return f.x=h,f.y=B,f},t.names=["Transverse_Mercator","Transverse Mercator","tmerc"]}),ui=Ni&&"object"==typeof Ni&&"default"in Ni?Ni.default:Ni,Di=dt(function(P,t){var u=ui;t.dependsOn="tmerc",t.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,u.init.apply(this),this.forward=u.forward,this.inverse=u.inverse)},t.names=["Universal Transverse Mercator System","utm"]}),Cn=Di&&"object"==typeof Di&&"default"in Di?Di.default:Di,qi=dt(function(P){var t=[ui,Cn,Ri,Ei,Oi,ki,oi,dr,Yt,qe,Qt,ee,Lt,it,X,at,F,y,Ir,Pr,Ze,Fe];P.exports=function(v){t.forEach(function(u){v.Proj.projections.add(u)})}}),En=qi&&"object"==typeof qi&&"default"in qi?qi.default:qi,li=dt(function(P,t){function v(E){return E*(Math.PI/180)}function u(E){return E/Math.PI*180}function x(E){var z=E.northing,rt=E.easting,ot=E.zoneLetter,vt=E.zoneNumber;if(0>vt||vt>60)return null;var _t,kt,Gt,$t,Vt,Kt,ve,he,Le,je=.00669438,ae=(1-Math.sqrt(1-je))/(1+Math.sqrt(1-je)),Rr=rt-5e5,xi=z;"N">ot&&(xi-=1e7),ve=6*(vt-1)-180+3,_t=je/(1-je),Le=(he=xi/.9996/6367449.145945056)+(3*ae/2-27*ae*ae*ae/32)*Math.sin(2*he)+(21*ae*ae/16-55*ae*ae*ae*ae/32)*Math.sin(4*he)+151*ae*ae*ae/96*Math.sin(6*he),kt=6378137/Math.sqrt(1-je*Math.sin(Le)*Math.sin(Le)),Gt=Math.tan(Le)*Math.tan(Le),$t=_t*Math.cos(Le)*Math.cos(Le),Vt=6378137*(1-je)/Math.pow(1-je*Math.sin(Le)*Math.sin(Le),1.5),Kt=Rr/(.9996*kt);var Wr=Le-kt*Math.tan(Le)/Vt*(Kt*Kt/2-(5+3*Gt+10*$t-4*$t*$t-9*_t)*Kt*Kt*Kt*Kt/24+(61+90*Gt+298*$t+45*Gt*Gt-252*_t-3*$t*$t)*Kt*Kt*Kt*Kt*Kt*Kt/720);Wr=u(Wr);var wi,ti=(Kt-(1+2*Gt+$t)*Kt*Kt*Kt/6+(5-2*$t+28*Gt-3*$t*$t+8*_t+24*Gt*Gt)*Kt*Kt*Kt*Kt*Kt/120)/Math.cos(Le);if(ti=ve+u(ti),E.accuracy){var xn=x({northing:E.northing+E.accuracy,easting:E.easting+E.accuracy,zoneLetter:E.zoneLetter,zoneNumber:E.zoneNumber});wi={top:xn.lat,right:xn.lon,bottom:Wr,left:ti}}else wi={lat:Wr,lon:ti};return wi}function O(E){var z="Z";return 84>=E&&E>=72?z="X":72>E&&E>=64?z="W":64>E&&E>=56?z="V":56>E&&E>=48?z="U":48>E&&E>=40?z="T":40>E&&E>=32?z="S":32>E&&E>=24?z="R":24>E&&E>=16?z="Q":16>E&&E>=8?z="P":8>E&&E>=0?z="N":0>E&&E>=-8?z="M":-8>E&&E>=-16?z="L":-16>E&&E>=-24?z="K":-24>E&&E>=-32?z="J":-32>E&&E>=-40?z="H":-40>E&&E>=-48?z="G":-48>E&&E>=-56?z="F":-56>E&&E>=-64?z="E":-64>E&&E>=-72?z="D":-72>E&&E>=-80&&(z="C"),z}function s(E){var z=E%k;return 0===z&&(z=k),z}function a(E){if(E&&0===E.length)throw"MGRSPoint coverting from nothing";for(var z,rt=E.length,ot=null,vt="",_t=0;!/[A-Z]/.test(z=E.charAt(_t));){if(_t>=2)throw"MGRSPoint bad conversion from: "+E;vt+=z,_t++}var kt=parseInt(vt,10);if(0===_t||_t+3>rt)throw"MGRSPoint bad conversion from: "+E;var Gt=E.charAt(_t++);if("A">=Gt||"B"===Gt||"Y"===Gt||Gt>="Z"||"I"===Gt||"O"===Gt)throw"MGRSPoint zone letter "+Gt+" not handled: "+E;ot=E.substring(_t,_t+=2);for(var $t=s(kt),Vt=function f(E,z){for(var rt=G.charCodeAt(z-1),ot=1e5,vt=!1;rt!==E.charCodeAt(0);){if(++rt===p&&rt++,rt===l&&rt++,rt>T){if(vt)throw"Bad character: "+E;rt=h,vt=!0}ot+=1e5}return ot}(ot.charAt(0),$t),Kt=function d(E,z){if(E>"V")throw"MGRSPoint given invalid Northing "+E;for(var rt=B.charCodeAt(z-1),ot=0,vt=!1;rt!==E.charCodeAt(0);){if(++rt===p&&rt++,rt===l&&rt++,rt>c){if(vt)throw"Bad character: "+E;rt=h,vt=!0}ot+=1e5}return ot}(ot.charAt(1),$t);Kt<w(Gt);)Kt+=2e6;var se=rt-_t;if(se%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+E;var ve,he,Le,je=se/2,ae=0,Rr=0;return je>0&&(ve=1e5/Math.pow(10,je),he=E.substring(_t,_t+je),ae=parseFloat(he)*ve,Le=E.substring(_t+je),Rr=parseFloat(Le)*ve),{easting:ae+Vt,northing:Rr+Kt,zoneLetter:Gt,zoneNumber:kt,accuracy:ve}}function w(E){var z;switch(E){case"C":z=11e5;break;case"D":z=2e6;break;case"E":z=28e5;break;case"F":z=37e5;break;case"G":z=46e5;break;case"H":z=55e5;break;case"J":z=64e5;break;case"K":z=73e5;break;case"L":z=82e5;break;case"M":z=91e5;break;case"N":z=0;break;case"P":z=8e5;break;case"Q":z=17e5;break;case"R":z=26e5;break;case"S":z=35e5;break;case"T":z=44e5;break;case"U":z=53e5;break;case"V":z=62e5;break;case"W":z=7e6;break;case"X":z=79e5;break;default:z=-1}if(z>=0)return z;throw"Invalid zone letter: "+E}var k=6,G="AJSAJS",B="AFAFAF",h=65,p=73,l=79,c=86,T=90;t.forward=function(E,z){return z=z||5,function b(E,z){var rt="00000"+E.easting,ot="00000"+E.northing;return E.zoneNumber+E.zoneLetter+function o(E,z,rt){var ot=s(rt);return function m(E,z,rt){var ot=rt-1,vt=G.charCodeAt(ot),_t=B.charCodeAt(ot),kt=vt+E-1,Gt=_t+z,$t=!1;return kt>T&&(kt=kt-T+h-1,$t=!0),(kt===p||p>vt&&kt>p||(kt>p||p>vt)&&$t)&&kt++,(kt===l||l>vt&&kt>l||(kt>l||l>vt)&&$t)&&++kt===p&&kt++,kt>T&&(kt=kt-T+h-1),Gt>c?(Gt=Gt-c+h-1,$t=!0):$t=!1,(Gt===p||p>_t&&Gt>p||(Gt>p||p>_t)&&$t)&&Gt++,(Gt===l||l>_t&&Gt>l||(Gt>l||l>_t)&&$t)&&++Gt===p&&Gt++,Gt>c&&(Gt=Gt-c+h-1),String.fromCharCode(kt)+String.fromCharCode(Gt)}(Math.floor(E/1e5),Math.floor(z/1e5)%20,ot)}(E.easting,E.northing,E.zoneNumber)+rt.substr(rt.length-5,z)+ot.substr(ot.length-5,z)}(function r(E){var rt,ot,vt,_t,kt,$t,Vt,Kt=E.lat,se=E.lon,he=.00669438,Pe=v(Kt),We=v(se);Vt=Math.floor((se+180)/6)+1,180===se&&(Vt=60),Kt>=56&&64>Kt&&se>=3&&12>se&&(Vt=32),Kt>=72&&84>Kt&&(se>=0&&9>se?Vt=31:se>=9&&21>se?Vt=33:se>=21&&33>se?Vt=35:se>=33&&42>se&&(Vt=37)),$t=v(6*(Vt-1)-180+3),rt=he/(1-he),ot=6378137/Math.sqrt(1-he*Math.sin(Pe)*Math.sin(Pe)),vt=Math.tan(Pe)*Math.tan(Pe),_t=rt*Math.cos(Pe)*Math.cos(Pe);var je=.9996*ot*((kt=Math.cos(Pe)*(We-$t))+(1-vt+_t)*kt*kt*kt/6+(5-18*vt+vt*vt+72*_t-58*rt)*kt*kt*kt*kt*kt/120)+5e5,ae=.9996*(6378137*(.9983242984503243*Pe-.002514607064228144*Math.sin(2*Pe)+2639046602129982e-21*Math.sin(4*Pe)-35*he*he*he/3072*Math.sin(6*Pe))+ot*Math.tan(Pe)*(kt*kt/2+(5-vt+9*_t+4*_t*_t)*kt*kt*kt*kt/24+(61-58*vt+vt*vt+600*_t-330*rt)*kt*kt*kt*kt*kt*kt/720));return 0>Kt&&(ae+=1e7),{northing:Math.round(ae),easting:Math.round(je),zoneNumber:Vt,zoneLetter:O(Kt)}}({lat:E[1],lon:E[0]}),z)},t.inverse=function(E){var z=x(a(E.toUpperCase()));return z.lat&&z.lon?[z.lon,z.lat,z.lon,z.lat]:[z.left,z.bottom,z.right,z.top]},t.toPoint=function(E){var z=x(a(E.toUpperCase()));return z.lat&&z.lon?[z.lon,z.lat]:[(z.left+z.right)/2,(z.top+z.bottom)/2]}}),fi=li&&"object"==typeof li&&"default"in li?li.default:li,Ui=dt(function(P){P.exports=function(t){var v={x:t[0],y:t[1]};return t.length>2&&(v.z=t[2]),t.length>3&&(v.m=t[3]),v}}),ci=Ui&&"object"==typeof Ui&&"default"in Ui?Ui.default:Ui,Kr=dt(function(P){var t=Math.PI/2,b=484813681109536e-20,s=.3826834323650898,m=function(a){return this instanceof m?(this.datum_type=4,void(a&&(a.datumCode&&"none"===a.datumCode&&(this.datum_type=5),a.datum_params&&(this.datum_params=a.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=1),this.datum_params.length>3&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=2,this.datum_params[3]*=b,this.datum_params[4]*=b,this.datum_params[5]*=b,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=a.grids?3:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,3===this.datum_type&&(this.grids=a.grids)))):new m(a)};m.prototype={compare_datums:function(a){return!(this.datum_type!==a.datum_type||this.a!==a.a||Math.abs(this.es-a.es)>5e-11)&&(1===this.datum_type?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]:2===this.datum_type?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]&&this.datum_params[3]===a.datum_params[3]&&this.datum_params[4]===a.datum_params[4]&&this.datum_params[5]===a.datum_params[5]&&this.datum_params[6]===a.datum_params[6]:3!==this.datum_type&&3!==a.datum_type||this.nadgrids===a.nadgrids)},geodetic_to_geocentric:function(a){var f,d,w,k,G,h,p=a.x,l=a.y,c=a.z?a.z:0;if(-t>l&&l>-1.001*t)l=-t;else if(l>t&&1.001*t>l)l=t;else if(-t>l||l>t)return null;return p>Math.PI&&(p-=2*Math.PI),G=Math.sin(l),h=Math.cos(l),f=((k=this.a/Math.sqrt(1-this.es*(G*G)))+c)*h*Math.cos(p),d=(k+c)*h*Math.sin(p),w=(k*(1-this.es)+c)*G,a.x=f,a.y=d,a.z=w,0},geocentric_to_geodetic:function(a){var f,d,w,k,G,B,h,p,l,c,T,E,rt,ot,vt,_t,Vt=a.x,Kt=a.y,se=a.z?a.z:0;if(f=Math.sqrt(Vt*Vt+Kt*Kt),d=Math.sqrt(Vt*Vt+Kt*Kt+se*se),f/this.a<1e-12){if(ot=0,d/this.a<1e-12)return vt=t,void(_t=-this.b)}else ot=Math.atan2(Kt,Vt);w=se/d,k=f/d,G=1/Math.sqrt(1-this.es*(2-this.es)*k*k),p=k*(1-this.es)*G,l=w*G,rt=0;do{rt++,h=this.a/Math.sqrt(1-this.es*l*l),B=this.es*h/(h+(_t=f*p+se*l-h*(1-this.es*l*l))),E=(T=w*(G=1/Math.sqrt(1-B*(2-B)*k*k)))*p-(c=k*(1-B)*G)*l,p=c,l=T}while(E*E>1e-24&&30>rt);return vt=Math.atan(T/Math.abs(c)),a.x=ot,a.y=vt,a.z=_t,a},geocentric_to_geodetic_noniter:function(a){var f,d,w,k,G,B,h,p,l,c,E,z,rt,ot,vt,_t,kt=a.x,Gt=a.y,$t=a.z?a.z:0;if(kt=parseFloat(kt),Gt=parseFloat(Gt),$t=parseFloat($t),_t=!1,0!==kt)f=Math.atan2(Gt,kt);else if(Gt>0)f=t;else if(0>Gt)f=-t;else if(_t=!0,f=0,$t>0)d=t;else{if(!(0>$t))return d=t,void(w=-this.b);d=-t}return G=kt*kt+Gt*Gt,k=Math.sqrt(G),B=1.0026*$t,p=Math.sqrt(B*B+G),vt=k-this.a*this.es*(E=k/p)*E*E,z=(h=$t+this.b*this.ep2*((c=B/p)*c*c))/(l=Math.sqrt(h*h+vt*vt)),rt=vt/l,ot=this.a/Math.sqrt(1-this.es*z*z),w=rt>=s?k/rt-ot:-s>=rt?k/-rt-ot:$t/z+ot*(this.es-1),!1===_t&&(d=Math.atan(z/rt)),a.x=f,a.y=d,a.z=w,a},geocentric_to_wgs84:function(a){if(1===this.datum_type)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(2===this.datum_type){var k=this.datum_params[3],G=this.datum_params[4],B=this.datum_params[5],h=this.datum_params[6],l=h*(B*a.x+a.y-k*a.z)+this.datum_params[1],c=h*(-G*a.x+k*a.y+a.z)+this.datum_params[2];a.x=h*(a.x-B*a.y+G*a.z)+this.datum_params[0],a.y=l,a.z=c}},geocentric_from_wgs84:function(a){if(1===this.datum_type)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(2===this.datum_type){var k=this.datum_params[3],G=this.datum_params[4],B=this.datum_params[5],h=this.datum_params[6],p=(a.x-this.datum_params[0])/h,l=(a.y-this.datum_params[1])/h,c=(a.z-this.datum_params[2])/h;a.x=p+B*l-G*c,a.y=-B*p+l+k*c,a.z=G*p-k*l+c}}},P.exports=m}),zi=Kr&&"object"==typeof Kr&&"default"in Kr?Kr.default:Kr,Fi=dt(function(P){P.exports=function(t,v){var u,r;if(t=t||{},!v)return t;for(r in v)void 0!==(u=v[r])&&(t[r]=u);return t}}),Yr=Fi&&"object"==typeof Fi&&"default"in Fi?Fi.default:Fi,Vi=dt(function(P,t){t.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},t.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},t.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},t.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},t.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},t.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},t.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},t.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},t.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},t.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},t.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},t.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},t.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},t.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},t.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},t.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},t.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},t.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},t.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},t.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},t.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},t.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},t.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},t.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},t.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},t.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},t.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},t.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},t.hough={a:6378270,rf:297,ellipseName:"Hough"},t.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},t.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},t.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},t.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},t.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},t.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},t.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},t.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},t.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},t.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},t.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},t.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},t.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},t.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}}),Hi=Vi&&"object"==typeof Vi&&"default"in Vi?Vi.default:Vi,Wi=dt(function(P,t){t.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},t.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},t.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},t.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},t.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},t.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},t.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},t.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},t.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},t.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},t.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},t.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},t.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},t.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},t.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},t.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}}),Ji=Wi&&"object"==typeof Wi&&"default"in Wi?Wi.default:Wi,Qi=dt(function(P){var t=Ji,v=Hi,u=Yr,r=zi;P.exports=function(s){if(s.datumCode&&"none"!==s.datumCode){var m=t[s.datumCode];m&&(s.datum_params=m.towgs84?m.towgs84.split(","):null,s.ellps=m.ellipse,s.datumName=m.datumName?m.datumName:s.datumCode)}return s.a||u(s,v[s.ellps]?v[s.ellps]:v.WGS84),s.rf&&!s.b&&(s.b=(1-1/s.rf)*s.a),(0===s.rf||Math.abs(s.a-s.b)<1e-10)&&(s.sphere=!0,s.b=s.a),s.a2=s.a*s.a,s.b2=s.b*s.b,s.es=(s.a2-s.b2)/s.a2,s.e=Math.sqrt(s.es),s.R_A&&(s.a*=1-s.es*(.16666666666666666+s.es*(.04722222222222222+.022156084656084655*s.es)),s.a2=s.a*s.a,s.b2=s.b*s.b,s.es=0),s.ep2=(s.a2-s.b2)/s.b2,s.k0||(s.k0=1),s.axis||(s.axis="enu"),s.datum||(s.datum=r(s)),s}}),Xi=Qi&&"object"==typeof Qi&&"default"in Qi?Qi.default:Qi,Ki=dt(function(P,t){function v(u){return u}t.init=function(){},t.forward=v,t.inverse=v,t.names=["longlat","identity"]}),Yi=Ki&&"object"==typeof Ki&&"default"in Ki?Ki.default:Ki,Zi=dt(function(P,t){var v=Ee,u=Math.PI/2,x=57.29577951308232,O=ge,b=Math.PI/4,o=tr,s=Ke;t.init=function(){var m=this.b/this.a;this.es=1-m*m,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):v(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},t.forward=function(m){var d,w,a=m.x,f=m.y;if(f*x>90&&-90>f*x&&a*x>180&&-180>a*x)return null;if(Math.abs(Math.abs(f)-u)<=1e-10)return null;if(this.sphere)d=this.x0+this.a*this.k0*O(a-this.long0),w=this.y0+this.a*this.k0*Math.log(Math.tan(b+.5*f));else{var k=Math.sin(f),G=o(this.e,f,k);d=this.x0+this.a*this.k0*O(a-this.long0),w=this.y0-this.a*this.k0*Math.log(G)}return m.x=d,m.y=w,m},t.inverse=function(m){var a,f,d=m.x-this.x0,w=m.y-this.y0;if(this.sphere)f=u-2*Math.atan(Math.exp(-w/(this.a*this.k0)));else{var k=Math.exp(-w/(this.a*this.k0));if(-9999===(f=s(this.e,k)))return null}return a=O(this.long0+d/(this.a*this.k0)),m.x=a,m.y=f,m},t.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]}),$i=Zi&&"object"==typeof Zi&&"default"in Zi?Zi.default:Zi,tn=dt(function(P,t){function v(O,b){var o=x.length;return O.names?(x[o]=O,O.names.forEach(function(s){r[s.toLowerCase()]=o}),this):(console.log(b),!0)}var u=[$i,Yi],r={},x=[];t.add=v,t.get=function(O){if(!O)return!1;var b=O.toLowerCase();return typeof r[b]<"u"&&x[r[b]]?x[r[b]]:void 0},t.start=function(){u.forEach(v)}}),en=tn&&"object"==typeof tn&&"default"in tn?tn.default:tn,rn=dt(function(P,t){t.ft={to_meter:.3048},t["us-ft"]={to_meter:1200/3937}}),nn=rn&&"object"==typeof rn&&"default"in rn?rn.default:rn,pi=dt(function(P,t){t.greenwich=0,t.lisbon=-9.131906111111,t.paris=2.337229166667,t.bogota=-74.080916666667,t.madrid=-3.687938888889,t.rome=12.452333333333,t.bern=7.439583333333,t.jakarta=106.807719444444,t.ferro=-17.666666666667,t.brussels=4.367975,t.stockholm=18.058277777778,t.athens=23.7163375,t.oslo=10.722916666667}),an=pi&&"object"==typeof pi&&"default"in pi?pi.default:pi,di=dt(function(P){var t=.017453292519943295,v=an,u=nn;P.exports=function(r){var x={},O={};r.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).forEach(function(a){var f=a.split("=");f.push(!0),O[f[0].toLowerCase()]=f[1]});var b,o,s,m={proj:"projName",datum:"datumCode",rf:function(a){x.rf=parseFloat(a)},lat_0:function(a){x.lat0=a*t},lat_1:function(a){x.lat1=a*t},lat_2:function(a){x.lat2=a*t},lat_ts:function(a){x.lat_ts=a*t},lon_0:function(a){x.long0=a*t},lon_1:function(a){x.long1=a*t},lon_2:function(a){x.long2=a*t},alpha:function(a){x.alpha=parseFloat(a)*t},lonc:function(a){x.longc=a*t},x_0:function(a){x.x0=parseFloat(a)},y_0:function(a){x.y0=parseFloat(a)},k_0:function(a){x.k0=parseFloat(a)},k:function(a){x.k0=parseFloat(a)},a:function(a){x.a=parseFloat(a)},b:function(a){x.b=parseFloat(a)},r_a:function(){x.R_A=!0},zone:function(a){x.zone=parseInt(a,10)},south:function(){x.utmSouth=!0},towgs84:function(a){x.datum_params=a.split(",").map(function(f){return parseFloat(f)})},to_meter:function(a){x.to_meter=parseFloat(a)},units:function(a){x.units=a,u[a]&&(x.to_meter=u[a].to_meter)},from_greenwich:function(a){x.from_greenwich=a*t},pm:function(a){x.from_greenwich=(v[a]?v[a]:parseFloat(a))*t},nadgrids:function(a){"@null"===a?x.datumCode="none":x.nadgrids=a},axis:function(a){var f="ewnsud";3===a.length&&-1!==f.indexOf(a.substr(0,1))&&-1!==f.indexOf(a.substr(1,1))&&-1!==f.indexOf(a.substr(2,1))&&(x.axis=a)}};for(b in O)o=O[b],b in m?"function"==typeof(s=m[b])?s(o):x[s]=o:x[b]=o;return"string"==typeof x.datumCode&&"WGS84"!==x.datumCode&&(x.datumCode=x.datumCode.toLowerCase()),x}}),yi=di&&"object"==typeof di&&"default"in di?di.default:di,sn=dt(function(P){function t(o,s,m){o[s]=m.map(function(a){var f={};return v(a,f),f}).reduce(function(a,f){return b(a,f)},{})}function v(o,s){var m;return Array.isArray(o)?("PARAMETER"===(m=o.shift())&&(m=o.shift()),void(1===o.length?Array.isArray(o[0])?(s[m]={},v(o[0],s[m])):s[m]=o[0]:o.length?"TOWGS84"===m?s[m]=o:(s[m]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(m)>-1?(s[m]={name:o[0].toLowerCase(),convert:o[1]},3===o.length&&(s[m].auth=o[2])):"SPHEROID"===m?(s[m]={name:o[0],a:o[1],rf:o[2]},4===o.length&&(s[m].auth=o[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(m)>-1?(o[0]=["name",o[0]],t(s,m,o)):o.every(function(a){return Array.isArray(a)})?t(s,m,o):v(o,s[m])):s[m]=!0)):void(s[o]=!0)}function r(o){return o*O}var O=.017453292519943295,b=Yr;P.exports=function(o,s){var m=JSON.parse((","+o).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),a=m.shift(),f=m.shift();m.unshift(["name",f]),m.unshift(["type",a]),m.unshift("output");var d={};return v(m,d),function x(o){function s(f){var d=o.to_meter||1;return parseFloat(f,10)*d}"GEOGCS"===o.type?o.projName="longlat":"LOCAL_CS"===o.type?(o.projName="identity",o.local=!0):o.projName="object"==typeof o.PROJECTION?Object.keys(o.PROJECTION)[0]:o.PROJECTION,o.UNIT&&(o.units=o.UNIT.name.toLowerCase(),"metre"===o.units&&(o.units="meter"),o.UNIT.convert&&("GEOGCS"===o.type?o.DATUM&&o.DATUM.SPHEROID&&(o.to_meter=parseFloat(o.UNIT.convert,10)*o.DATUM.SPHEROID.a):o.to_meter=parseFloat(o.UNIT.convert,10))),o.GEOGCS&&(o.datumCode=o.GEOGCS.DATUM?o.GEOGCS.DATUM.name.toLowerCase():o.GEOGCS.name.toLowerCase(),"d_"===o.datumCode.slice(0,2)&&(o.datumCode=o.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==o.datumCode&&"new_zealand_1949"!==o.datumCode||(o.datumCode="nzgd49"),"wgs_1984"===o.datumCode&&("Mercator_Auxiliary_Sphere"===o.PROJECTION&&(o.sphere=!0),o.datumCode="wgs84"),"_ferro"===o.datumCode.slice(-6)&&(o.datumCode=o.datumCode.slice(0,-6)),"_jakarta"===o.datumCode.slice(-8)&&(o.datumCode=o.datumCode.slice(0,-8)),~o.datumCode.indexOf("belge")&&(o.datumCode="rnb72"),o.GEOGCS.DATUM&&o.GEOGCS.DATUM.SPHEROID&&(o.ellps=o.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===o.ellps.toLowerCase().slice(0,13)&&(o.ellps="intl"),o.a=o.GEOGCS.DATUM.SPHEROID.a,o.rf=parseFloat(o.GEOGCS.DATUM.SPHEROID.rf,10)),~o.datumCode.indexOf("osgb_1936")&&(o.datumCode="osgb36")),o.b&&!isFinite(o.b)&&(o.b=o.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",r],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",r],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",r],["lat0","latitude_of_origin",r],["lat0","standard_parallel_1",r],["lat1","standard_parallel_1",r],["lat2","standard_parallel_2",r],["alpha","azimuth",r],["srsCode","name"]].forEach(function(f){return function u(o,s){var m=s[0],a=s[1];!(m in o)&&a in o&&(o[m]=o[a],3===s.length&&(o[m]=s[2](o[m])))}(o,f)}),o.long0||!o.longc||"Albers_Conic_Equal_Area"!==o.projName&&"Lambert_Azimuthal_Equal_Area"!==o.projName||(o.long0=o.longc),o.lat_ts||!o.lat1||"Stereographic_South_Pole"!==o.projName&&"Polar Stereographic (variant B)"!==o.projName||(o.lat0=r(o.lat1>0?90:-90),o.lat_ts=o.lat1)}(d.output),b(s,d.output)}}),vi=sn&&"object"==typeof sn&&"default"in sn?sn.default:sn,mi=dt(function(P){P.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}}),on=mi&&"object"==typeof mi&&"default"in mi?mi.default:mi,hn=dt(function(P){function t(x){var O=this;if(2===arguments.length){var b=arguments[1];t[x]="string"==typeof b?"+"===b.charAt(0)?u(arguments[1]):r(arguments[1]):b}else if(1===arguments.length){if(Array.isArray(x))return x.map(function(o){Array.isArray(o)?t.apply(O,o):t(o)});if("string"==typeof x){if(x in t)return t[x]}else"EPSG"in x?t["EPSG:"+x.EPSG]=x:"ESRI"in x?t["ESRI:"+x.ESRI]=x:"IAU2000"in x?t["IAU2000:"+x.IAU2000]=x:console.log(x);return}}var u=yi,r=vi;on(t),P.exports=t}),gi=hn&&"object"==typeof hn&&"default"in hn?hn.default:hn,Zr=dt(function(P){var O=gi,b=vi,o=yi;P.exports=function x(s){return function t(s){return"string"==typeof s}(s)?function v(s){return s in O}(s)?O[s]:function u(s){return["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(a,f){return a+1+s.indexOf(f)},0)}(s)?b(s):function r(s){return"+"===s[0]}(s)?o(s):void 0:s}}),un=Zr&&"object"==typeof Zr&&"default"in Zr?Zr.default:Zr,ln=dt(function(P){function t(O,b){if(!(this instanceof t))return new t(O);b=b||function(a){if(a)throw a};var o=v(O);if("object"==typeof o){var s=x(o),m=t.projections.get(s.projName);m?(u(this,s),u(this,m),this.init(),b(null,this)):b(O)}else b(O)}var v=un,u=Yr,x=Xi;(t.projections=en).start(),P.exports=t}),$r=ln&&"object"==typeof ln&&"default"in ln?ln.default:ln,fn=dt(function(P){P.exports=function(t,v,u){var r,x,O,b=u.x,o=u.y,s=u.z||0;for(O=0;3>O;O++)if(!v||2!==O||void 0!==u.z)switch(0===O?(r=b,x="x"):1===O?(r=o,x="y"):(r=s,x="z"),t.axis[O]){case"e":case"n":u[x]=r;break;case"w":case"s":u[x]=-r;break;case"u":void 0!==u[x]&&(u.z=r);break;case"d":void 0!==u[x]&&(u.z=-r);break;default:return null}return u}}),cn=fn&&"object"==typeof fn&&"default"in fn?fn.default:fn,_i=dt(function(P){var t=1,v=2,x=6378137,O=.006694379990141316;P.exports=function(b,o,s){function m(p){return p===t||p===v}var a,f,d;if(b.compare_datums(o)||5===b.datum_type||5===o.datum_type)return s;var w=b.a,k=b.es,G=o.a,B=o.es,h=b.datum_type;if(3===h)if(0===this.apply_gridshift(b,0,s))b.a=x,b.es=O;else{if(!b.datum_params)return b.a=w,b.es=b.es,s;for(a=1,f=0,d=b.datum_params.length;d>f;f++)a*=b.datum_params[f];if(0===a)return b.a=w,b.es=b.es,s;h=b.datum_params.length>3?v:t}return 3===o.datum_type&&(o.a=x,o.es=O),(b.es!==o.es||b.a!==o.a||m(h)||m(o.datum_type))&&(b.geodetic_to_geocentric(s),m(b.datum_type)&&b.geocentric_to_wgs84(s),m(o.datum_type)&&o.geocentric_from_wgs84(s),o.geocentric_to_geodetic(s)),3===o.datum_type&&this.apply_gridshift(o,1,s),b.a=w,b.es=k,o.a=G,o.es=B,s}}),pn=_i&&"object"==typeof _i&&"default"in _i?_i.default:_i,dn=dt(function(P){var t=.017453292519943295,v=57.29577951308232,u=1,r=2,x=pn,O=cn,b=$r,o=ci;P.exports=function s(m,a,f){function d(k,G){return(k.datum.datum_type===u||k.datum.datum_type===r)&&"WGS84"!==G.datumCode}var w;return Array.isArray(f)&&(f=o(f)),m.datum&&a.datum&&(d(m,a)||d(a,m))&&(s(m,w=new b("WGS84"),f),m=w),"enu"!==m.axis&&O(m,!1,f),"longlat"===m.projName?(f.x*=t,f.y*=t):(m.to_meter&&(f.x*=m.to_meter,f.y*=m.to_meter),m.inverse(f)),m.from_greenwich&&(f.x+=m.from_greenwich),f=x(m.datum,a.datum,f),a.from_greenwich&&(f.x-=a.from_greenwich),"longlat"===a.projName?(f.x*=v,f.y*=v):(a.forward(f),a.to_meter&&(f.x/=a.to_meter,f.y/=a.to_meter)),"enu"!==a.axis&&O(a,!0,f),f}}),Mi=dn&&"object"==typeof dn&&"default"in dn?dn.default:dn,yn=dt(function(P){function t(u,r,x){if(!(this instanceof t))return new t(u,r,x);if(Array.isArray(u))this.x=u[0],this.y=u[1],this.z=u[2]||0;else if("object"==typeof u)this.x=u.x,this.y=u.y,this.z=u.z||0;else if("string"==typeof u&&typeof r>"u"){var O=u.split(",");this.x=parseFloat(O[0],10),this.y=parseFloat(O[1],10),this.z=parseFloat(O[2],10)||0}else this.x=u,this.y=r,this.z=x||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var v=fi;t.fromMGRS=function(u){return new t(v.toPoint(u))},t.prototype.toMGRS=function(u){return v.forward([this.x,this.y],u)},P.exports=t}),vn=yn&&"object"==typeof yn&&"default"in yn?yn.default:yn,mn=dt(function(P){function t(b,o,s){var m;return Array.isArray(s)?(m=x(b,o,s),3===s.length?[m.x,m.y,m.z]:[m.x,m.y]):x(b,o,s)}function v(b){return b instanceof r?b:b.oProj?b.oProj:r(b)}var r=$r,x=Mi,O=r("WGS84");P.exports=function u(b,o,s){b=v(b);var m,a=!1;return typeof o>"u"?(o=b,b=O,a=!0):(typeof o.x<"u"||Array.isArray(o))&&(s=o,o=b,b=O,a=!0),o=v(o),s?t(b,o,s):(m={forward:function(f){return t(b,o,f)},inverse:function(f){return t(o,b,f)}},a&&(m.oProj=o),m)}}),gn=mn&&"object"==typeof mn&&"default"in mn?mn.default:mn,bi=dt(function(P){var t=gn;t.defaultDatum="WGS84",t.Proj=$r,t.WGS84=new t.Proj("WGS84"),t.Point=vn,t.toPoint=ci,t.defs=gi,t.transform=Mi,t.mgrs=fi,t.version="2.3.14",En(t),P.exports=t}),ra=bi&&"object"==typeof bi&&"default"in bi?bi.default:bi;!function(P){function t(h){if("string"!=typeof h&&(h=String(h)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function v(h){return"string"!=typeof h&&(h=String(h)),h}function u(h){var p={next:function(){var l=h.shift();return{done:void 0===l,value:l}}};return k.iterable&&(p[Symbol.iterator]=function(){return p}),p}function r(h){this.map={},h instanceof r?h.forEach(function(p,l){this.append(l,p)},this):h&&Object.getOwnPropertyNames(h).forEach(function(p){this.append(p,h[p])},this)}function x(h){return h.bodyUsed?Promise.reject(new TypeError("Already read")):void(h.bodyUsed=!0)}function O(h){return new Promise(function(p,l){h.onload=function(){p(h.result)},h.onerror=function(){l(h.error)}})}function b(h){var p=new FileReader;return p.readAsArrayBuffer(h),O(p)}function s(){return this.bodyUsed=!1,this._initBody=function(h){if(this._bodyInit=h,"string"==typeof h)this._bodyText=h;else if(k.blob&&Blob.prototype.isPrototypeOf(h))this._bodyBlob=h;else if(k.formData&&FormData.prototype.isPrototypeOf(h))this._bodyFormData=h;else if(k.searchParams&&URLSearchParams.prototype.isPrototypeOf(h))this._bodyText=h.toString();else if(h){if(!k.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(h))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof h?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):k.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},k.blob?(this.blob=function(){var h=x(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(b)},this.text=function(){var h=x(this);if(h)return h;if(this._bodyBlob)return function o(h){var p=new FileReader;return p.readAsText(h),O(p)}(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){return x(this)||Promise.resolve(this._bodyText)},k.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function a(h,p){var l=(p=p||{}).body;if(a.prototype.isPrototypeOf(h)){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,p.headers||(this.headers=new r(h.headers)),this.method=h.method,this.mode=h.mode,l||(l=h._bodyInit,h.bodyUsed=!0)}else this.url=h;if(this.credentials=p.credentials||this.credentials||"omit",!p.headers&&this.headers||(this.headers=new r(p.headers)),this.method=function m(h){var p=h.toUpperCase();return G.indexOf(p)>-1?p:h}(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&l)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(l)}function f(h){var p=new FormData;return h.trim().split("&").forEach(function(l){if(l){var c=l.split("="),T=c.shift().replace(/\+/g," "),E=c.join("=").replace(/\+/g," ");p.append(decodeURIComponent(T),decodeURIComponent(E))}}),p}function d(h){var p=new r;return(h.getAllResponseHeaders()||"").trim().split("\n").forEach(function(c){var T=c.trim().split(":"),E=T.shift().trim(),z=T.join(":").trim();p.append(E,z)}),p}function w(h,p){p||(p={}),this.type="default",this.status=p.status,this.ok=this.status>=200&&this.status<300,this.statusText=p.statusText,this.headers=p.headers instanceof r?p.headers:new r(p.headers),this.url=p.url||"",this._initBody(h)}if(!P.fetch){var k={searchParams:"URLSearchParams"in P,iterable:"Symbol"in P&&"iterator"in Symbol,blob:"FileReader"in P&&"Blob"in P&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in P,arrayBuffer:"ArrayBuffer"in P};r.prototype.append=function(h,p){h=t(h),p=v(p);var l=this.map[h];l||(this.map[h]=l=[]),l.push(p)},r.prototype.delete=function(h){delete this.map[t(h)]},r.prototype.get=function(h){var p=this.map[t(h)];return p?p[0]:null},r.prototype.getAll=function(h){return this.map[t(h)]||[]},r.prototype.has=function(h){return this.map.hasOwnProperty(t(h))},r.prototype.set=function(h,p){this.map[t(h)]=[v(p)]},r.prototype.forEach=function(h,p){Object.getOwnPropertyNames(this.map).forEach(function(l){this.map[l].forEach(function(c){h.call(p,c,l,this)},this)},this)},r.prototype.keys=function(){var h=[];return this.forEach(function(p,l){h.push(l)}),u(h)},r.prototype.values=function(){var h=[];return this.forEach(function(p){h.push(p)}),u(h)},r.prototype.entries=function(){var h=[];return this.forEach(function(p,l){h.push([l,p])}),u(h)},k.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var G=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];a.prototype.clone=function(){return new a(this)},s.call(a.prototype),s.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},w.error=function(){var h=new w(null,{status:0,statusText:""});return h.type="error",h};var B=[301,302,303,307,308];w.redirect=function(h,p){if(-1===B.indexOf(p))throw new RangeError("Invalid status code");return new w(null,{status:p,headers:{location:h}})},P.Headers=r,P.Request=a,P.Response=w,P.fetch=function(h,p){return new Promise(function(l,c){var E;E=a.prototype.isPrototypeOf(h)&&!p?h:new a(h,p);var z=new XMLHttpRequest;z.onload=function(){var rt={status:z.status,statusText:z.statusText,headers:d(z),url:"responseURL"in z?z.responseURL:/^X-Request-URL:/m.test(z.getAllResponseHeaders())?z.getResponseHeader("X-Request-URL"):void 0};l(new w("response"in z?z.response:z.responseText,rt))},z.onerror=function(){c(new TypeError("Network request failed"))},z.ontimeout=function(){c(new TypeError("Network request failed"))},z.open(E.method,E.url,!0),"include"===E.credentials&&(z.withCredentials=!0),"responseType"in z&&k.blob&&(z.responseType="blob"),E.headers.forEach(function(rt,ot){z.setRequestHeader(ot,rt)}),z.send(typeof E._bodyInit>"u"?null:E._bodyInit)})},P.fetch.polyfill=!0}}(typeof self<"u"?self:this);var _n,Mn=dt(function(P,t){function O(B,h){var p=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!B||!h)throw new Error("crsUri and proj cannot be empty");var l=void 0;if("string"==typeof h){if(!(l=(0,m.default)(h)))throw new Error("Unsupported proj4 string: "+h);p.reverseAxes&&(l=o(l))}else l=h;return w[B]=l,l}function o(B){return{forward:function(h){return B.forward(h).reverse()},inverse:function(h){return B.inverse([h[1],h[0]])}}}Object.defineProperty(t,"__esModule",{value:!0}),t.get=function r(B){return w[B]},t.load=function x(B){if(B in w)return Promise.resolve(w[B]);var h=function b(B){if(0!==B.indexOf(d))throw new Error("Unsupported CRS URI: "+B);return B.substr(d.length)}(B);return fetch("https://epsg.io/"+h+".proj4").then(function(l){if(!l.ok)throw new Error("HTTP response code: "+l.status);return l.text()}).then(function(l){return O(B,l,{reverseAxes:B in k})})},t.set=O;var m=function v(B){return B&&B.__esModule?B:{default:B}}(ra),a="http://www.opengis.net/def/crs/",f=a+"OGC/",d=a+"EPSG/0/",w={},k=function u(B,h,p){return h in B?Object.defineProperty(B,h,{value:p,enumerable:!0,configurable:!0,writable:!0}):B[h]=p,B}({},d+4326,!0),G=(0,m.default)("+proj=longlat +datum=WGS84 +no_defs");O(f+"1.3/CRS84",G),O(d+4979,o(G))}),Sn=Mn.load,On=Mn.get,bn="http://www.opengis.net/def/crs/",wn=bn+"EPSG/0/4979",Pn=bn+"EPSG/0/4326",jn=bn+"OGC/1.3/CRS84",A=[wn,Pn,jn],i=(pt(_n={},wn,1),pt(_n,Pn,1),pt(_n,jn,0),_n),C=function(){function P(t){K(this,P),this._collection=t,this._filter={},this._subset={}}return yt(P,[{key:"filter",value:function(t){return Ar(t,this._filter),this}},{key:"subset",value:function(t){return Ar(t,this._subset),this}},{key:"execute",value:function(){var t=this,v=this._collection,u={type:qr,coverages:[],parameters:v.parameters,domainType:v.domainType},r=[],x=!0,O=!1,b=void 0;try{for(var o,s=function(){var a=o.value;r.push(a.loadDomain().then(function(f){return function Xr(P,t){var v=!0,u=!1,r=void 0;try{for(var x,O=Object.keys(t)[Symbol.iterator]();!(v=(x=O.next()).done);v=!0){var b=x.value,o=t[b];if(!P.axes.has(b))throw new Error('Axis "'+b+'" does not exist');var m=P.axes.get(b).values,a=m[0],f=m[m.length-1];if("number"!=typeof a&&"string"!=typeof a)throw new Error("Can only filter primitive axis values");var d=o.start,w=o.stop;if(br(P,b)){var k=[Ne(a),Ne(f)];a=k[0],f=k[1];var G=[Ne(d),Ne(w)];d=G[0],w=G[1]}else if(mr(P,b)){var B=fr(P,b),h=[B(d),B(w)];d=h[0],w=h[1]}if(a>f){var p=[f,a];a=p[0],f=p[1]}if(d>f||a>w)return!1}}catch(l){u=!0,r=l}finally{try{!v&&O.return&&O.return()}finally{if(u)throw r}}return!0}(f,t._filter)?0!==Object.keys(t._subset).length?a.subsetByValue(t._subset).then(function(d){u.coverages.push(d)}):void u.coverages.push(a):void 0}))},m=v.coverages[Symbol.iterator]();!(x=(o=m.next()).done);x=!0)s()}catch(a){O=!0,b=a}finally{try{!x&&m.return&&m.return()}finally{if(O)throw b}}return Promise.all(r).then(function(){return u.query=function(){return new P(u)},u})}}]),P}(),S=dt(function(P){function t(u,r,x,O,b,o){var s=["function ",u,"(a,l,h,",O.join(","),"){",o?"":"var i=",x?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",b?".get(m)":"[m]"];return o?r.indexOf("c")<0?s.push(";if(x===y){return m}else if(x<=y){"):s.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):s.push(";if(",r,"){i=m;"),s.push(x?"l=m+1}else{h=m-1}":"h=m-1}else{l=m+1}"),s.push("}"),s.push(o?"return -1};":"return i};"),s.join("")}function v(u,r,x,O){return new Function([t("A","x"+u+"y",r,["y"],!1,O),t("B","x"+u+"y",r,["y"],!0,O),t("P","c(x,y)"+u+"0",r,["y","c"],!1,O),t("Q","c(x,y)"+u+"0",r,["y","c"],!0,O),"function dispatchBsearch",x,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",x].join(""))()}P.exports={ge:v(">=",!1,"GE"),gt:v(">",!1,"GT"),lt:v("<",!0,"LT"),le:v("<=",!0,"LE"),eq:v("-",!0,"EQ",!0)}}),j=S&&"object"==typeof S&&"default"in S?S.default:S,U=dt(function(P){function t(c,T,E,z,rt){this.mid=c,this.left=T,this.right=E,this.leftPoints=z,this.rightPoints=rt,this.count=(T?T.count:0)+(E?E.count:0)+z.length}function v(c,T){c.mid=T.mid,c.left=T.left,c.right=T.right,c.leftPoints=T.leftPoints,c.rightPoints=T.rightPoints,c.count=T.count}function u(c,T){var E=f(T);c.mid=E.mid,c.left=E.left,c.right=E.right,c.leftPoints=E.leftPoints,c.rightPoints=E.rightPoints,c.count=E.count}function r(c,T){var E=c.intervals([]);E.push(T),u(c,E)}function x(c,T){var E=c.intervals([]),z=E.indexOf(T);return 0>z?G:(E.splice(z,1),u(c,E),B)}function O(c,T,E){for(var z=0;z<c.length&&c[z][0]<=T;++z){var rt=E(c[z]);if(rt)return rt}}function b(c,T,E){for(var z=c.length-1;z>=0&&c[z][1]>=T;--z){var rt=E(c[z]);if(rt)return rt}}function o(c,T){for(var E=0;E<c.length;++E){var z=T(c[E]);if(z)return z}}function s(c,T){return c-T}function m(c,T){return c[0]-T[0]||c[1]-T[1]}function a(c,T){return c[1]-T[1]||c[0]-T[0]}function f(c){if(0===c.length)return null;for(var T=[],E=0;E<c.length;++E)T.push(c[E][0],c[E][1]);T.sort(s);var z=T[T.length>>1],rt=[],ot=[],vt=[];for(E=0;E<c.length;++E){var _t=c[E];_t[1]<z?rt.push(_t):z<_t[0]?ot.push(_t):vt.push(_t)}var kt=vt,Gt=vt.slice();return kt.sort(m),Gt.sort(a),new t(z,f(rt),f(ot),kt,Gt)}function d(c){this.root=c}var k=j,G=0,B=1;P.exports=function w(c){return new d(c&&0!==c.length?f(c):null)};var p=t.prototype;p.intervals=function(c){return c.push.apply(c,this.leftPoints),this.left&&this.left.intervals(c),this.right&&this.right.intervals(c),c},p.insert=function(c){var T=this.count-this.leftPoints.length;if(this.count+=1,c[1]<this.mid)this.left?4*(this.left.count+1)>3*(T+1)?r(this,c):this.left.insert(c):this.left=f([c]);else if(c[0]>this.mid)this.right?4*(this.right.count+1)>3*(T+1)?r(this,c):this.right.insert(c):this.right=f([c]);else{var E=k.ge(this.leftPoints,c,m),z=k.ge(this.rightPoints,c,a);this.leftPoints.splice(E,0,c),this.rightPoints.splice(z,0,c)}},p.remove=function(c){var T=this.count-this.leftPoints;if(c[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(T-1)?x(this,c):2===(z=this.left.remove(c))?(this.left=null,this.count-=1,B):(z===B&&(this.count-=1),z):G;if(c[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(T-1)?x(this,c):2===(z=this.right.remove(c))?(this.right=null,this.count-=1,B):(z===B&&(this.count-=1),z):G;if(1===this.count)return this.leftPoints[0]===c?2:G;if(1===this.leftPoints.length&&this.leftPoints[0]===c){if(this.left&&this.right){for(var ot=this,vt=this.left;vt.right;)ot=vt,vt=vt.right;if(ot===this)vt.right=this.right;else{var _t=this.left,z=this.right;ot.count-=vt.count,ot.right=vt.left,vt.left=_t,vt.right=z}v(this,vt),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else v(this,this.left?this.left:this.right);return B}for(_t=k.ge(this.leftPoints,c,m);_t<this.leftPoints.length&&this.leftPoints[_t][0]===c[0];++_t)if(this.leftPoints[_t]===c)for(this.count-=1,this.leftPoints.splice(_t,1),z=k.ge(this.rightPoints,c,a);z<this.rightPoints.length&&this.rightPoints[z][1]===c[1];++z)if(this.rightPoints[z]===c)return this.rightPoints.splice(z,1),B;return G},p.queryPoint=function(c,T){return c<this.mid?this.left&&(E=this.left.queryPoint(c,T))?E:O(this.leftPoints,c,T):c>this.mid?this.right&&(E=this.right.queryPoint(c,T))?E:b(this.rightPoints,c,T):o(this.leftPoints,T);var E},p.queryInterval=function(c,T,E){var z;return c<this.mid&&this.left&&(z=this.left.queryInterval(c,T,E))||T>this.mid&&this.right&&(z=this.right.queryInterval(c,T,E))?z:T<this.mid?O(this.leftPoints,T,E):c>this.mid?b(this.rightPoints,c,E):o(this.leftPoints,E)};var l=d.prototype;l.insert=function(c){this.root?this.root.insert(c):this.root=new t(c[0],null,null,[c],[c])},l.remove=function(c){if(this.root){var T=this.root.remove(c);return 2===T&&(this.root=null),T!==G}return!1},l.queryPoint=function(c,T){return this.root?this.root.queryPoint(c,T):void 0},l.queryInterval=function(c,T,E){return T>=c&&this.root?this.root.queryInterval(c,T,E):void 0},Object.defineProperty(l,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(l,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})}),W=U&&"object"==typeof U&&"default"in U?U.default:U,I=dt(function(P){P.exports=function v(u,r){var x=0|u.length,O=0|r.length;if(1===x&&1===O)return function t(u,r){var x=u+r,O=x-u,m=u-(x-O)+(r-O);return m?[m,x]:[x]}(u[0],-r[0]);var b,o,m=new Array(x+O),a=0,f=0,d=0,w=Math.abs,k=u[f],G=w(k),B=-r[d],h=w(B);h>G?(o=k,x>(f+=1)&&(G=w(k=u[f]))):(o=B,O>(d+=1)&&(h=w(B=-r[d]))),x>f&&h>G||d>=O?(b=k,x>(f+=1)&&(G=w(k=u[f]))):(b=B,O>(d+=1)&&(h=w(B=-r[d])));for(var p,l,z=b+o,rt=z-b,ot=o-rt,vt=ot,_t=z;x>f&&O>d;)h>G?(b=k,x>(f+=1)&&(G=w(k=u[f]))):(b=B,O>(d+=1)&&(h=w(B=-r[d]))),(ot=(o=vt)-(rt=(z=b+o)-b))&&(m[a++]=ot),vt=_t-((p=_t+z)-(l=p-_t))+(z-l),_t=p;for(;x>f;)(ot=(o=vt)-(rt=(z=(b=k)+o)-b))&&(m[a++]=ot),vt=_t-((p=_t+z)-(l=p-_t))+(z-l),_t=p,x>(f+=1)&&(k=u[f]);for(;O>d;)(ot=(o=vt)-(rt=(z=(b=B)+o)-b))&&(m[a++]=ot),vt=_t-((p=_t+z)-(l=p-_t))+(z-l),_t=p,O>(d+=1)&&(B=-r[d]);return vt&&(m[a++]=vt),_t&&(m[a++]=_t),a||(m[a++]=0),m.length=a,m}}),g=I&&"object"==typeof I&&"default"in I?I.default:I,_=dt(function(P){P.exports=function t(v,u,r){var x=v+u,O=x-v,o=u-O,s=v-(x-O);return r?(r[0]=s+o,r[1]=x,r):[s+o,x]}}),R=_&&"object"==typeof _&&"default"in _?_.default:_,M=dt(function(P){P.exports=function t(u,r,x){var O=u*r,b=v*u,s=b-(b-u),m=u-s,a=v*r,d=a-(a-r),w=r-d,h=m*w-(O-s*d-m*d-s*w);return x?(x[0]=h,x[1]=O,x):[h,O]};var v=+(Math.pow(2,27)+1)}),q=M&&"object"==typeof M&&"default"in M?M.default:M,N=dt(function(P){var v=q,u=R;P.exports=function t(r,x){var O=r.length;if(1===O){var b=v(r[0],x);return b[0]?b:[b[1]]}var o=new Array(2*O),s=[.1,.1],m=[.1,.1],a=0;v(r[0],x,s),s[0]&&(o[a++]=s[0]);for(var f=1;O>f;++f){v(r[f],x,m),u(s[1],m[0],s),s[0]&&(o[a++]=s[0]);var w=m[1],k=s[1],G=w+k,h=k-(G-w);s[1]=G,h&&(o[a++]=h)}return s[1]&&(o[a++]=s[1]),0===a&&(o[a++]=0),o.length=a,o}}),J=N&&"object"==typeof N&&"default"in N?N.default:N,Q=dt(function(P){P.exports=function v(u,r){var x=0|u.length,O=0|r.length;if(1===x&&1===O)return function t(u,r){var x=u+r,O=x-u,m=u-(x-O)+(r-O);return m?[m,x]:[x]}(u[0],r[0]);var b,o,m=new Array(x+O),a=0,f=0,d=0,w=Math.abs,k=u[f],G=w(k),B=r[d],h=w(B);h>G?(o=k,x>(f+=1)&&(G=w(k=u[f]))):(o=B,O>(d+=1)&&(h=w(B=r[d]))),x>f&&h>G||d>=O?(b=k,x>(f+=1)&&(G=w(k=u[f]))):(b=B,O>(d+=1)&&(h=w(B=r[d])));for(var p,l,z=b+o,rt=z-b,ot=o-rt,vt=ot,_t=z;x>f&&O>d;)h>G?(b=k,x>(f+=1)&&(G=w(k=u[f]))):(b=B,O>(d+=1)&&(h=w(B=r[d]))),(ot=(o=vt)-(rt=(z=b+o)-b))&&(m[a++]=ot),vt=_t-((p=_t+z)-(l=p-_t))+(z-l),_t=p;for(;x>f;)(ot=(o=vt)-(rt=(z=(b=k)+o)-b))&&(m[a++]=ot),vt=_t-((p=_t+z)-(l=p-_t))+(z-l),_t=p,x>(f+=1)&&(k=u[f]);for(;O>d;)(ot=(o=vt)-(rt=(z=(b=B)+o)-b))&&(m[a++]=ot),vt=_t-((p=_t+z)-(l=p-_t))+(z-l),_t=p,O>(d+=1)&&(B=r[d]);return vt&&(m[a++]=vt),_t&&(m[a++]=_t),a||(m[a++]=0),m.length=a,m}}),nt=Q&&"object"==typeof Q&&"default"in Q?Q.default:Q,et=dt(function(P){function t(l,c){for(var T=new Array(l.length-1),E=1;E<l.length;++E)for(var z=T[E-1]=new Array(l.length-1),rt=0,ot=0;rt<l.length;++rt)rt!==c&&(z[ot++]=l[E][rt]);return T}function u(l){return 1&l?"-":""}function r(l){if(1===l.length)return l[0];if(2===l.length)return["sum(",l[0],",",l[1],")"].join("");var c=l.length>>1;return["sum(",r(l.slice(0,c)),",",r(l.slice(c)),")"].join("")}function x(l){if(2===l.length)return[["sum(prod(",l[0][0],",",l[1][1],"),prod(-",l[0][1],",",l[1][0],"))"].join("")];for(var c=[],T=0;T<l.length;++T)c.push(["scale(",r(x(t(l,T))),",",u(T),l[0][T],")"].join(""));return c}function O(l){for(var c=[],T=[],E=function v(l){for(var c=new Array(l),T=0;l>T;++T){c[T]=new Array(l);for(var E=0;l>E;++E)c[T][E]=["m",E,"[",l-T-1,"]"].join("")}return c}(l),z=[],rt=0;l>rt;++rt)1&rt?T.push.apply(T,x(t(E,rt))):c.push.apply(c,x(t(E,rt))),z.push("m"+rt);var ot=r(c),vt=r(T),_t="orientation"+l+"Exact",kt=["function ",_t,"(",z.join(),"){var p=",ot,",n=",vt,",d=sub(p,n);return d[d.length-1];};return ",_t].join("");return new Function("sum","prod","scale","sub",kt)(m,s,a,f)}function b(l){var c=p[l.length];return c||(c=p[l.length]=O(l.length)),c.apply(void 0,l)}var s=q,m=nt,a=J,f=g,B=O(3),h=O(4),p=[function(){return 0},function(){return 0},function(l,c){return c[0]-l[0]},function(l,c,T){var E,z=(l[1]-T[1])*(c[0]-T[0]),rt=(l[0]-T[0])*(c[1]-T[1]),ot=z-rt;if(z>0){if(0>=rt)return ot;E=z+rt}else{if(!(0>z)||rt>=0)return ot;E=-(z+rt)}var vt=33306690738754716e-32*E;return ot>=vt||-vt>=ot?ot:B(l,c,T)},function(l,c,T,E){var z=l[0]-E[0],rt=c[0]-E[0],ot=T[0]-E[0],vt=l[1]-E[1],_t=c[1]-E[1],kt=T[1]-E[1],Gt=l[2]-E[2],$t=c[2]-E[2],Vt=T[2]-E[2],Kt=rt*kt,se=ot*_t,ve=ot*vt,he=z*kt,Le=z*_t,Pe=rt*vt,We=Gt*(Kt-se)+$t*(ve-he)+Vt*(Le-Pe),ae=7771561172376103e-31*((Math.abs(Kt)+Math.abs(se))*Math.abs(Gt)+(Math.abs(ve)+Math.abs(he))*Math.abs($t)+(Math.abs(Le)+Math.abs(Pe))*Math.abs(Vt));return We>ae||-We>ae?We:h(l,c,T,E)}];!function o(){for(;p.length<=5;)p.push(O(p.length));for(var l=[],c=["slow"],T=0;5>=T;++T)l.push("a"+T),c.push("o"+T);var E=["function getOrientation(",l.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(T=2;5>=T;++T)E.push("case ",T,":return o",T,"(",l.slice(0,T).join(),");");E.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),c.push(E.join(""));var z=Function.apply(void 0,c);for(P.exports=z.apply(void 0,[b].concat(p)),T=0;5>=T;++T)P.exports[T]=p[T]}()}),V=et&&"object"==typeof et&&"default"in et?et.default:et,Z=dt(function(P){function t(r,x){var O,b,f,d;if(x[0][0]<x[1][0])O=x[0],b=x[1];else{if(!(x[0][0]>x[1][0])){var o=Math.min(r[0][1],r[1][1]),s=Math.max(r[0][1],r[1][1]),m=Math.min(x[0][1],x[1][1]),a=Math.max(x[0][1],x[1][1]);return m>s?s-m:o>a?o-a:s-a}O=x[1],b=x[0]}r[0][1]<r[1][1]?(f=r[0],d=r[1]):(f=r[1],d=r[0]);var w=u(b,O,f);return w||(w=u(b,O,d))||d-b}P.exports=function v(r,x){var O,b,o,s;if(x[0][0]<x[1][0])O=x[0],b=x[1];else{if(!(x[0][0]>x[1][0]))return t(x,r);O=x[1],b=x[0]}if(r[0][0]<r[1][0])o=r[0],s=r[1];else{if(!(r[0][0]>r[1][0]))return-t(r,x);o=r[1],s=r[0]}var m=u(O,b,s),a=u(O,b,o);if(0>m){if(0>=a)return m}else if(m>0){if(a>=0)return m}else if(a)return a;if(m=u(s,o,b),a=u(s,o,O),0>m){if(0>=a)return m}else if(m>0){if(a>=0)return m}else if(a)return a;return b[0]-s[0]};var u=V}),st=Z&&"object"==typeof Z&&"default"in Z?Z.default:Z,bt=dt(function(P){function t(h,p,l,c,T,E){this._color=h,this.key=p,this.value=l,this.left=c,this.right=T,this._count=E}function v(h){return new t(h._color,h.key,h.value,h.left,h.right,h._count)}function u(h,p){return new t(h,p.key,p.value,p.left,p.right,p._count)}function r(h){h._count=1+(h.left?h.left._count:0)+(h.right?h.right._count:0)}function x(h,p){this._compare=h,this.root=p}function O(h,p){var l;return p.left&&(l=O(h,p.left))?l:(l=h(p.key,p.value))||(p.right?O(h,p.right):void 0)}function b(h,p,l,c){if(0>=p(h,c.key)){var E;if(c.left&&(E=b(h,p,l,c.left)))return E;if(E=l(c.key,c.value))return E}return c.right?b(h,p,l,c.right):void 0}function o(h,p,l,c,T){var E,z=l(h,T.key),rt=l(p,T.key);return 0>=z&&(T.left&&(E=o(h,p,l,c,T.left))||rt>0&&(E=c(T.key,T.value)))?E:rt>0&&T.right?o(h,p,l,c,T.right):void 0}function s(h,p){this.tree=h,this._stack=p}function m(h,p){h.key=p.key,h.value=p.value,h.left=p.left,h.right=p.right,h._color=p._color,h._count=p._count}function f(h,p){return p>h?-1:h>p?1:0}P.exports=function d(h){return new x(h||f,null)};var G=x.prototype;Object.defineProperty(G,"keys",{get:function(){var h=[];return this.forEach(function(p,l){h.push(p)}),h}}),Object.defineProperty(G,"values",{get:function(){var h=[];return this.forEach(function(p,l){h.push(l)}),h}}),Object.defineProperty(G,"length",{get:function(){return this.root?this.root._count:0}}),G.insert=function(h,p){for(var l=this._compare,c=this.root,T=[],E=[];c;){var z=l(h,c.key);T.push(c),E.push(z),c=0>=z?c.left:c.right}T.push(new t(0,h,p,null,null,1));for(var rt=T.length-2;rt>=0;--rt)c=T[rt],T[rt]=E[rt]<=0?new t(c._color,c.key,c.value,T[rt+1],c.right,c._count+1):new t(c._color,c.key,c.value,c.left,T[rt+1],c._count+1);for(rt=T.length-1;rt>1;--rt){var ot=T[rt-1];if(c=T[rt],1===ot._color||1===c._color)break;var vt=T[rt-2];if(vt.left===ot)if(ot.left===c){if(!(_t=vt.right)||0!==_t._color){vt._color=0,vt.left=ot.right,ot._color=1,ot.right=vt,T[rt-2]=ot,T[rt-1]=c,r(vt),r(ot),rt>=3&&((kt=T[rt-3]).left===vt?kt.left=ot:kt.right=ot);break}ot._color=1,vt.right=u(1,_t),vt._color=0,rt-=1}else{if(!(_t=vt.right)||0!==_t._color){ot.right=c.left,vt._color=0,vt.left=c.right,c._color=1,c.left=ot,c.right=vt,T[rt-2]=c,T[rt-1]=ot,r(vt),r(ot),r(c),rt>=3&&((kt=T[rt-3]).left===vt?kt.left=c:kt.right=c);break}ot._color=1,vt.right=u(1,_t),vt._color=0,rt-=1}else if(ot.right===c){if(!(_t=vt.left)||0!==_t._color){vt._color=0,vt.right=ot.left,ot._color=1,ot.left=vt,T[rt-2]=ot,T[rt-1]=c,r(vt),r(ot),rt>=3&&((kt=T[rt-3]).right===vt?kt.right=ot:kt.left=ot);break}ot._color=1,vt.left=u(1,_t),vt._color=0,rt-=1}else{var _t;if(!(_t=vt.left)||0!==_t._color){var kt;ot.left=c.right,vt._color=0,vt.right=c.left,c._color=1,c.right=ot,c.left=vt,T[rt-2]=c,T[rt-1]=ot,r(vt),r(ot),r(c),rt>=3&&((kt=T[rt-3]).right===vt?kt.right=c:kt.left=c);break}ot._color=1,vt.left=u(1,_t),vt._color=0,rt-=1}}return T[0]._color=1,new x(l,T[0])},G.forEach=function(h,p,l){if(this.root)switch(arguments.length){case 1:return O(h,this.root);case 2:return b(p,this._compare,h,this.root);case 3:return this._compare(p,l)>=0?void 0:o(p,l,this._compare,h,this.root)}},Object.defineProperty(G,"begin",{get:function(){for(var h=[],p=this.root;p;)h.push(p),p=p.left;return new s(this,h)}}),Object.defineProperty(G,"end",{get:function(){for(var h=[],p=this.root;p;)h.push(p),p=p.right;return new s(this,h)}}),G.at=function(h){if(0>h)return new s(this,[]);for(var p=this.root,l=[];;){if(l.push(p),p.left){if(h<p.left._count){p=p.left;continue}h-=p.left._count}if(!h)return new s(this,l);if(h-=1,!p.right||h>=p.right._count)break;p=p.right}return new s(this,[])},G.ge=function(h){for(var p=this._compare,l=this.root,c=[],T=0;l;){var E=p(h,l.key);c.push(l),0>=E&&(T=c.length),l=0>=E?l.left:l.right}return c.length=T,new s(this,c)},G.gt=function(h){for(var p=this._compare,l=this.root,c=[],T=0;l;){var E=p(h,l.key);c.push(l),0>E&&(T=c.length),l=0>E?l.left:l.right}return c.length=T,new s(this,c)},G.lt=function(h){for(var p=this._compare,l=this.root,c=[],T=0;l;){var E=p(h,l.key);c.push(l),E>0&&(T=c.length),l=0>=E?l.left:l.right}return c.length=T,new s(this,c)},G.le=function(h){for(var p=this._compare,l=this.root,c=[],T=0;l;){var E=p(h,l.key);c.push(l),E>=0&&(T=c.length),l=0>E?l.left:l.right}return c.length=T,new s(this,c)},G.find=function(h){for(var p=this._compare,l=this.root,c=[];l;){var T=p(h,l.key);if(c.push(l),0===T)return new s(this,c);l=0>=T?l.left:l.right}return new s(this,[])},G.remove=function(h){var p=this.find(h);return p?p.remove():this},G.get=function(h){for(var p=this._compare,l=this.root;l;){var c=p(h,l.key);if(0===c)return l.value;l=0>=c?l.left:l.right}};var B=s.prototype;Object.defineProperty(B,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(B,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),B.clone=function(){return new s(this.tree,this._stack.slice())},B.remove=function(){var h=this._stack;if(0===h.length)return this.tree;var p=new Array(h.length);p[p.length-1]=new t((l=h[h.length-1])._color,l.key,l.value,l.left,l.right,l._count);for(var c=h.length-2;c>=0;--c){var l;p[c]=(l=h[c]).left===h[c+1]?new t(l._color,l.key,l.value,p[c+1],l.right,l._count):new t(l._color,l.key,l.value,l.left,p[c+1],l._count)}if((l=p[p.length-1]).left&&l.right){var T=p.length;for(l=l.left;l.right;)p.push(l),l=l.right;var E=p[T-1];for(p.push(new t(l._color,E.key,E.value,l.left,l.right,l._count)),p[T-1].key=l.key,p[T-1].value=l.value,c=p.length-2;c>=T;--c)p[c]=new t((l=p[c])._color,l.key,l.value,l.left,p[c+1],l._count);p[T-1].left=p[T]}if(0===(l=p[p.length-1])._color){var z=p[p.length-2];for(z.left===l?z.left=null:z.right===l&&(z.right=null),p.pop(),c=0;c<p.length;++c)p[c]._count--;return new x(this.tree._compare,p[0])}if(l.left||l.right){for(l.left?m(l,l.left):l.right&&m(l,l.right),l._color=1,c=0;c<p.length-1;++c)p[c]._count--;return new x(this.tree._compare,p[0])}if(1===p.length)return new x(this.tree._compare,null);for(c=0;c<p.length;++c)p[c]._count--;var rt=p[p.length-2];return function a(h){for(var p,l,c,T,E=h.length-1;E>=0;--E){if(p=h[E],0===E)return void(p._color=1);if((l=h[E-1]).left===p){if((c=l.right).right&&0===c.right._color)return T=(c=l.right=v(c)).right=v(c.right),l.right=c.left,c.left=l,c.right=T,c._color=l._color,p._color=1,l._color=1,T._color=1,r(l),r(c),E>1&&((z=h[E-2]).left===l?z.left=c:z.right=c),void(h[E-1]=c);if(c.left&&0===c.left._color)return T=(c=l.right=v(c)).left=v(c.left),l.right=T.left,c.left=T.right,T.left=l,T.right=c,T._color=l._color,l._color=1,c._color=1,p._color=1,r(l),r(c),r(T),E>1&&((z=h[E-2]).left===l?z.left=T:z.right=T),void(h[E-1]=T);if(1===c._color){if(0===l._color)return l._color=1,void(l.right=u(0,c));l.right=u(0,c);continue}c=v(c),l.right=c.left,c.left=l,c._color=l._color,l._color=0,r(l),r(c),E>1&&((z=h[E-2]).left===l?z.left=c:z.right=c),h[E-1]=c,h[E]=l,E+1<h.length?h[E+1]=p:h.push(p),E+=2}else{if((c=l.left).left&&0===c.left._color)return T=(c=l.left=v(c)).left=v(c.left),l.left=c.right,c.right=l,c.left=T,c._color=l._color,p._color=1,l._color=1,T._color=1,r(l),r(c),E>1&&((z=h[E-2]).right===l?z.right=c:z.left=c),void(h[E-1]=c);if(c.right&&0===c.right._color)return T=(c=l.left=v(c)).right=v(c.right),l.left=T.right,c.right=T.left,T.right=l,T.left=c,T._color=l._color,l._color=1,c._color=1,p._color=1,r(l),r(c),r(T),E>1&&((z=h[E-2]).right===l?z.right=T:z.left=T),void(h[E-1]=T);if(1===c._color){if(0===l._color)return l._color=1,void(l.left=u(0,c));l.left=u(0,c);continue}var z;c=v(c),l.left=c.right,c.right=l,c._color=l._color,l._color=0,r(l),r(c),E>1&&((z=h[E-2]).right===l?z.right=c:z.left=c),h[E-1]=c,h[E]=l,E+1<h.length?h[E+1]=p:h.push(p),E+=2}}}(p),rt.left===l?rt.left=null:rt.right=null,new x(this.tree._compare,p[0])},Object.defineProperty(B,"key",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].key:void 0},enumerable:!0}),Object.defineProperty(B,"value",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].value:void 0},enumerable:!0}),Object.defineProperty(B,"index",{get:function(){var h=0,p=this._stack;if(0===p.length){var l=this.tree.root;return l?l._count:0}p[p.length-1].left&&(h=p[p.length-1].left._count);for(var c=p.length-2;c>=0;--c)p[c+1]===p[c].right&&(++h,p[c].left&&(h+=p[c].left._count));return h},enumerable:!0}),B.next=function(){var h=this._stack;if(0!==h.length){var p=h[h.length-1];if(p.right)for(p=p.right;p;)h.push(p),p=p.left;else for(h.pop();h.length>0&&h[h.length-1].right===p;)p=h[h.length-1],h.pop()}},Object.defineProperty(B,"hasNext",{get:function(){var h=this._stack;if(0===h.length)return!1;if(h[h.length-1].right)return!0;for(var p=h.length-1;p>0;--p)if(h[p-1].left===h[p])return!0;return!1}}),B.update=function(h){var p=this._stack;if(0===p.length)throw new Error("Can't update empty node!");var l=new Array(p.length),c=p[p.length-1];l[l.length-1]=new t(c._color,c.key,h,c.left,c.right,c._count);for(var T=p.length-2;T>=0;--T)l[T]=(c=p[T]).left===p[T+1]?new t(c._color,c.key,c.value,l[T+1],c.right,c._count):new t(c._color,c.key,c.value,c.left,l[T+1],c._count);return new x(this.tree._compare,l[0])},B.prev=function(){var h=this._stack;if(0!==h.length){var p=h[h.length-1];if(p.left)for(p=p.left;p;)h.push(p),p=p.right;else for(h.pop();h.length>0&&h[h.length-1].left===p;)p=h[h.length-1],h.pop()}},Object.defineProperty(B,"hasPrev",{get:function(){var h=this._stack;if(0===h.length)return!1;if(h[h.length-1].left)return!0;for(var p=h.length-1;p>0;--p)if(h[p-1].right===h[p])return!0;return!1}})}),Tt=bt&&"object"==typeof bt&&"default"in bt?bt.default:bt,ht=dt(function(P){function t(f,d,w){this.slabs=f,this.coordinates=d,this.horizontal=w}function v(f,d){return f.y-d}function u(f,d){for(var w=null;f;){var k,G,B=f.key;B[0][0]<B[1][0]?(k=B[0],G=B[1]):(k=B[1],G=B[0]);var h=s(k,G,d);if(0>h)f=f.left;else if(h>0)if(d[0]!==B[1][0])w=f,f=f.right;else{if(p=u(f.right,d))return p;f=f.left}else{if(d[0]!==B[1][0])return f;var p;if(p=u(f.right,d))return p;f=f.left}}return w}function r(f,d,w,k){this.y=f,this.index=d,this.start=w,this.closed=k}function x(f,d,w,k){this.x=f,this.segment=d,this.create=w,this.index=k}P.exports=function O(f){for(var d=f.length,w=2*d,k=new Array(w),G=0;d>G;++G){var B=f[G],h=B[0][0]<B[1][0];k[2*G]=new x(B[0][0],B,h,G),k[2*G+1]=new x(B[1][0],B,!h,G)}k.sort(function(ot,vt){var _t=ot.x-vt.x;return _t||(_t=ot.create-vt.create)||Math.min(ot.segment[0][1],ot.segment[1][1])-Math.min(vt.segment[0][1],vt.segment[1][1])});var p=o(m),l=[],c=[],T=[];for(G=0;w>G;){for(var E=k[G].x,z=[];w>G;){var rt=k[G];if(rt.x!==E)break;G+=1,rt.segment[0][0]===rt.x&&rt.segment[1][0]===rt.x?rt.create&&(rt.segment[0][1]<rt.segment[1][1]?(z.push(new r(rt.segment[0][1],rt.index,!0,!0)),z.push(new r(rt.segment[1][1],rt.index,!1,!1))):(z.push(new r(rt.segment[1][1],rt.index,!0,!1)),z.push(new r(rt.segment[0][1],rt.index,!1,!0)))):p=rt.create?p.insert(rt.segment,rt.index):p.remove(rt.segment)}l.push(p.root),c.push(E),T.push(z)}return new t(l,c,T)};var b=j,o=Tt,s=V,m=st;t.prototype.castUp=function(f){var d=b.le(this.coordinates,f[0]);if(0>d)return-1;var w=u(this.slabs[d],f),k=-1;if(w&&(k=w.value),this.coordinates[d]===f[0]){var G=null;if(w&&(G=w.key),d>0){var B=u(this.slabs[d-1],f);B&&(G?m(B.key,G)>0&&(G=B.key,k=B.value):(k=B.value,G=B.key))}var h=this.horizontal[d];if(h.length>0){var p=b.ge(h,f[1],v);if(p<h.length){var l=h[p];if(f[1]===l.y){if(l.closed)return l.index;for(;p<h.length-1&&h[p+1].y===f[1];)if((l=h[p+=1]).closed)return l.index;if(l.y===f[1]&&!l.start){if((p+=1)>=h.length)return k;l=h[p]}}if(l.start)if(G){var c=s(G[0],G[1],[f[0],l.y]);G[0][0]>G[1][0]&&(c=-c),c>0&&(k=l.index)}else k=l.index;else l.y!==f[1]&&(k=l.index)}}}return k}}),ft=ht&&"object"==typeof ht&&"default"in ht?ht.default:ht,jt=dt(function(P){function t(){return!0}function u(d){for(var w={},k=0;k<d.length;++k){var G=d[k],B=G[0][0],h=G[0][1],p=G[1][1],l=[Math.min(h,p),Math.max(h,p)];B in w?w[B].push(l):w[B]=[l]}var c={},T=Object.keys(w);for(k=0;k<T.length;++k)c[T[k]]=a(w[T[k]]);return function v(d){return function(w,k){var G=d[w];return!!G&&!!G.queryPoint(k,t)}}(c)}function x(d){return 1}P.exports=function o(d){for(var w=d.length,k=[],G=[],B=0;w>B;++B)for(var h=d[B],p=h.length,l=p-1,c=0;p>c;l=c++){var T=h[l],E=h[c];T[0]===E[0]?G.push([T,E]):k.push([T,E])}if(0===k.length)return 0===G.length?x:function O(d){return function(w){return d(w[0],w[1])?0:1}}(u(G));var z=m(k),rt=function r(d,w){return function(k){var G=f.le(w,k[0]);if(0>G)return 1;var B=d[G];if(!B){if(!(G>0&&w[G]===k[0]))return 1;B=d[G-1]}for(var h=1;B;){var p=B.key,l=s(k,p[0],p[1]);if(p[0][0]<p[1][0])if(0>l)B=B.left;else{if(!(l>0))return 0;h=-1,B=B.right}else if(l>0)B=B.left;else{if(!(0>l))return 0;h=1,B=B.right}}return h}}(z.slabs,z.coordinates);return 0===G.length?rt:function b(d,w){return function(k){return d(k[0],k[1])?0:w(k)}}(u(G),rt)};var s=V[3],m=ft,a=W,f=j}),qt=jt&&"object"==typeof jt&&"default"in jt?jt.default:jt,zt=dt(function(P,t){function O(f,d){var w,k=(d[0]-f[0])*a,G=Math.sin(k),B=Math.cos(k),h=Math.sin(f[1]*a),p=Math.cos(f[1]*a),l=Math.sin(d[1]*a),c=Math.cos(d[1]*a);return Math.atan2(Math.sqrt((w=c*G)*w+(w=p*l-h*c*B)*w),h*l+p*c*B)}function o(f){return(f=Math.sin(f/2))*f}var s=Math.PI,m=s/4,a=s/180;t.name="spherical",t.formatDistance=function v(f){var d=f*a*6371;return(d>1?d.toFixed(3)+"km":(1e3*d).toPrecision(3)+"m")+" ("+f.toPrecision(3)+"\xb0)"},t.ringArea=function u(f){if(!f.length)return 0;for(var d=0,w=f[0],k=w[0]*a,G=w[1]*a/2+m,B=k,h=Math.cos(G),p=Math.sin(G),l=1,c=f.length;c>l;++l){G=(w=f[l])[1]*a/2+m;var T=(k=w[0]*a)-B,E=Math.cos(G),z=Math.sin(G),rt=p*z,ot=h*E+rt*Math.cos(T),vt=rt*Math.sin(T);d+=Math.atan2(vt,ot),B=k,h=E,p=z}return 2*(d>s?d-2*s:-s>d?d+2*s:d)},t.absoluteArea=function r(f){return 0>f?f+4*s:f},t.triangleArea=function x(f){var d=O(f[0],f[1]),w=O(f[1],f[2]),k=O(f[2],f[0]),G=(d+w+k)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(G/2)*Math.tan((G-d)/2)*Math.tan((G-w)/2)*Math.tan((G-k)/2))))},t.distance=function b(f,d,w,k){return f*=a,d*=a,w*=a,k*=a,2*Math.asin(Math.sqrt(o(k-d)+Math.cos(d)*Math.cos(k)*o(w-f)))}}).ringArea,Ft=dt(function(P,t){t.name="cartesian",t.formatDistance=function v(O){return O.toString()},t.ringArea=function u(O){for(var b,o=-1,s=O.length,m=O[s-1],a=0;++o<s;)a+=(b=m)[0]*(m=O[o])[1]-b[1]*m[0];return.5*a},t.absoluteArea=Math.abs,t.triangleArea=function r(O){return Math.abs((O[0][0]-O[2][0])*(O[1][1]-O[0][1])-(O[0][0]-O[1][0])*(O[2][1]-O[0][1]))},t.distance=function x(O,b,o,s){var m=O-o,a=b-s;return Math.sqrt(m*m+a*a)}}).ringArea,Xt=dt(function(P){P.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}}),Ht=Xt&&"object"==typeof Xt&&"default"in Xt?Xt.default:Xt,Jt=dt(function(P){P.exports=function t(v){for(var u=new Array(v),r=0;v>r;++r)u[r]=r;return u}}),oe=Jt&&"object"==typeof Jt&&"default"in Jt?Jt.default:Jt,de=dt(function(P){function t(m,a){return m[0]-a[0]}function v(){var m,a=this.stride,f=new Array(a.length);for(m=0;m<f.length;++m)f[m]=[Math.abs(a[m]),m];f.sort(t);var d=new Array(f.length);for(m=0;m<d.length;++m)d[m]=f[m][1];return d}function u(m,a){var f=["View",a,"d",m].join("");0>a&&(f="View_Nil"+m);var d="generic"===m;if(-1===a){var w="function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+m+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+f+"(a){return new "+f+"(a);}";return new Function(w)()}if(0===a)return w="function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+m+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+f+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}",new Function("TrivialArray",w)(s[m][0]);w=["'use strict'"];var k=O(a),G=k.map(function(ot){return"i"+ot}),B="this.offset+"+k.map(function(ot){return"this.stride["+ot+"]*i"+ot}).join("+"),h=k.map(function(ot){return"b"+ot}).join(","),p=k.map(function(ot){return"c"+ot}).join(",");w.push("function "+f+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+m+"'","proto.dimension="+a),w.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+k.map(function(ot){return"this.shape["+ot+"]"}).join("*"),"}})"),1===a?w.push("proto.order=[0]"):(w.push("Object.defineProperty(proto,'order',{get:"),4>a?(w.push("function "+f+"_order(){"),2===a?w.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===a&&w.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):w.push("ORDER})")),w.push("proto.set=function "+f+"_set("+G.join(",")+",v){"),w.push(d?"return this.data.set("+B+",v)}":"return this.data["+B+"]=v}"),w.push("proto.get=function "+f+"_get("+G.join(",")+"){"),w.push(d?"return this.data.get("+B+")}":"return this.data["+B+"]}"),w.push("proto.index=function "+f+"_index(",G.join(),"){return "+B+"}"),w.push("proto.hi=function "+f+"_hi("+G.join(",")+"){return new "+f+"(this.data,"+k.map(function(ot){return["(typeof i",ot,"!=='number'||i",ot,"<0)?this.shape[",ot,"]:i",ot,"|0"].join("")}).join(",")+","+k.map(function(ot){return"this.stride["+ot+"]"}).join(",")+",this.offset)}");var l=k.map(function(ot){return"a"+ot+"=this.shape["+ot+"]"}),c=k.map(function(ot){return"c"+ot+"=this.stride["+ot+"]"});w.push("proto.lo=function "+f+"_lo("+G.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+c.join(","));for(var T=0;a>T;++T)w.push("if(typeof i"+T+"==='number'&&i"+T+">=0){d=i"+T+"|0;b+=c"+T+"*d;a"+T+"-=d}");for(w.push("return new "+f+"(this.data,"+k.map(function(ot){return"a"+ot}).join(",")+","+k.map(function(ot){return"c"+ot}).join(",")+",b)}"),w.push("proto.step=function "+f+"_step("+G.join(",")+"){var "+k.map(function(ot){return"a"+ot+"=this.shape["+ot+"]"}).join(",")+","+k.map(function(ot){return"b"+ot+"=this.stride["+ot+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),T=0;a>T;++T)w.push("if(typeof i"+T+"==='number'){d=i"+T+"|0;if(d<0){c+=b"+T+"*(a"+T+"-1);a"+T+"=ceil(-a"+T+"/d)}else{a"+T+"=ceil(a"+T+"/d)}b"+T+"*=d}");w.push("return new "+f+"(this.data,"+k.map(function(ot){return"a"+ot}).join(",")+","+k.map(function(ot){return"b"+ot}).join(",")+",c)}");var E=new Array(a),z=new Array(a);for(T=0;a>T;++T)E[T]="a[i"+T+"]",z[T]="b[i"+T+"]";for(w.push("proto.transpose=function "+f+"_transpose("+G+"){"+G.map(function(ot,vt){return ot+"=("+ot+"===undefined?"+vt+":"+ot+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+E.join(",")+","+z.join(",")+",this.offset)}"),w.push("proto.pick=function "+f+"_pick("+G+"){var a=[],b=[],c=this.offset"),T=0;a>T;++T)w.push("if(typeof i"+T+"==='number'&&i"+T+">=0){c=(c+this.stride["+T+"]*i"+T+")|0}else{a.push(this.shape["+T+"]);b.push(this.stride["+T+"])}");return w.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),w.push("return function construct_"+f+"(data,shape,stride,offset){return new "+f+"(data,"+k.map(function(ot){return"shape["+ot+"]"}).join(",")+","+k.map(function(ot){return"stride["+ot+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",w.join("\n"))(s[m],v)}var O=oe,b=Ht,o=typeof Float64Array<"u",s={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};P.exports=function x(m,a,f,d){if(void 0===m)return(0,s.array[0])([]);"number"==typeof m&&(m=[m]),void 0===a&&(a=[m.length]);var w=a.length;if(void 0===f){f=new Array(w);for(var k=w-1,G=1;k>=0;--k)f[k]=G,G*=a[k]}if(void 0===d)for(d=0,k=0;w>k;++k)f[k]<0&&(d-=(a[k]-1)*f[k]);for(var B=function r(m){if(b(m))return"buffer";if(o)switch(Object.prototype.toString.call(m)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(m)?"array":"generic"}(m),h=s[B];h.length<=w+1;)h.push(u(B,h.length-1));return(0,h[w+1])(m,a,f,d)}}),le=de&&"object"==typeof de&&"default"in de?de.default:de;mt.minMax=function Et(P){for(var t=P.length,v=1/0,u=-1/0;t--;){var r=P[t];null==r||(v>r?v=r:r>u&&(u=r))}return v===1/0?v=u:u===-1/0&&(u=v),v!==1/0&&v!==-1/0||(v=null,u=null),[v,u]},mt.indicesOfNearest=Bt,mt.indexOfNearest=hr,mt.DOMAIN=ir,mt.COVERAGE=He,mt.COVERAGECOLLECTION=qr,mt.COVJSON_DATATYPE_TUPLE=Hr,mt.COVJSON_DATATYPE_POLYGON=ai,mt.getLanguageTag=xe,mt.getLanguageString=Jr,mt.stringifyUnit=function Gr(P,t){if(!P)return"";if(P.symbol){var v=P.symbol.value||P.symbol;return"http://www.opengis.net/def/uom/UCUM/"===P.symbol.type&&("Cel"===v?v="\xb0C":"1"===v&&(v="")),v}return Jr(P.label,t)},mt.minMaxOfRange=function Br(P){var t=1/0,v=-1/0;return Nr(P,function(r){null!==r&&(t>r&&(t=r),r>v&&(v=r))}),t===1/0?[void 0,void 0]:[t,v]},mt.reduceRange=function Ur(P,t,v){var u=v;return Nr(P,function(x){u=t(u,x)}),u},mt.iterateRange=Nr,mt.getCategory=function zr(P,t){var v=!0,u=!1,r=void 0;try{for(var x,O=function(){var s=Mt(x.value,2),m=s[0];if(-1!==s[1].indexOf(t))return{v:P.observedProperty.categories.filter(function(d){return d.id===m})[0]}},b=P.categoryEncoding[Symbol.iterator]();!(v=(x=b.next()).done);v=!0){var o=O();if("object"===(typeof o>"u"?"undefined":ut(o)))return o.v}}catch(s){u=!0,r=s}finally{try{!v&&b.return&&b.return()}finally{if(u)throw r}}},mt.isCoverage=yr,mt.checkCoverage=Re,mt.isDomain=vr,mt.checkDomain=Dr,mt.getReferenceObject=ur,mt.getHorizontalCRSReferenceObject=Ve,mt.isEllipsoidalCRS=Sr,mt.getProjection=lr,mt.loadProjection=function sr(P){try{return lr(P)}catch{}var t=Ve(P);if(!t)throw new Error("No horizontal CRS found in coverage domain");return Sn(t.system.id).then(function(u){return rr(u)})},mt.getHorizontalCRSComponents=function Fr(P){return er(P)},mt.getHorizontalCRSCoordinateIDs=er,mt.reprojectCoords=function Vr(P,t,v){return v.project(t.unproject(P))},mt.getLongitudeWrapper=fr,mt.isLongitudeAxis=mr,mt.isISODateAxis=br,mt.asTime=Ne,mt.normalizeIndexSubsetConstraints=gr,mt.subsetDomainByIndex=Or,mt.fromDomain=function Pi(P){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];Dr(P);var v=t.gridAxes,u=Mt(v=void 0===v?["x","y"]:v,2),r=u[0],x=u[1],O="domain",o=P.axes.has(r)&&P.axes.has(x)&&(P.axes.get(r).values.length>1||P.axes.get(x).values.length>1),s=void 0,m=void 0,a="a";o?(s=[{id:a,label:{en:"A"}},{id:"b",label:{en:"B"}}],m=new Map([[a,[0]],["b",[1]]])):(s=[{id:a,label:{en:"X"}}],m=new Map([[a,[0]]]));var k=new Map;k.set(O,{key:O,observedProperty:{label:{en:"Domain"},categories:s},categoryEncoding:m});var B,G=new Map([].concat(wt(P.axes)).map(function(l){var c=Mt(l,2);return[c[0],c[1].values.length]}));B=o?function(c){var T=c.x,z=c.y;return function(c){return c%2}((void 0===T?0:T)+(void 0===z?0:z))?0:1}:function(){return 0};var p={type:He,domainType:P.domainType,parameters:k,loadDomain:function(){return Promise.resolve(P)},loadRange:function(){return Promise.resolve({shape:G,dataType:"integer",get:B})}};return Me(p),_e(p),p},mt.fromXndarray=function ii(P){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],v=t.parameter,u=void 0===v?{key:"p1",observedProperty:{label:{en:"Parameter 1"}}}:v,r=t.referencing,x=t.domainType,O=new Map;O.set(u.key,u),r||(r=[],P.coords.has("x")&&P.coords.has("y")&&r.push({coordinates:["x","y"],system:{type:"GeographicCRS",id:"http://www.opengis.net/def/crs/OGC/1.3/CRS84"}}),P.coords.has("t")&&r.push({coordinates:["t"],system:{type:"TemporalRS",calendar:"Gregorian"}}));var b=new Map,o=!0,s=!1,m=void 0;try{for(var a,f=P.coords[Symbol.iterator]();!(o=(a=f.next()).done);o=!0){for(var d=Mt(a.value,2),w=d[0],k=d[1],G=new Array(k.size),B=0;B<k.size;B++)G[B]=k.get(B);b.set(w,{key:w,coordinates:[w],values:G})}}catch(E){s=!0,m=E}finally{try{!o&&f.return&&f.return()}finally{if(s)throw m}}var h={type:ir,domainType:x,referencing:r,axes:b},p=new Map([].concat(wt(h.axes)).map(function(E){var z=Mt(E,2);return[z[0],z[1].values.length]})),l=-1!==P.dtype.indexOf("int")?"integer":"float",T={type:He,domainType:x,parameters:O,loadDomain:function(){return Promise.resolve(h)},loadRange:function(){return Promise.resolve({shape:p,dataType:l,get:P.xget.bind(P)})}};return Me(T),_e(T),T},mt.addSubsetFunctions=_e,mt.addLoadRangesFunction=Me,mt.reproject=function Je(P,t){return P.loadDomain().then(function(v){var u=Ve(v);if(u.coordinates.length>2)throw new Error("Reprojection not supported for >2D CRSs");if(u.coordinates.some(v.axes.has))throw new Error("Grid reprojection not supported yet");var r=Mt(u.coordinates,2),x=r[0],O=r[1],o=[].concat(wt(v.axes.values())).find(function(Vt){return u.coordinates.every(function(Kt){return-1!==Vt.coordinates.indexOf(Kt)})}),s=o.coordinates.indexOf(x),m=o.coordinates.indexOf(O),a=lr(v),f=lr(t),d=void 0;if(o.dataType!==Hr)throw new Error("Unsupported data type: "+o.dataType);d=o.values.map(function(Vt){return Vt.slice()});var w=!0,k=!1,G=void 0;try{for(var B,h=d[Symbol.iterator]();!(w=(B=h.next()).done);w=!0){var p=B.value,T=a.unproject({x:p[s],y:p[m]}),E=f.project(T),rt=E.y;p[s]=E.x,p[m]=rt}}catch(Vt){k=!0,G=Vt}finally{try{!w&&h.return&&h.return()}finally{if(k)throw G}}var ot=new Map(v.axes),vt=Ge(o);delete vt.bounds,vt.values=d,ot.set(o.key,vt);var _t=Ve(t);if(_t.coordinates.length>2)throw new Error("Reprojection not supported for >2D CRSs");var kt=v.referencing.map(function(Vt){return Vt===u?{coordinates:u.coordinates,system:_t.system}:Vt}),Gt={type:ir,domainType:v.domainType,axes:ot,referencing:kt};return{type:He,domainType:P.domainType,parameters:P.parameters,loadDomain:function(){return Promise.resolve(Gt)},loadRange:function(Vt){return P.loadRange(Vt)},loadRanges:function(Vt){return P.loadRanges(Vt)},subsetByIndex:function(Vt){return P.subsetByIndex(Vt).then(function(Kt){return Je(Kt,t)})},subsetByValue:function(Vt){return P.subsetByValue(Vt).then(function(Kt){return Je(Kt,t)})}}})},mt.subsetByBbox=function ri(P,t){var v,u=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2],r=Mt(t,4),O=r[1],o=r[3];return P.subsetByValue((pt(v={},u[0],{start:r[0],stop:r[2]}),pt(v,u[1],{start:O,stop:o}),v))},mt.subsetByIndex=Cr,mt.subsetByValue=xr,mt.withSimpleDerivedParameter=function Qr(P,t){var u=t.inputParameters,x=t.fn,O={parameter:t.parameter,inputParameters:u,dataType:t.dataType,fn:function(b){for(var o=arguments.length,s=Array(o>1?o-1:0),m=1;o>m;m++)s[m-1]=arguments[m];var a=u.map(function(f,d){return s[d].get(b)});return a.some(function(f){return null===f})?null:x.apply(void 0,wt(a))}};return Mr(P,O)},mt.withParameters=me,mt.withCategories=function we(P,t,v,u){if(Re(P),v.categories.some(function(rt){return!rt.id}))throw new Error('At least one category object is missing the "id" property');var r=Ge(P.parameters),x=Ge(r.get(t));r.set(t,x),r.get(t).observedProperty=v;var O=P.parameters.get(t).categoryEncoding,b=new Map,o=v.categories,s=!0,m=!1,a=void 0;try{for(var f,d=o[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var w=f.value,k=[],G=!0,B=!1,h=void 0;try{for(var p,l=u[Symbol.iterator]();!(G=(p=l.next()).done);G=!0){var c=Mt(p.value,2),T=c[0];c[1]===w.id&&O.has(T)&&k.push.apply(k,wt(O.get(T)))}}catch(rt){B=!0,h=rt}finally{try{!G&&l.return&&l.return()}finally{if(B)throw h}}k.length>0&&b.set(w.id,k)}}catch(rt){m=!0,a=rt}finally{try{!s&&d.return&&d.return()}finally{if(m)throw a}}return r.get(t).categoryEncoding=b,me(P,r)},mt.withDomainType=function Ae(P,t){Re(P);var v=function(r){return{type:ir,domainType:t,axes:r.axes,referencing:r.referencing}};return{type:He,domainType:t,parameters:P.parameters,loadDomain:function(){return P.loadDomain().then(v)},loadRange:function(r){return P.loadRange(r)},loadRanges:function(r){return P.loadRanges(r)},subsetByIndex:function(r){return P.subsetByIndex(r).then(function(x){return Ae(x,t)})},subsetByValue:function(r){return P.subsetByValue(r).then(function(x){return Ae(x,t)})}}},mt.asCovJSONDomainType=function cr(P){return P.loadDomain().then(function(t){})},mt.renameAxes=function _r(P,t){Re(P),t=new Map(t);var v=!0,u=!1,r=void 0;try{for(var x,O=P.axes.keys()[Symbol.iterator]();!(v=(x=O.next()).done);v=!0){var b=x.value;t.has(b)||t.set(b,b)}}catch(w){u=!0,r=w}finally{try{!v&&O.return&&O.return()}finally{if(u)throw r}}var o=function(w){var k=new Map,G=!0,B=!1,h=void 0;try{for(var p,l=t[Symbol.iterator]();!(G=(p=l.next()).done);G=!0){var c=Mt(p.value,2),E=c[1],z=w.axes.get(c[0]),vt=z.values,_t=z.bounds,kt={key:E,dataType:z.dataType,coordinates:z.coordinates.map(function(Vt){return t.has(Vt)?t.get(Vt):Vt}),values:vt,bounds:_t};k.set(E,kt)}}catch(Vt){B=!0,h=Vt}finally{try{!G&&l.return&&l.return()}finally{if(B)throw h}}var Gt=w.referencing.map(function(Vt){var se=Vt.system;return{coordinates:Vt.coordinates.map(function(ve){return t.has(ve)?t.get(ve):ve}),system:se}});return{type:ir,domainType:w.domainType,axes:k,referencing:Gt}},s=[].concat(wt(t)).map(function(w){var k=Mt(w,2);return"['"+k[0]+"']:obj['"+k[1]+"']"}).join(","),m=function(w){var k=new Function("range","return function get (obj){return range.get({"+s+"})}")(w);return{shape:new Map([].concat(wt(w.shape)).map(function(B){var h=Mt(B,2),l=h[1];return[t.get(h[0]),l]})),dataType:w.dataType,get:k}};return{type:He,domainType:P.domainType,parameters:P.parameters,loadDomain:function(){return P.loadDomain().then(o)},loadRange:function(w){return P.loadRange(w).then(m)},loadRanges:function(w){return P.loadRanges(w).then(function(k){return new Map([].concat(wt(k)).map(function(G){var B=Mt(G,2);return[B[0],m(B[1])]}))})},subsetByIndex:function(w){return P.subsetByIndex(w).then(function(k){return _r(k,t)})},subsetByValue:function(w){return P.subsetByValue(w).then(function(k){return _r(k,t)})}}},mt.mapRange=Er,mt.withDerivedParameter=Mr,mt.addCollectionQueryFunction=function ni(P){if(P.paging)throw new Error("Paged collections not supported");P.query=function(){return new C(P)}},mt.CollectionQuery=C,mt.ensureClockwisePolygon=Ye,mt.getPointInPolygonsFn=Xe,mt.maskByPolygon=function wr(P,t){var v=arguments.length<=2||void 0===arguments[2]?["x","y"]:arguments[2];Re(P),"Polygon"===t.type&&(t={type:"MultiPolygon",coordinates:[t.coordinates]});var u=t.coordinates;u.forEach(function(o){return Ye(o)});var r=Xe(u),x=Mt(v,2),O=x[0],b=x[1];return P.loadDomain().then(function(o){for(var s=o.axes.get(O).values,m=o.axes.get(b).values,a=le(new Uint8Array(s.length*m.length),[s.length,m.length]),f=0;f<s.length;f++)for(var d=0;d<m.length;d++){var w=r([s[f],m[d]])>=0;a.set(f,d,w)}var k=function(E,z){return a.get(E[O]||0,E[b]||0)?z.get(E):null},G=P,B=!0,h=!1,p=void 0;try{for(var l,c=P.parameters.keys()[Symbol.iterator]();!(B=(l=c.next()).done);B=!0)G=Er(G,l.value,k)}catch(E){h=!0,p=E}finally{try{!B&&c.return&&c.return()}finally{if(h)throw p}}return G})}}(this.CovUtils=this.CovUtils||{}),function(mt,Et){"use strict";function hr($){return!!$.constructor&&"function"==typeof $.constructor.isBuffer&&$.constructor.isBuffer($)}function Jr($,ut){return $[0]-ut[0]}function Gr(){var $,ut=this.stride,K=new Array(ut.length);for($=0;$<K.length;++$)K[$]=[Math.abs(ut[$]),$];K.sort(Jr);var yt=new Array(K.length);for($=0;$<yt.length;++$)yt[$]=K[$][1];return yt}function Br($,ut){var K=["View",ut,"d",$].join("");ut<0&&(K="View_Nil"+$);var yt="generic"===$;if(-1===ut){var pt="function "+K+"(a){this.data=a;};var proto="+K+".prototype;proto.dtype='"+$+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+K+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+K+"(a){return new "+K+"(a);}";return new Function(pt)()}if(0===ut)return pt="function "+K+"(a,d) {this.data = a;this.offset = d};var proto="+K+".prototype;proto.dtype='"+$+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+K+"_copy() {return new "+K+"(this.data,this.offset)};proto.pick=function "+K+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+K+"_get(){return "+(yt?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+K+"_set(v){return "+(yt?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+K+"(a,b,c,d){return new "+K+"(a,d)}",new Function("TrivialArray",pt)(cr[$][0]);pt=["'use strict'"];var Mt=me(ut),wt=Mt.map(function(Ut){return"i"+Ut}),Ot="this.offset+"+Mt.map(function(Ut){return"this.stride["+Ut+"]*i"+Ut}).join("+"),It=Mt.map(function(Ut){return"b"+Ut}).join(","),Nt=Mt.map(function(Ut){return"c"+Ut}).join(",");pt.push("function "+K+"(a,"+It+","+Nt+",d){this.data=a","this.shape=["+It+"]","this.stride=["+Nt+"]","this.offset=d|0}","var proto="+K+".prototype","proto.dtype='"+$+"'","proto.dimension="+ut),pt.push("Object.defineProperty(proto,'size',{get:function "+K+"_size(){return "+Mt.map(function(Ut){return"this.shape["+Ut+"]"}).join("*"),"}})"),1===ut?pt.push("proto.order=[0]"):(pt.push("Object.defineProperty(proto,'order',{get:"),ut<4?(pt.push("function "+K+"_order(){"),2===ut?pt.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===ut&&pt.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):pt.push("ORDER})")),pt.push("proto.set=function "+K+"_set("+wt.join(",")+",v){"),pt.push(yt?"return this.data.set("+Ot+",v)}":"return this.data["+Ot+"]=v}"),pt.push("proto.get=function "+K+"_get("+wt.join(",")+"){"),pt.push(yt?"return this.data.get("+Ot+")}":"return this.data["+Ot+"]}"),pt.push("proto.index=function "+K+"_index(",wt.join(),"){return "+Ot+"}"),pt.push("proto.hi=function "+K+"_hi("+wt.join(",")+"){return new "+K+"(this.data,"+Mt.map(function(Ut){return["(typeof i",Ut,"!=='number'||i",Ut,"<0)?this.shape[",Ut,"]:i",Ut,"|0"].join("")}).join(",")+","+Mt.map(function(Ut){return"this.stride["+Ut+"]"}).join(",")+",this.offset)}");var Rt=Mt.map(function(Ut){return"a"+Ut+"=this.shape["+Ut+"]"}),te=Mt.map(function(Ut){return"c"+Ut+"=this.stride["+Ut+"]"});pt.push("proto.lo=function "+K+"_lo("+wt.join(",")+"){var b=this.offset,d=0,"+Rt.join(",")+","+te.join(","));for(var Ct=0;Ct<ut;++Ct)pt.push("if(typeof i"+Ct+"==='number'&&i"+Ct+">=0){d=i"+Ct+"|0;b+=c"+Ct+"*d;a"+Ct+"-=d}");for(pt.push("return new "+K+"(this.data,"+Mt.map(function(Ut){return"a"+Ut}).join(",")+","+Mt.map(function(Ut){return"c"+Ut}).join(",")+",b)}"),pt.push("proto.step=function "+K+"_step("+wt.join(",")+"){var "+Mt.map(function(Ut){return"a"+Ut+"=this.shape["+Ut+"]"}).join(",")+","+Mt.map(function(Ut){return"b"+Ut+"=this.stride["+Ut+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),Ct=0;Ct<ut;++Ct)pt.push("if(typeof i"+Ct+"==='number'){d=i"+Ct+"|0;if(d<0){c+=b"+Ct+"*(a"+Ct+"-1);a"+Ct+"=ceil(-a"+Ct+"/d)}else{a"+Ct+"=ceil(a"+Ct+"/d)}b"+Ct+"*=d}");pt.push("return new "+K+"(this.data,"+Mt.map(function(Ut){return"a"+Ut}).join(",")+","+Mt.map(function(Ut){return"b"+Ut}).join(",")+",c)}");var ue=new Array(ut),re=new Array(ut);for(Ct=0;Ct<ut;++Ct)ue[Ct]="a[i"+Ct+"]",re[Ct]="b[i"+Ct+"]";for(pt.push("proto.transpose=function "+K+"_transpose("+wt+"){"+wt.map(function(Ut,Zt){return Ut+"=("+Ut+"===undefined?"+Zt+":"+Ut+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+K+"(this.data,"+ue.join(",")+","+re.join(",")+",this.offset)}"),pt.push("proto.pick=function "+K+"_pick("+wt+"){var a=[],b=[],c=this.offset"),Ct=0;Ct<ut;++Ct)pt.push("if(typeof i"+Ct+"==='number'&&i"+Ct+">=0){c=(c+this.stride["+Ct+"]*i"+Ct+")|0}else{a.push(this.shape["+Ct+"]);b.push(this.stride["+Ct+"])}");return pt.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),pt.push("return function construct_"+K+"(data,shape,stride,offset){return new "+K+"(data,"+Mt.map(function(Ut){return"shape["+Ut+"]"}).join(",")+","+Mt.map(function(Ut){return"stride["+Ut+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",pt.join("\n"))(cr[$],Gr)}function yr($,ut){if(!$)throw ut=ut||"Assertion failed",new Error(ut)}function Re($){var ut=Object.create(Object.getPrototypeOf($));for(var K in $)ut[K]=$[K];return ut}function vr($){var ut=$["@context"];if(ut){Array.isArray(ut)||(ut=[ut]);var K=new Map,yt=!0,pt=!1,Mt=void 0;try{for(var wt,Ot=ut[Symbol.iterator]();!(yt=(wt=Ot.next()).done);yt=!0){var It=wt.value;if("string"!=typeof It){var Nt=!0,Rt=!1,te=void 0;try{for(var Ct,ue=Object.keys(It)[Symbol.iterator]();!(Nt=(Ct=ue.next()).done);Nt=!0){var re=Ct.value;"string"==typeof It[re]&&K.set(re,It[re])}}catch(fe){Rt=!0,te=fe}finally{try{!Nt&&ue.return&&ue.return()}finally{if(Rt)throw te}}}}}catch(fe){pt=!0,Mt=fe}finally{try{!yt&&Ot.return&&Ot.return()}finally{if(pt)throw Mt}}return K}}function dt($){var ut=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arraybuffer";if(-1===["arraybuffer","text"].indexOf(K))throw new Error;var yt=ut.headers||{};return new Promise(function(pt,Mt){var wt=new XMLHttpRequest;wt.open("GET",$),wt.responseType=K;var Ot=function Dr($){return Ye.COVJSON+($?'; profile="'+Xe+'"':"")+"; q=1.0, "+Ye.JSONLD+"; q=0.1, "+Ye.JSON+"; q=0.1"}(ut.eagerload);if(wt.setRequestHeader("Accept",Ot),yt){var It=!0,Nt=!1,Rt=void 0;try{for(var te,Ct=Object.keys(yt)[Symbol.iterator]();!(It=(te=Ct.next()).done);It=!0){var ue=te.value;wt.setRequestHeader(ue,yt[ue])}}catch(re){Nt=!0,Rt=re}finally{try{!It&&Ct.return&&Ct.return()}finally{if(Nt)throw Rt}}}wt.addEventListener("load",function(){try{if(!(wt.status>=200&&wt.status<300||304===wt.status))return void Mt(new Error('Resource "'+$+'" not found, HTTP status code: '+wt.status));var re=void 0;if("arraybuffer"===K){if(!window.TextDecoder)return void Mt({responseType:"text"});var fe=new Date;re=JSON.parse((new TextDecoder).decode(new DataView(wt.response))),console.log("JSON decoding: "+(new Date-fe)+"ms")}else{var Ut=new Date;re=JSON.parse(wt.response),console.log("JSON decoding (slow path): "+(new Date-Ut)+"ms")}var Zt=function ur($){var ut={};if(!$)return ut;for(var K=$.split("\r\n"),yt=0;yt<K.length;yt++){var pt=K[yt],Mt=pt.indexOf(": ");if(Mt>0){var wt=pt.substring(0,Mt).toLowerCase(),Ot=pt.substring(Mt+2);ut[wt]=Ot}}return ut}(wt.getAllResponseHeaders());pt({data:re,headers:Zt})}catch(ce){Mt(ce)}}),wt.addEventListener("error",function(){Mt(new Error("Network error loading resource at "+$))}),wt.send()}).catch(function(pt){if(pt.responseType)return dt($,yt,pt.responseType);throw pt})}function Ve($,ut){if(!$)return ut._axisNames;var K=[].concat(pr($.axes.values())).filter(function(pt){return pt.values.length>1}).length>1,yt=$._rangeAxisOrder||ut._axisNames;if(K&&!yt)throw new Error("Range axis order missing");return yt||[].concat(pr($.axes.keys()))}function lr($){return function(ut){return void 0===ut&&(ut=$.parameters.keys()),ut=Array.from(ut),Promise.all(ut.map(function(K){return $.loadRange(K)})).then(function(K){for(var yt=new Map,pt=0;pt<ut.length;pt++)yt.set(ut[pt],K[pt]);return yt})}}function sr($,ut){return function(K){return $.loadDomain().then(function(){var yt=$._covjson.ranges[K];return"object"===(typeof yt>"u"?"undefined":wr(yt))?Fr($,K,yt,$._covjson.domain,ut):dt(yt).then(function(wt){return Fr($,K,wt.data,$._covjson.domain,ut)})})}}function Fr($,ut,K,yt){var pt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(pt=Et.normalizeIndexSubsetConstraints(yt,pt),"NdArray"===K.type||"Range"===K.type){Ne(K,yt),$.options.cacheRanges&&($._covjson.ranges[ut]=K,$._updateLoadStatus());var Mt=function fr($,ut,K){var yt,pt,Mt=$._ndarr,wt=Ve(ut,$),Ot=wt.map(function(Ct){return K[Ct].start}),It=wt.map(function(Ct){return K[Ct].stop}),Nt=wt.map(function(Ct){return K[Ct].step}),Rt=(yt=(pt=Mt.hi.apply(Mt,pr(It))).lo.apply(pt,pr(Ot))).step.apply(yt,pr(Nt)),te={dataType:$.dataType,get:gr(Rt,wt),_ndarr:Rt,_axisNames:wt,_shape:Rt.shape};return te.shape=new Map(wt.map(function(Ct,ue){return[Ct,Rt.shape[ue]]})),te}(K,yt,pt);return Promise.resolve(Mt)}if("TiledNdArray"===K.type)return function er($,ut){function K(pe){var be={};return pe.forEach(function($e,Ee){return be[$.axisNames[Ee]]=$e}),It.expand(be)}for(var yt=$.axisNames.map(function(pe){return ut[pe]}),pt=function(pe){return pe.map(function(be,$e){return null===be?$.shape[$e]:be})},wt=function Vr($){var K=$.map(function(pt){return pt.tileCount+pt.valueCount/1e3}),yt=K.reduce(function(pt,Mt,wt,Ot){return Mt<Ot[pt]?wt:pt},0);return yt}($.tileSets.map(function(pe){return function ei($,ut){for(var K=1,yt=0;yt<$.length;yt++){var pt=ut[yt],wt=pt.stop,Ot=pt.step,It=$[yt],Nt=Math.floor(pt.start/It),Rt=Math.ceil(wt/It);K*=Math.ceil(It*(Rt-Nt)/Math.max(Ot,It))}var Ct=K*$.reduce(function(ue,re){return ue*re});return{tileCount:K,valueCount:Ct}}(pt(pe.tileShape),yt)})),Ot=$.tileSets[wt],It=Mr.parse(Ot.urlTemplate),Nt=pt(Ot.tileShape),Rt=[],te=0;te<Nt.length;te++){for(var Ct=yt[te],ue=Ct.start,re=Ct.stop,fe=Ct.step,Ut=Nt[te],Zt=Math.floor(ue/Ut),ce=Math.ceil(re/Ut),Oe=[],ke=Zt;ke<ce;ke++){var De=Math.floor(((ke+.5)*Ut-ue)/fe);(ue+De*fe>=ke*Ut||(ke+1)*Ut<=ue+(De+1)*fe)&&Oe.push(ke)}Rt.push(Oe)}var ze=rr(Rt),Fe=yt.map(function(pe){var be=pe.start,$e=pe.stop,Ee=pe.step;return Math.floor(($e-be)/Ee)+($e-be)%Ee});if(1===ze.length&&Fe.every(function(pe,be){return pe===Nt[be]}))return dt(K(ze[0])).then(function(pe){var be=pe.data;return Ne(be),be});var pe,be,$e,Ze=(pe=Fe.reduce(function(Ee,or){return Ee*or}),be=_r(new Array(pe),Fe),$e=ze.map(function(Ee){return dt(K(Ee)).then(function(Pr){var jr=Pr.data;Ne(jr);for(var Ir=Ee.map(function(ee,ne){return ee*Nt[ne]}),Tr=[],nr=0;nr<Nt.length;nr++){var kr=yt[nr],tt=kr.start,D=kr.stop,e=kr.step,y=Ir[nr],H=[],F=0;y<tt&&(F=tt-y);var Y=Nt[nr];y+Y>D&&(Y=D-y);for(var at=F;at<Y;at++)(y+at-tt)%e==0&&H.push(at);Tr.push(H)}var X=rr(Tr),ct=!0,it=!1,gt=void 0;try{for(var xt,Pt=X[Symbol.iterator]();!(ct=(xt=Pt.next()).done);ct=!0){var St,Dt=xt.value,Lt=(St=jr._ndarr).get.apply(St,pr(Dt)),ie=Dt.map(function(ee,ne){return Math.floor((Ir[ne]+ee-yt[ne].start)/yt[ne].step)});be.set.apply(be,pr(ie).concat([Lt]))}}catch(ee){it=!0,gt=ee}finally{try{!ct&&Pt.return&&Pt.return()}finally{if(it)throw gt}}})}),{v:Promise.all($e).then(function(){var Ee={dataType:$.dataType,get:gr(be,$.axisNames),_ndarr:be,_axisNames:$.axisNames,_shape:Fe};return Ee.shape=new Map($.axisNames.map(function(or,Pr){return[or,be.shape[Pr]]})),Ee})});return"object"===(typeof Ze>"u"?"undefined":wr(Ze))?Ze.v:void 0}(K,pt);throw new Error("Unsupported: "+K.type)}function rr($){return $.reduce(function(ut,K){return ut.map(function(yt){return K.map(function(pt){return yt.concat(pt)})}).reduce(function(yt,pt){return yt.concat(pt)},[])},[[]])}function mr($,ut){return function(K){return $.loadDomain().then(function(yt){K=Et.normalizeIndexSubsetConstraints(yt,K);var pt=Et.subsetDomainByIndex(yt,K),Mt=function ri($){var ut=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},K={},yt=!0,pt=!1,Mt=void 0;try{for(var wt,Ot=Object.keys($)[Symbol.iterator]();!(yt=(wt=Ot.next()).done);yt=!0){var It=wt.value,Nt=$[It],Rt=ut[It]||{},te=Rt.start,Ct=void 0===te?0:te,ue=Rt.step,re=void 0===ue?1:ue;K[It]={start:Ct+re*Nt.start,stop:Ct+re*Nt.stop,step:re*Nt.step}}}catch(fe){pt=!0,Mt=fe}finally{try{!yt&&Ot.return&&Ot.return()}finally{if(pt)throw Mt}}return K}(K,ut);yt._rangeAxisOrder&&(pt._rangeAxisOrder=yt._rangeAxisOrder);var wt={_covjson:$._covjson,options:$.options,type:Et.COVERAGE,domainProfiles:$.domainProfiles,domainType:$.domainType,parameters:$.parameters,loadDomain:function(){return Promise.resolve(pt)}};return wt.loadRange=sr(wt,Mt),wt.loadRanges=lr(wt),wt.subsetByIndex=mr(wt,Mt),wt.subsetByValue=Et.subsetByValue.bind(null,wt),wt})}}function br($,ut){if(!("__transformDone"in $[ut])){var K=$[ut];if(K.key=ut,K.unit&&"string"==typeof K.unit.symbol&&(K.unit.symbol={value:K.unit.symbol}),K.categoryEncoding){var yt=new Map,pt=!0,Mt=!1,wt=void 0;try{for(var Ot,It=Object.keys(K.categoryEncoding)[Symbol.iterator]();!(pt=(Ot=It.next()).done);pt=!0){var Nt=Ot.value,Rt=K.categoryEncoding[Nt];Array.isArray(Rt)||(Rt=[Rt]),yt.set(Nt,Rt)}}catch(te){Mt=!0,wt=te}finally{try{!pt&&It.return&&It.return()}finally{if(Mt)throw wt}}K.categoryEncoding=yt}K.__transformDone=!0}}function Ne($,ut){if(!("__transformDone"in $)){var K=$.values;if(void 0===$.actualMin){var yt=Et.minMax(K),pt=qr(yt,2),Mt=pt[0],wt=pt[1];null!==Mt&&($.actualMin=Mt,$.actualMax=wt)}$.shape&&($._shape=$.shape),$.axisNames&&($._axisNames=$.axisNames,delete $.axisNames);var Ot=Ve(ut,$),It=function Sr($,ut){if(!$)return ut._shape;var yt=Ve($,ut).map(function(Mt){return $.axes.get(Mt).values.length});if(ut._shape&&(ut._shape.length!==yt.length||!ut._shape.every(function(Mt,wt){return Mt===yt[wt]})))throw new Error("range.shape must match domain axis sizes");return yt}(ut,$),Nt=_r(K,It);return $._ndarr=Nt,$.get=gr(Nt,Ot),$.shape=new Map(Ot.map(function(Rt,te){return[Rt,It[te]]})),$.__transformDone=!0,$}}function gr($,ut){for(var K="",yt=0;yt<ut.length;yt++)K&&(K+=","),K+="'"+ut[yt]+"' in obj ? obj['"+ut[yt]+"'] : 0";return new Function("ndarr","return function ndarrget (obj) { return ndarr.get("+K+") }")($)}function Or($,ut,K){if(!("__transformDone"in $)){(K=$.domainType||K)&&-1===K.indexOf(":")&&(K=Ar+K),$.domainType=K;var yt=new Map,pt=!0,Mt=!1,wt=void 0;try{for(var Ot,It=Object.keys($.axes)[Symbol.iterator]();!(pt=(Ot=It.next()).done);pt=!0){var Nt=Ot.value;yt.set(Nt,$.axes[Nt])}}catch(Ie){Mt=!0,wt=Ie}finally{try{!pt&&It.return&&It.return()}finally{if(Mt)throw wt}}$.axes=yt;var Rt=!0,te=!1,Ct=void 0;try{for(var ue,re=yt[Symbol.iterator]();!(Rt=(ue=re.next()).done);Rt=!0){var fe=qr(ue.value,2),Ut=fe[0],Zt=fe[1];if(Zt.key=Ut,Zt.dataType&&-1===Zt.dataType.indexOf(":")&&(Zt.dataType=Xr+Zt.dataType),Zt.components&&(Zt.coordinates=Zt.components),Zt.coordinates||(Zt.coordinates=[Ut]),Zt.components=Zt.coordinates,"start"in Zt&&"stop"in Zt&&"num"in Zt){var ce=new Float64Array(Zt.num),Oe=void 0;if(1===Zt.num){if(Zt.start!==Zt.stop)throw new Error("regular axis of length 1 must have equal start/stop values");Oe=0}else Oe=(Zt.stop-Zt.start)/(Zt.num-1);for(var ke=0;ke<Zt.num;ke++)ce[ke]=Zt.start+ke*Oe;Zt.values=ce,delete Zt.start,delete Zt.stop,delete Zt.num}if(Array.isArray(Zt.values)&&"number"==typeof Zt.values[0]){for(var Ue=new Float64Array(Zt.values.length),De=0;De<Zt.values.length;De++)Ue[De]=Zt.values[De];Zt.values=Ue}Zt.bounds=Cr(Zt)}}catch(Ie){te=!0,Ct=Ie}finally{try{!Rt&&re.return&&re.return()}finally{if(te)throw Ct}}ut&&($.referencing=ut);var ye=!0,Ce=!1,Qe=void 0;try{for(var ge,ze=$.referencing[Symbol.iterator]();!(ye=(ge=ze.next()).done);ye=!0){var Fe=ge.value;Fe.components&&(Fe.coordinates=Fe.components)}}catch(Ie){Ce=!0,Qe=Ie}finally{try{!ye&&ze.return&&ze.return()}finally{if(Ce)throw Qe}}return $.rangeAxisOrder&&($._rangeAxisOrder=$.rangeAxisOrder,delete $.rangeAxisOrder),$.__transformDone=!0,$}}function Cr($){if($.bounds){var ut=(K=$.bounds,{v:{get:function(yt){return[K[2*yt],K[2*yt+1]]}}});if("object"===(typeof ut>"u"?"undefined":wr(ut)))return ut.v}var K}function xr($,ut){return dt($,ut)}function ii($,ut){if(function Me($){yr("type"in $,'"type" missing'),$.type===Et.COVERAGE?(yr("parameters"in $,'"parameters" missing'),yr("domain"in $,'"domain" missing'),yr("ranges"in $,'"ranges" missing')):$.type===Et.COVERAGECOLLECTION&&yr(Array.isArray($.coverages),'"coverages" must be an array')}($),-1===[Et.COVERAGE,Et.COVERAGECOLLECTION,Et.DOMAIN].indexOf($.type))throw new Error("CoverageJSON document must be of Coverage, CoverageCollection, or Domain type");var K=void 0;return $.type===Et.DOMAIN?(Or($),K=$):K=$.type===Et.COVERAGE?new Hr($):new ai($),$.type!==Et.COVERAGE&&$.type!==Et.COVERAGECOLLECTION||function _e($,ut){if(ut&&ut.link){var K=$.ld,yt=!0,pt=!1,Mt=void 0;try{for(var wt,Ot=ut.link.split(",")[Symbol.iterator]();!(yt=(wt=Ot.next()).done);yt=!0){var It=wt.value,Nt=(It=It.trim()).split(";"),Rt=Nt[0].substr(1,Nt[0].length-2),te=!0,Ct=!1,ue=void 0;try{for(var re,fe=Nt.slice(1)[Symbol.iterator]();!(te=(re=fe.next()).done);te=!0){var Ut=re.value,Zt=Ut.indexOf("rel=");if(-1!==Zt){var ce=Ut.substring(Zt+5,Ut.length-1);0!==ce.indexOf("http://")&&0!==ce.indexOf("https://")&&(ce=Qr+ce),K[ce]?Array.isArray(K[ce])?K[ce].push(Rt):K[ce]=[K[ce],Rt]:K[ce]=Rt}}}catch(Oe){Ct=!0,ue=Oe}finally{try{!te&&fe.return&&fe.return()}finally{if(Ct)throw ue}}}}catch(Oe){pt=!0,Mt=Oe}finally{try{!yt&&Ot.return&&Ot.return()}finally{if(pt)throw Mt}}}}(K,ut),K}var me=function Bt($){for(var ut=new Array($),K=0;K<$;++K)ut[K]=K;return ut},Ae=typeof Float64Array<"u",cr={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]},_r=function Nr($,ut,K,yt){if(void 0===$)return(0,cr.array[0])([]);"number"==typeof $&&($=[$]),void 0===ut&&(ut=[$.length]);var pt=ut.length;if(void 0===K){K=new Array(pt);for(var Mt=pt-1,wt=1;Mt>=0;--Mt)K[Mt]=wt,wt*=ut[Mt]}if(void 0===yt)for(yt=0,Mt=0;Mt<pt;++Mt)K[Mt]<0&&(yt-=(ut[Mt]-1)*K[Mt]);for(var Ot=function Ur($){if(function($){return null!=$&&(hr($)||function xe($){return"function"==typeof $.readFloatLE&&"function"==typeof $.slice&&hr($.slice(0,0))}($)||!!$._isBuffer)}($))return"buffer";if(Ae)switch(Object.prototype.toString.call($)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray($)?"array":"generic"}($),It=cr[Ot];It.length<=pt+1;)It.push(Br(Ot,It.length-1));return(0,It[pt+1])($,ut,K,yt)},Er=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mr=function zr($,ut){return $(ut={exports:{}},ut.exports),ut.exports}(function($,ut){var K,yt;K=Er,yt=function(){function K(){}return K.prototype.encodeReserved=function(yt){return yt.split(/(%[0-9A-Fa-f]{2})/g).map(function(pt){return/%[0-9A-Fa-f]/.test(pt)||(pt=encodeURI(pt).replace(/%5B/g,"[").replace(/%5D/g,"]")),pt}).join("")},K.prototype.encodeUnreserved=function(yt){return encodeURIComponent(yt).replace(/[!'()*]/g,function(pt){return"%"+pt.charCodeAt(0).toString(16).toUpperCase()})},K.prototype.encodeValue=function(yt,pt,Mt){return pt="+"===yt||"#"===yt?this.encodeReserved(pt):this.encodeUnreserved(pt),Mt?this.encodeUnreserved(Mt)+"="+pt:pt},K.prototype.isDefined=function(yt){return null!=yt},K.prototype.isKeyOperator=function(yt){return";"===yt||"&"===yt||"?"===yt},K.prototype.getValues=function(yt,pt,Mt,wt){var Ot=yt[Mt],It=[];if(this.isDefined(Ot)&&""!==Ot)if("string"==typeof Ot||"number"==typeof Ot||"boolean"==typeof Ot)Ot=Ot.toString(),wt&&"*"!==wt&&(Ot=Ot.substring(0,parseInt(wt,10))),It.push(this.encodeValue(pt,Ot,this.isKeyOperator(pt)?Mt:null));else if("*"===wt)Array.isArray(Ot)?Ot.filter(this.isDefined).forEach(function(Rt){It.push(this.encodeValue(pt,Rt,this.isKeyOperator(pt)?Mt:null))},this):Object.keys(Ot).forEach(function(Rt){this.isDefined(Ot[Rt])&&It.push(this.encodeValue(pt,Ot[Rt],Rt))},this);else{var Nt=[];Array.isArray(Ot)?Ot.filter(this.isDefined).forEach(function(Rt){Nt.push(this.encodeValue(pt,Rt))},this):Object.keys(Ot).forEach(function(Rt){this.isDefined(Ot[Rt])&&(Nt.push(this.encodeUnreserved(Rt)),Nt.push(this.encodeValue(pt,Ot[Rt].toString())))},this),this.isKeyOperator(pt)?It.push(this.encodeUnreserved(Mt)+"="+Nt.join(",")):0!==Nt.length&&It.push(Nt.join(","))}else";"===pt?this.isDefined(Ot)&&It.push(this.encodeUnreserved(Mt)):""!==Ot||"&"!==pt&&"?"!==pt?""===Ot&&It.push(""):It.push(this.encodeUnreserved(Mt)+"=");return It},K.prototype.parse=function(yt){var pt=this,Mt=["+","#",".","/",";","?","&"];return{expand:function(wt){return yt.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(Ot,It,Nt){if(It){var Rt=null,te=[];if(-1!==Mt.indexOf(It.charAt(0))&&(Rt=It.charAt(0),It=It.substr(1)),It.split(/,/g).forEach(function(ue){var re=/([^:\*]*)(?::(\d+)|(\*))?/.exec(ue);te.push.apply(te,pt.getValues(wt,Rt,re[1],re[2]||re[3]))}),Rt&&"+"!==Rt){var Ct=",";return"?"===Rt?Ct="&":"#"!==Rt&&(Ct=Rt),(0!==te.length?Rt:"")+te.join(Ct)}return te.join(",")}return pt.encodeReserved(Nt)})}}},new K},"object"==typeof ut?$.exports=yt():"function"==typeof define&&define.amd?define([],yt):K.urltemplate=yt()}),Qr="http://www.iana.org/assignments/relation/",ni="https://covjson.org/def/",Xr=ni+"core#",Ar=ni+"domainTypes#",Ye={COVJSON:"application/prs.coverage+json",JSONLD:"application/ld+json",JSON:"application/json",TEXT:"text/plain"},Xe=Xr+"standalone",wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},ir=(function(){function $(K){this.value=K}function ut(K){function pt(It,Nt){try{var Rt=K[It](Nt),te=Rt.value;te instanceof $?Promise.resolve(te.value).then(function(Ct){pt("next",Ct)},function(Ct){pt("throw",Ct)}):Mt(Rt.done?"return":"normal",Rt.value)}catch(Ct){Mt("throw",Ct)}}function Mt(It,Nt){switch(It){case"return":wt.resolve({value:Nt,done:!0});break;case"throw":wt.reject(Nt);break;default:wt.resolve({value:Nt,done:!1})}(wt=wt.next)?pt(wt.key,wt.arg):Ot=null}var wt,Ot;this._invoke=function yt(It,Nt){return new Promise(function(Rt,te){var Ct={key:It,arg:Nt,resolve:Rt,reject:te,next:null};Ot?Ot=Ot.next=Ct:(wt=Ot=Ct,pt(It,Nt))})},"function"!=typeof K.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(ut.prototype[Symbol.asyncIterator]=function(){return this}),ut.prototype.next=function(K){return this._invoke("next",K)},ut.prototype.throw=function(K){return this._invoke("throw",K)},ut.prototype.return=function(K){return this._invoke("return",K)}}(),function($,ut){if(!($ instanceof ut))throw new TypeError("Cannot call a class as a function")}),He=function(){function $(ut,K){for(var yt=0;yt<K.length;yt++){var pt=K[yt];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(ut,pt.key,pt)}}return function(ut,K,yt){return K&&$(ut.prototype,K),yt&&$(ut,yt),ut}}(),qr=function(ut,K){if(Array.isArray(ut))return ut;if(Symbol.iterator in Object(ut))return function $(ut,K){var yt=[],pt=!0,Mt=!1,wt=void 0;try{for(var Ot,It=ut[Symbol.iterator]();!(pt=(Ot=It.next()).done)&&(yt.push(Ot.value),!K||yt.length!==K);pt=!0);}catch(Nt){Mt=!0,wt=Nt}finally{try{!pt&&It.return&&It.return()}finally{if(Mt)throw wt}}return yt}(ut,K);throw new TypeError("Invalid attempt to destructure non-iterable instance")},pr=function($){if(Array.isArray($)){for(var ut=0,K=Array($.length);ut<$.length;ut++)K[ut]=$[ut];return K}return Array.from($)},Hr=function(){function $(ut,K){ir(this,$),this._covjson=ut,this.type=Et.COVERAGE,this.ld={},this._exposeLd(ut),this.prefixes=vr(this.ld),this.options=K?Re(K):{},this.id=ut.id,this.parameters=new Map;var yt=!0,pt=!1,Mt=void 0;try{for(var wt,Ot=Object.keys(ut.parameters)[Symbol.iterator]();!(yt=(wt=Ot.next()).done);yt=!0){var It=wt.value;br(ut.parameters,It),this.parameters.set(It,ut.parameters[It])}}catch(Rt){pt=!0,Mt=Rt}finally{try{!yt&&Ot.return&&Ot.return()}finally{if(pt)throw Mt}}var Nt=void 0;(Nt="string"==typeof this._covjson.domain?this._covjson.domainType:this._covjson.domain.domainType||this._covjson.domainType)&&-1===Nt.indexOf(":")&&(Nt=Ar+Nt),this.domainType=Nt,this._updateLoadStatus()}return He($,[{key:"_updateLoadStatus",value:function(){var ut=this,K=function(Mt){return"object"===(typeof Mt>"u"?"undefined":wr(Mt))},yt=K(this._covjson.domain),pt=Object.keys(this._covjson.ranges).every(function(Mt){return K(ut._covjson.ranges[Mt])});this.loaded=yt&&pt}},{key:"_exposeLd",value:function(ut){if(ut["@context"]){var K=Re(ut);delete K.domain,delete K.ranges,this.ld=JSON.parse(JSON.stringify(K))}}},{key:"loadDomain",value:function(){var ut=this,K=this._covjson.domain;if(this._domainPromise)return this._domainPromise;var yt=void 0;if("object"===(typeof K>"u"?"undefined":wr(K))){var pt=K;Or(pt,this.options.referencing,this.domainType),yt=Promise.resolve(pt)}else yt=dt(K).then(function(wt){var Ot=wt.data;return Or(Ot,ut.options.referencing,ut.domainType),ut._covjson.domain=Ot,ut._updateLoadStatus(),Ot});return this._domainPromise=yt,yt}},{key:"loadRange",value:function(ut){return sr(this)(ut)}},{key:"loadRanges",value:function(ut){return lr(this)(ut)}},{key:"subsetByIndex",value:function(ut){return mr(this)(ut)}},{key:"subsetByValue",value:function(ut){return Et.subsetByValue(this,ut)}}]),$}(),ai=function(){function $(ut){ir(this,$),this.type=Et.COVERAGECOLLECTION,this.ld={},this._exposeLd(ut),this.prefixes=vr(this.ld),this.id=ut.id;var K=ut.domainType;K&&-1===K.indexOf(":")&&(K=Ar+K),this.domainType=K;var yt=[],pt=ut.parameters?ut.parameters:{},Mt=!0,wt=!1,Ot=void 0;try{for(var It,Nt=Object.keys(pt)[Symbol.iterator]();!(Mt=(It=Nt.next()).done);Mt=!0){var te=pt[It.value];te.id||(te.id=Math.round((new Date).getTime()*Math.random()).toString())}}catch(pe){wt=!0,Ot=pe}finally{try{!Mt&&Nt.return&&Nt.return()}finally{if(wt)throw Ot}}var Ct={};ut.referencing&&(Ct.referencing=ut.referencing);var ue=!0,re=!1,fe=void 0;try{for(var Ut,Zt=ut.coverages[Symbol.iterator]();!(ue=(Ut=Zt.next()).done);ue=!0){var ce=Ut.value;ce.domainType||(ce.domainType=K),ce.parameters||(ce.parameters={});var Oe=!0,ke=!1,Ue=void 0;try{for(var De,ye=Object.keys(pt)[Symbol.iterator]();!(Oe=(De=ye.next()).done);Oe=!0){var Ce=De.value;Ce in ce.ranges&&(ce.parameters[Ce]=pt[Ce])}}catch(pe){ke=!0,Ue=pe}finally{try{!Oe&&ye.return&&ye.return()}finally{if(ke)throw Ue}}ut["@context"]&&(ce["@context"]=ut["@context"]),yt.push(new Hr(ce,Ct))}}catch(pe){re=!0,fe=pe}finally{try{!ue&&Zt.return&&Zt.return()}finally{if(re)throw fe}}if(this.coverages=yt,ut.parameters){this.parameters=new Map;var Qe=!0,ge=!1,ze=void 0;try{for(var Fe,Ie=Object.keys(ut.parameters)[Symbol.iterator]();!(Qe=(Fe=Ie.next()).done);Qe=!0){var Ze=Fe.value;br(ut.parameters,Ze),this.parameters.set(Ze,ut.parameters[Ze])}}catch(pe){ge=!0,ze=pe}finally{try{!Qe&&Ie.return&&Ie.return()}finally{if(ge)throw ze}}}ut.domainTemplate&&(Or(ut.domainTemplate),this.domainTemplate=ut.domainTemplate)}return He($,[{key:"query",value:function(){return new Et.CollectionQuery(this)}},{key:"_exposeLd",value:function(ut){if(ut["@context"]){var K=Re(ut);delete K.coverages,this.ld=JSON.parse(JSON.stringify(K))}}}]),$}();mt.load=xr,mt.read=function Pi($){var ut=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"===(typeof $>"u"?"undefined":wr($))?Promise.resolve().then(function(){return ii($)}):xr($,ut).then(function(K){return ii(K.data,K.headers)})}}(this.CovJSON=this.CovJSON||{},CovUtils),function(mt,Et,Bt,hr){"use strict";function xe(tt,D){return"string"==typeof D&&(D=xe(D)),(D=D||document).querySelector(tt)}function Gr(tt){var D=document.createElement("div");return D.innerHTML=tt,D.firstChild}function Br(tt,D){if(tt&&document.body.appendChild(Gr(tt)),D){var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=D:e.appendChild(document.createTextNode(D)),document.head.appendChild(e)}}function Ur(tt){var D=xe("#"+tt);return"content"in D&&(D=D.content),document.importNode(D,!0).children[0]}function zr(tt){var D=function(n){function y(){return _e(this,y),we(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return me(y,n),y}(tt);for(var e in Ar)D.prototype[e]=Ar[e];return D}function yr(tt){var D=parseInt(tt.substr(0,4)),e=parseInt(tt.substr(5,2)),n=parseInt(tt.substr(8,2));return Date.UTC(D,e-1,n)}function Re(tt){return new Date(tt).toISOString().substr(0,10)}function vr(tt){return tt&&"object"==typeof tt&&"default"in tt?tt.default:tt}function Dr(tt,D){return tt(D={exports:{}},D.exports),D.exports}function dt(tt){var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;if(1===D)return ur([tt[0]]);var e=document.createElement("canvas");e.width=D,e.height=1;for(var n=e.getContext("2d"),y=n.createLinearGradient(0,0,D-1,0),H=tt.length,F=0;F<H;F++)y.addColorStop(F/(H-1),tt[F]);n.fillStyle=y,n.fillRect(0,0,D,1);for(var Y=new Uint8Array(D),at=new Uint8Array(D),lt=new Uint8Array(D),X=n.getImageData(0,0,D,1).data,ct=0,it=0;ct<X.length;ct+=4,it++)Y[it]=X[ct],at[it]=X[ct+1],lt[it]=X[ct+2];return{steps:Y.length,red:Y,green:at,blue:lt}}function ur(tt){var D=document.createElement("canvas");D.width=1,D.height=1;for(var e=D.getContext("2d"),n=tt.length,y=new Uint8Array(n),H=new Uint8Array(n),F=new Uint8Array(n),Y=0;Y<tt.length;Y++){e.fillStyle=tt[Y],e.fillRect(0,0,1,1);var at=e.getImageData(0,0,1,1).data;y[Y]=at[0],H[Y]=at[1],F[Y]=at[2]}return{steps:y.length,red:y,green:H,blue:F}}function Ve(tt){var D=ur([tt]);return{r:D.red[0],g:D.green[0],b:D.blue[0]}}function Sr(tt){if(tt){var D=tt.colors;return"linear"===tt.interpolation?dt(D,tt.steps):ur(D)}}function lr(tt,D,e){return Math.trunc((D.steps-1+.9999)*(tt-e[0])/(e[1]-e[0]))}function sr(tt){if(tt[0]===tt[1]){var e=tt[0]*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1);return[tt[0]-e,tt[1]+e]}return tt}function Fr(tt){for(var D=new Uint8Array(tt.length),e=0;e<tt.length;e++){var n=tt[e];if(n<0||n>255)throw new Error("Array value must be within [0,255], but is: "+n);D[e]=n}return D}function er(tt){return function(D){function e(){return _e(this,e),we(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return me(e,D),Me(e,[{key:"initializePalette",value:function(){var n=this,y=this.options,H=this.parameter;if(!H)return Promise.resolve();var Y,at,F=H.observedProperty.categories;if(F&&this._initCategoryIdxMap(),this._palette||(this._palette=y.palette?y.palette:H.preferredPalette?Sr(H.preferredPalette):F?F.every(function(Y){return Y.preferredColor})?ur(F.map(function(Y){return Y.preferredColor})):It(F.length):Ot()),F&&F.length!==this._palette.steps)throw new Error("Categorical palettes must match the number of categories of the parameter");return this._paletteExtent=this._paletteExtent||y.paletteExtent,this.parameter.categoryEncoding&&(at=(Y=n._categoryIdxMap).length-1,n.getPaletteIndex=function(lt){if(!(null===lt||lt<0||lt>at)){var X=Y[lt];if(255!==X)return X}}),!this.canUsePalette||this.canUsePalette()?this.setPaletteExtent(this._paletteExtent,!0).then(function(){return n._updatePaletteIndexFn()}):Promise.resolve()}},{key:"_updatePaletteIndexFn",value:function(){var y,H,n=this;this.parameter.categoryEncoding||(y=n.palette,H=n.paletteExtent,n.getPaletteIndex=function(F){if(null!==F)return lr(F,y,H)})}},{key:"setPaletteExtent",value:function(n,y){var H=this;if(this.parameter.observedProperty.categories)return Promise.resolve();var F=this.paletteExtent;return(Array.isArray(n)?Promise.resolve(n):this.computePaletteExtent(n)).then(function(lt){Array.isArray(lt)&&isNaN(lt[0])||function(lt){return!Array.isArray(F)||F[0]!==lt[0]||F[1]!==lt[1]}(lt)&&(H._paletteExtent=lt,H._updatePaletteIndexFn(),y||H.redraw(),H.fire("paletteExtentChange"))})}},{key:"_initCategoryIdxMap",value:function(){var n=this.parameter;if(n.categoryEncoding){var y=-1/0,H=1/0,F=n.observedProperty.categories,Y=n.categoryEncoding,at=!0,lt=!1,X=void 0;try{for(var ct,it=F[Symbol.iterator]();!(at=(ct=it.next()).done);at=!0){var gt=ct.value;if(Y.has(gt.id)){var xt=!0,Pt=!1,St=void 0;try{for(var Dt,Lt=Y.get(gt.id)[Symbol.iterator]();!(xt=(Dt=Lt.next()).done);xt=!0){var ie=Dt.value;y=Math.max(y,ie),H=Math.min(H,ie)}}catch(Ke){Pt=!0,St=Ke}finally{try{!xt&&Lt.return&&Lt.return()}finally{if(Pt)throw St}}}}}catch(Ke){lt=!0,X=Ke}finally{try{!at&&it.return&&it.return()}finally{if(lt)throw X}}var ee=void 0;if(!(F.length<256))throw new Error("Too many categories: "+F.length);if(y>1e4||H<0)throw new Error("category values too high (>10000) or low (<0)");ee=new Uint8Array(y+1);for(var ne=0;ne<=y;ne++)ee[ne]=255;for(var Qt=0;Qt<F.length;Qt++){var Se=F[Qt];if(Y.has(Se.id)){var qe=!0,Te=!1,Yt=void 0;try{for(var Be,dr=n.categoryEncoding.get(Se.id)[Symbol.iterator]();!(qe=(Be=dr.next()).done);qe=!0)ee[Be.value]=Qt}catch(Ke){Te=!0,Yt=Ke}finally{try{!qe&&dr.return&&dr.return()}finally{if(Te)throw Yt}}}}this._categoryIdxMap=ee}}},{key:"palette",get:function(){if(this.parameter&&(!this.canUsePalette||this.canUsePalette()))return this._palette},set:function(n){this._palette=n,this._updatePaletteIndexFn(),this.redraw(),this.fire("paletteChange")}},{key:"paletteExtent",set:function(n){this.setPaletteExtent(n)},get:function(){return this._paletteExtent}}]),e}(tt)}function rr(tt){return function(D){function e(){return _e(this,e),we(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return me(e,D),Me(e,[{key:"load",value:function(){var n=this;this.fire("dataLoading");var y=this.coverage.loadDomain().then(function(H){n.domain=H;var F=Bt.getHorizontalCRSComponents(H),Y=Ae(F,2);return n._projX=Y[0],n._projY=Y[1],Bt.loadProjection(H)}).then(function(H){n.projection=H});return this._loadCoverageSubset?y=y.then(function(){return n._loadCoverageSubset()}):this.parameter&&(y=y.then(function(){return n.coverage.loadRange(n.parameter.key)}).then(function(H){n.range=H})),y.then(function(){n.fire("dataLoad")}).catch(function(H){console.error(H),n.fire("error",H),n.fire("dataLoad")})}}]),e}(tt)}function ei(tt,D){return Et.Util.wrapNum(tt,D,!0)}function Vr(tt){return function(D){function e(){return _e(this,e),we(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return me(e,D),Me(e,[{key:"_addMarker",value:function(){var n=this,y=this.getValue();if(null!==y||this.showNoData){var it,H=this._getColor(y),F="string"==typeof H?Ve(H):H,Y=F.r,at=F.g,lt=F.b,X=this.getLatLng();this._marker=Et.circleMarker(X,{fillColor:"rgb("+Y+","+at+","+lt+")",fillOpacity:1,radius:5,stroke:!0,opacity:1,weight:1,color:"rgb("+Math.round(.7*Y)+","+Math.round(.7*at)+","+Math.round(.7*lt)+")"}).on("click",function(gt){gt.coverage=n.coverage,n.fire("click",gt)}).addTo(this._map),this._popup&&(it=this._marker).bindPopup.apply(it,cr(this._popup))}}},{key:"_removeMarker",value:function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)}},{key:"__updateMarker",value:function(){var n=this._getColor(val),y="string"==typeof n?Ve(n):n;this._marker.options.color="rgb("+y.r+","+y.g+","+y.b+")"}},{key:"bindPopup",value:function(){for(var n=arguments.length,y=Array(n),H=0;H<n;H++)y[H]=arguments[H];var F;this._popup=y,this._marker&&(F=this._marker).bindPopup.apply(F,y)}},{key:"openPopup",value:function(){return this._marker.openPopup(),this}},{key:"closePopup",value:function(){return this._marker.closePopup(),this}},{key:"redraw",value:function(){this._marker&&(this.__updateMarker(),this._marker.redraw())}}]),e}(tt)}function fr(tt,D,e){this.obj=tt,this.left=null,this.right=null,this.parent=e,this.dimension=D}function mr(tt,D,e){var H=this;Array.isArray(tt)?this.root=function n(F,Y,at){var lt,X,ct=Y%e.length;return 0===F.length?null:1===F.length?new fr(F[0],ct,at):(F.sort(function(it,gt){return it[e[ct]]-gt[e[ct]]}),(X=new fr(F[lt=Math.floor(F.length/2)],ct,at)).left=n(F.slice(0,lt),Y+1,X),X.right=n(F.slice(lt+1),Y+1,X),X)}(tt,0,null):function y(F){H.root=F,function Y(at){at.left&&(at.left.parent=at,Y(at.left)),at.right&&(at.right.parent=at,Y(at.right))}(H.root)}(tt),this.toJSON=function(F){F||(F=this.root);var Y=new fr(F.obj,F.dimension,null);return F.left&&(Y.left=H.toJSON(F.left)),F.right&&(Y.right=H.toJSON(F.right)),Y},this.insert=function(F){var at,lt,X=function Y(ct,it){if(null===ct)return it;var gt=e[ct.dimension];return Y(F[gt]<ct.obj[gt]?ct.left:ct.right,ct)}(this.root,null);return null===X?void(this.root=new fr(F,0,null)):(at=new fr(F,(X.dimension+1)%e.length,X),void(F[lt=e[X.dimension]]<X.obj[lt]?X.left=at:X.right=at))},this.remove=function(F){var lt;null!==(lt=function Y(X){if(null===X)return null;if(X.obj===F)return X;var ct=e[X.dimension];return Y(F[ct]<X.obj[ct]?X.left:X.right)}(H.root))&&function at(X){function ct(Pt,St){var Dt,Lt,ie,ee,ne;return null===Pt?null:(Dt=e[St],Pt.dimension===St?null!==Pt.left?ct(Pt.left,St):Pt:(Lt=Pt.obj[Dt],ie=ct(Pt.left,St),ee=ct(Pt.right,St),ne=Pt,null!==ie&&ie.obj[Dt]<Lt&&(ne=ie),null!==ee&&ee.obj[Dt]<ne.obj[Dt]&&(ne=ee),ne))}var it,gt,xt;return null===X.left&&null===X.right?null===X.parent?void(H.root=null):void(X.obj[xt=e[X.parent.dimension]]<X.parent.obj[xt]?X.parent.left=null:X.parent.right=null):void(null!==X.right?(it=ct(X.right,X.dimension),gt=it.obj,at(it),X.obj=gt):(it=ct(X.left,X.dimension),gt=it.obj,at(it),X.right=X.left,X.left=null,X.obj=gt))}(lt)},this.nearest=function(F,Y,at){var X,ct,it;if(it=new br(function(gt){return-gt[1]}),at)for(X=0;X<Y;X+=1)it.push([null,at]);for(H.root&&function lt(gt){function xt(Qt,Se){it.push([Qt,Se]),it.size()>Y&&it.pop()}var Pt,St,Dt,Lt,ie=e[gt.dimension],ee=D(F,gt.obj),ne={};for(Lt=0;Lt<e.length;Lt+=1)ne[e[Lt]]=Lt===gt.dimension?F[e[Lt]]:gt.obj[e[Lt]];return St=D(ne,gt.obj),null===gt.right&&null===gt.left?void((it.size()<Y||ee<it.peek()[1])&&xt(gt,ee)):(lt(Pt=null===gt.right?gt.left:null===gt.left?gt.right:F[ie]<gt.obj[ie]?gt.left:gt.right),(it.size()<Y||ee<it.peek()[1])&&xt(gt,ee),void((it.size()<Y||Math.abs(St)<it.peek()[1])&&(Dt=Pt===gt.left?gt.right:gt.left,null!==Dt&&lt(Dt))))}(H.root),ct=[],X=0;X<Math.min(Y,it.content.length);X+=1)it.content[X][0]&&ct.push([it.content[X][0].obj,it.content[X][1]]);return ct},this.balanceFactor=function(){return function F(at){return null===at?0:Math.max(F(at.left),F(at.right))+1}(H.root)/(Math.log(function Y(at){return null===at?0:Y(at.left)+Y(at.right)+1}(H.root))/Math.log(2))}}function br(tt){this.content=[],this.scoreFunction=tt}function gr(tt){return tt.type!==Bt.COVERAGE&&tt.type!==Bt.DOMAIN||!(tt.domainType in Ee)?tt.type===Bt.COVERAGECOLLECTION&&tt.domainType in or?or[tt.domainType]:void 0:Ee[tt.domainType]}function Or(tt,D){if(tt.id&&D.id&&tt.id===D.id)return!0;if(!tt.observedProperty.id||!D.observedProperty.id||tt.observedProperty.id!==D.observedProperty.id)return!1;if(tt.unit&&D.unit){if(tt.unit.id&&D.unit.id&&tt.unit.id!==D.unit.id||tt.unit.symbol&&D.unit.symbol&&tt.unit.symbol!==D.unit.symbol)return!1}else if(tt.unit||D.unit)return!1;if(tt.categories&&D.categories){if(tt.categories.length!==D.categories.length)return!1;var e=function(X){return!X.id};if(tt.categories.some(e)||D.categories.some(e))return!1;var n=!0,y=!1,H=void 0;try{for(var F,Y=function(){var X=F.value;if(!D.categories.some(function(ct){return X.id===ct.id}))return{v:!1}},at=tt.categories[Symbol.iterator]();!(n=(F=at.next()).done);n=!0){var lt=Y();if("object"===(typeof lt>"u"?"undefined":ii(lt)))return lt.v}}catch(X){y=!0,H=X}finally{try{!n&&at.return&&at.return()}finally{if(y)throw H}}}else if(tt.categories||D.categories)return!1;return!0}function ri(tt,D){return tt.map(function(e,n){return[tt[n],D[n]]})}function Cr(tt,D){return tt.map(function(e,n){return[tt[n],D[n]]})}function xr(tt){return function(D){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=arguments[1];return _e(this,e),n.className=n.className||"leaflet-popup-draggable",we(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,y))}return me(e,D),Me(e,[{key:"onAdd",value:function(n){var y=this;Je(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,n),this._draggable=new Et.Draggable(this._container,this._wrapper),this._draggable.enable(),this._draggable.on("drag",function(H){var F=Et.DomUtil.getPosition(y._wrapper.parentNode),Y=n.layerPointToLatLng(F);y.setLatLng(Y),y.fire("drag",H)}),this._draggable.on("dragstart predrag dragend",function(H){return y.fire(H.type,H)})}},{key:"onRemove",value:function(n){this._draggable.disable(),Je(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRemove",this).call(this,n)}}]),e}(tt)}function Pi(tt){var D=tt.getBounds(),e=D.getCenter().lat;return 6378137*Math.PI*Math.cos(e*Math.PI/180)*(D.getNorthEast().lng-D.getSouthWest().lng)/180/tt.getSize().x}Et="default"in Et?Et.default:Et,hr="default"in hr?hr.default:hr;var ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(tt){return typeof tt}:function(tt){return tt&&"function"==typeof Symbol&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},_e=(function(){function tt(e){this.value=e}function D(e){function y(at,lt){try{var X=e[at](lt),ct=X.value;ct instanceof tt?Promise.resolve(ct.value).then(function(it){y("next",it)},function(it){y("throw",it)}):H(X.done?"return":"normal",X.value)}catch(it){H("throw",it)}}function H(at,lt){switch(at){case"return":F.resolve({value:lt,done:!0});break;case"throw":F.reject(lt);break;default:F.resolve({value:lt,done:!1})}(F=F.next)?y(F.key,F.arg):Y=null}var F,Y;this._invoke=function n(at,lt){return new Promise(function(X,ct){var it={key:at,arg:lt,resolve:X,reject:ct,next:null};Y?Y=Y.next=it:(F=Y=it,y(at,lt))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(D.prototype[Symbol.asyncIterator]=function(){return this}),D.prototype.next=function(e){return this._invoke("next",e)},D.prototype.throw=function(e){return this._invoke("throw",e)},D.prototype.return=function(e){return this._invoke("return",e)}}(),function(tt,D){if(!(tt instanceof D))throw new TypeError("Cannot call a class as a function")}),Me=function(){function tt(D,e){for(var n=0;n<e.length;n++){var y=e[n];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(D,y.key,y)}}return function(D,e,n){return e&&tt(D.prototype,e),n&&tt(D,n),D}}(),Ge=function(tt,D,e){return D in tt?Object.defineProperty(tt,D,{value:e,enumerable:!0,configurable:!0,writable:!0}):tt[D]=e,tt},Je=function tt(D,e,n){null===D&&(D=Function.prototype);var y=Object.getOwnPropertyDescriptor(D,e);if(void 0===y){var H=Object.getPrototypeOf(D);return null===H?void 0:tt(H,e,n)}if("value"in y)return y.value;var F=y.get;return void 0!==F?F.call(n):void 0},me=function(tt,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function, not "+typeof D);tt.prototype=Object.create(D&&D.prototype,{constructor:{value:tt,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(tt,D):tt.__proto__=D)},we=function(tt,D){if(!tt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||"object"!=typeof D&&"function"!=typeof D?tt:D},Ae=function(D,e){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return function tt(D,e){var n=[],y=!0,H=!1,F=void 0;try{for(var Y,at=D[Symbol.iterator]();!(y=(Y=at.next()).done)&&(n.push(Y.value),!e||n.length!==e);y=!0);}catch(lt){H=!0,F=lt}finally{try{!y&&at.return&&at.return()}finally{if(H)throw F}}return n}(D,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},cr=function(tt){if(Array.isArray(tt)){for(var D=0,e=Array(tt.length);D<tt.length;D++)e[D]=tt[D];return e}return Array.from(tt)},_r="template-coverage-parameter-discrete-legend",Er='<template id="'+_r+'">\n  <div class="leaflet-coverage-control legend discrete-legend">\n    <div class="legend-title-container"><strong class="legend-title"></strong></div>\n    <div class="legend-palette discrete-legend-palette"></div>\n  </div>\n</template>',Mr=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,{position:n.position||"bottomright"}));return y._covLayer=e,y._templateId=n.templateId||_r,y._language=n.language,n.templateId||null!==document.getElementById(_r)||Br(Er),e.on&&(y._remove=function(){return y.remove()},y._update=function(){return y._doUpdate(!1)},e.on("remove",y._remove)),y}return me(D,tt),Me(D,[{key:"update",value:function(){this._doUpdate(!0)}},{key:"_doUpdate",value:function(e){var n=this._el;if(e){var y=this._covLayer.parameter;this._language=Bt.getLanguageTag(y.observedProperty.label,this._language);var H=Bt.getLanguageString(y.observedProperty.label,this._language);xe(".legend-title",n).innerHTML=H}for(var F=this._covLayer.palette,Y=this._covLayer.parameter,at="",lt=0;lt<F.steps;lt++){var X=Bt.getLanguageString(Y.observedProperty.categories[lt].label,this._language);at+='\n        <i style="background:rgb('+F.red[lt]+", "+F.green[lt]+", "+F.blue[lt]+')"></i>\n        '+X+"\n        <br>"}xe(".legend-palette",n).innerHTML=at}},{key:"onAdd",value:function(e){return this._map=e,this._covLayer.on&&this._covLayer.on("paletteChange",this._update),this._el=Ur(this._templateId),this.update(),this._el}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update))}}]),D}(Et.Control),Qr="template-coverage-parameter-continuous-legend",ni='<template id="'+Qr+'">\n  <div class="leaflet-coverage-control legend continuous-legend">\n    <div style="margin-bottom:3px" class="legend-title-container">\n      <strong class="legend-title"></strong>\n    </div>\n    <div style="display: inline-block; height: 144px; float:left">\n      <span style="height: 136px; width: 18px; display: block; margin-top: 9px;" class="legend-palette"></span>\n    </div>\n    <div style="display: inline-block; float:left; height:153px">\n      <table style="height: 100%;">\n        <tr><td style="vertical-align:top"><span class="legend-max"></span> <span class="legend-uom"></span></td></tr>\n        <tr><td><span class="legend-current"></span></td></tr>\n        <tr><td style="vertical-align:bottom"><span class="legend-min"></span> <span class="legend-uom"></span></td></tr>\n      </table>\n    </div>\n  </div>\n</template>',Xr=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,{position:n.position||"bottomright"}));return y._covLayer=e,y._templateId=n.templateId||Qr,y._language=n.language,n.templateId||null!==document.getElementById(Qr)||Br(ni),e.on&&(y._remove=function(){return y.remove()},y._update=function(){return y._doUpdate(!1)},e.on("remove",y._remove)),y}return me(D,tt),Me(D,[{key:"update",value:function(){this._doUpdate(!0)}},{key:"_doUpdate",value:function(e){var ct,it,gt,xt,y=this._el;e&&(it=Bt.getLanguageTag((ct=this._covLayer.parameter).observedProperty.label,this._language),gt=Bt.getLanguageString(ct.observedProperty.label,it),xt=Bt.stringifyUnit(ct.unit,it),xe(".legend-title",y).innerHTML=gt,function Jr(tt,D){return"string"==typeof D&&(D=xe(D)),D=D||document,[].concat(cr(D.querySelectorAll(tt)))}(".legend-uom",y).forEach(function(Pt){return Pt.innerHTML=xt}));var H=this._covLayer.palette,F=Ae(this._covLayer.paletteExtent,2),Y=F[0],at=F[1];xe(".legend-min",y).innerHTML=Y.toFixed(2),xe(".legend-max",y).innerHTML=at.toFixed(2);for(var lt="",X=0;X<H.steps;X++)X>0&&(lt+=","),lt+="rgb("+H.red[X]+","+H.green[X]+","+H.blue[X]+")";xe(".legend-palette",y).style.background="transparent linear-gradient(to top, "+lt+") repeat scroll 0% 0%"}},{key:"onAdd",value:function(e){return this._map=e,this._covLayer.on&&(this._covLayer.on("paletteChange",this._update),this._covLayer.on("paletteExtentChange",this._update)),this._el=Ur(this._templateId),this.update(),this._el}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("paletteChange",this._update),this._covLayer.off("paletteExtentChange",this._update))}}]),D}(Et.Control),Ar=Et.Evented.prototype,Ye="template-coverage-timeaxis",Xe='<template id="'+Ye+'">\n<div class="leaflet-coverage-control form-inline" style="clear:none">\n  <strong class="title">Time</strong><br>\n  <div class="form-group">\n    <select name="date" class="date form-control"></select>\n  </div>\n  <div class="form-group">\n    <select name="time" class="time form-control"></select>\n  </div>\n</div>\n</template>',wr=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,{position:n.position||"topleft"}));y._templateId=n.templateId||Ye,y._title=n.title||"Time",y._covLayer=e,n.templateId||null!==document.getElementById(Ye)||Br(Xe),e.on&&(y._remove=function(){return y.remove()},e.on("remove",y._remove),y._axisListener=function(xt){"time"===xt.axis&&y.update()});var H=y._covLayer.timeSlices,F=new Map,Y=!0,at=!1,lt=void 0;try{for(var X,ct=H[Symbol.iterator]();!(Y=(X=ct.next()).done);Y=!0){var it=X.value,gt=new Date(Date.UTC(it.getUTCFullYear(),it.getUTCMonth(),it.getUTCDate())).getTime();F.has(gt)||F.set(gt,[]),F.get(gt).push(it)}}catch(xt){at=!0,lt=xt}finally{try{!Y&&ct.return&&ct.return()}finally{if(at)throw lt}}return y._dateMap=F,y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);var y=Ur(this._templateId);this._el=y,Et.DomEvent.disableClickPropagation(y),this._title&&(xe(".title",y).innerHTML=this._title);var H=!0,F=!1,Y=void 0;try{for(var at,lt=this._dateMap.keys()[Symbol.iterator]();!(H=(at=lt.next()).done);H=!0){var ct=Re(at.value);xe(".date",y).appendChild(Gr('<option value="'+ct+'">'+ct+"</option>"))}}catch(it){F=!0,Y=it}finally{try{!H&&lt.return&&lt.return()}finally{if(F)throw Y}}return xe(".date",y).disabled=1===this._dateMap.size,xe(".date",y).addEventListener("change",function(it){var gt=yr(it.target.value),xt=n._dateMap.get(gt)[0];n._covLayer.time=xt,n._initTimeSelect(gt),n.fire("change",{time:xt})}),xe(".time",y).addEventListener("change",function(it){var gt=xe(".date",y).value,Pt=new Date(gt+"T"+it.target.value);n._covLayer.time=Pt,n.fire("change",{time:Pt})}),this.update(),y}},{key:"onRemove",value:function(){this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}},{key:"update",value:function(){var e=this._covLayer.time;if(e){var n=this._el,y=yr(e.toISOString()),H=Re(y);xe(".date",n).value=H,this._initTimeSelect(y);var F=e.toISOString().substr(11);xe(".time",n).value=F}}},{key:"_initTimeSelect",value:function(e){var y=xe(".time",this._el);y.innerHTML="";var H=this._dateMap.get(e),F=!0,Y=!1,at=void 0;try{for(var lt,X=H[Symbol.iterator]();!(F=(lt=X.next()).done);F=!0){var it=lt.value.toISOString().substr(11);y.appendChild(Gr('<option value="'+it+'">'+it+"</option>"))}}catch(gt){Y=!0,at=gt}finally{try{!F&&X.return&&X.return()}finally{if(Y)throw at}}y.disabled=1===H.length}}]),D}(zr(Et.Control)),ir="template-coverage-dropdown",He='<template id="'+ir+'">\n<div class="leaflet-coverage-control" style="clear:none">\n  <strong class="select-title"></strong><br>\n  <select class="form-control"></select>\n</div>\n</template>',qr=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,n.position?{position:n.position}:{position:"topleft"}));return y._templateId=n.templateId||ir,y._title=n.title||"",y._choices=e,y._value=n.value||e[0].value,n.templateId||null!==document.getElementById(ir)||Br(He),y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this,y=Ur(this._templateId);this._el=y,Et.DomEvent.disableClickPropagation(y),xe(".select-title",y).innerHTML=this._title;var H=!0,F=!1,Y=void 0;try{for(var at,lt=this._choices[Symbol.iterator]();!(H=(at=lt.next()).done);H=!0){var X=at.value,ct=X.value,it=X.label;xe("select",y).appendChild(Gr('<option value="'+ct+'">'+it+"</option>"))}}catch(gt){F=!0,Y=gt}finally{try{!H&&lt.return&&lt.return()}finally{if(F)throw Y}}return xe("select",y).disabled=this._choices.length<=1,this.value=this._value,xe("select",y).addEventListener("change",function(gt){n._value=gt.target.value,n.fire("change",{value:gt.target.value})}),y}},{key:"value",get:function(){return this._value},set:function(e){xe("select",this._el).value=e}}]),D}(zr(Et.Control)),pr=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));return y._templateId=n.templateId,y._covLayer=e,y._title=n.title||"Vertical",y._position=n.position||"topleft",e.on&&(y._remove=function(){return y.remove()},e.on("remove",y._remove),y._axisListener=function(H){"vertical"===H.axis&&y.update()}),y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this._covLayer.on&&this._covLayer.on("axisChange",this._axisListener);var y=this._covLayer.crsVerticalAxis||{},H=y.name?Bt.getLanguageString(y.name):this._title,F=Bt.stringifyUnit(y.unit);F&&(F=" "+F);for(var Y=[],at=this._covLayer.verticalSlices,lt=0;lt<at.length;lt++)Y.push({value:lt.toString(),label:at[lt]+F});this._dropdown=new qr(Y,{templateId:this._templateId,position:this._position,title:H,value:this._getVerticalIndex().toString()}).on("change",function(X){var ct=parseInt(X.value),it=n._covLayer.verticalSlices[ct];n._covLayer.vertical=it,n.fire("change",{vertical:it})}).addTo(e)}},{key:"onRemove",value:function(e){this._dropdown.remove(),this._covLayer.off&&(this._covLayer.off("remove",this._remove),this._covLayer.off("axisChange",this._axisListener))}},{key:"_getVerticalIndex",value:function(){return this._covLayer.verticalSlices.indexOf(this._covLayer.vertical)}},{key:"update",value:function(){var e=this._getVerticalIndex();this._dropdown.value=e.toString()}}]),D}(Et.Layer),ai=vr(Dr(function(tt){tt.exports=function D(e){for(var n=new Array(e),y=0;y<e;++y)n[y]=y;return n}})),$=Object.freeze({default:ai}),K=vr(Dr(function(tt){function D(n){return!!n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}tt.exports=function(n){return null!=n&&(D(n)||function e(n){return"function"==typeof n.readFloatLE&&"function"==typeof n.slice&&D(n.slice(0,0))}(n)||!!n._isBuffer)}})),yt=Object.freeze({default:K}),pt=Dr(function(tt){function D(X,ct){return X[0]-ct[0]}function e(){var X,ct=this.stride,it=new Array(ct.length);for(X=0;X<it.length;++X)it[X]=[Math.abs(ct[X]),X];it.sort(D);var gt=new Array(it.length);for(X=0;X<gt.length;++X)gt[X]=it[X][1];return gt}function n(X,ct){var it=["View",ct,"d",X].join("");ct<0&&(it="View_Nil"+X);var gt="generic"===X;if(-1===ct){var xt="function "+it+"(a){this.data=a;};var proto="+it+".prototype;proto.dtype='"+X+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+it+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+it+"(a){return new "+it+"(a);}";return new Function(xt)()}if(0===ct)return xt="function "+it+"(a,d) {this.data = a;this.offset = d};var proto="+it+".prototype;proto.dtype='"+X+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+it+"_copy() {return new "+it+"(this.data,this.offset)};proto.pick=function "+it+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+it+"_get(){return "+(gt?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+it+"_set(v){return "+(gt?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+it+"(a,b,c,d){return new "+it+"(a,d)}",new Function("TrivialArray",xt)(lt[X][0]);xt=["'use strict'"];var Pt=F(ct),St=Pt.map(function(Yt){return"i"+Yt}),Dt="this.offset+"+Pt.map(function(Yt){return"this.stride["+Yt+"]*i"+Yt}).join("+"),Lt=Pt.map(function(Yt){return"b"+Yt}).join(","),ie=Pt.map(function(Yt){return"c"+Yt}).join(",");xt.push("function "+it+"(a,"+Lt+","+ie+",d){this.data=a","this.shape=["+Lt+"]","this.stride=["+ie+"]","this.offset=d|0}","var proto="+it+".prototype","proto.dtype='"+X+"'","proto.dimension="+ct),xt.push("Object.defineProperty(proto,'size',{get:function "+it+"_size(){return "+Pt.map(function(Yt){return"this.shape["+Yt+"]"}).join("*"),"}})"),1===ct?xt.push("proto.order=[0]"):(xt.push("Object.defineProperty(proto,'order',{get:"),ct<4?(xt.push("function "+it+"_order(){"),2===ct?xt.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===ct&&xt.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):xt.push("ORDER})")),xt.push("proto.set=function "+it+"_set("+St.join(",")+",v){"),xt.push(gt?"return this.data.set("+Dt+",v)}":"return this.data["+Dt+"]=v}"),xt.push("proto.get=function "+it+"_get("+St.join(",")+"){"),xt.push(gt?"return this.data.get("+Dt+")}":"return this.data["+Dt+"]}"),xt.push("proto.index=function "+it+"_index(",St.join(),"){return "+Dt+"}"),xt.push("proto.hi=function "+it+"_hi("+St.join(",")+"){return new "+it+"(this.data,"+Pt.map(function(Yt){return["(typeof i",Yt,"!=='number'||i",Yt,"<0)?this.shape[",Yt,"]:i",Yt,"|0"].join("")}).join(",")+","+Pt.map(function(Yt){return"this.stride["+Yt+"]"}).join(",")+",this.offset)}");var ee=Pt.map(function(Yt){return"a"+Yt+"=this.shape["+Yt+"]"}),ne=Pt.map(function(Yt){return"c"+Yt+"=this.stride["+Yt+"]"});xt.push("proto.lo=function "+it+"_lo("+St.join(",")+"){var b=this.offset,d=0,"+ee.join(",")+","+ne.join(","));for(var Qt=0;Qt<ct;++Qt)xt.push("if(typeof i"+Qt+"==='number'&&i"+Qt+">=0){d=i"+Qt+"|0;b+=c"+Qt+"*d;a"+Qt+"-=d}");for(xt.push("return new "+it+"(this.data,"+Pt.map(function(Yt){return"a"+Yt}).join(",")+","+Pt.map(function(Yt){return"c"+Yt}).join(",")+",b)}"),xt.push("proto.step=function "+it+"_step("+St.join(",")+"){var "+Pt.map(function(Yt){return"a"+Yt+"=this.shape["+Yt+"]"}).join(",")+","+Pt.map(function(Yt){return"b"+Yt+"=this.stride["+Yt+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),Qt=0;Qt<ct;++Qt)xt.push("if(typeof i"+Qt+"==='number'){d=i"+Qt+"|0;if(d<0){c+=b"+Qt+"*(a"+Qt+"-1);a"+Qt+"=ceil(-a"+Qt+"/d)}else{a"+Qt+"=ceil(a"+Qt+"/d)}b"+Qt+"*=d}");xt.push("return new "+it+"(this.data,"+Pt.map(function(Yt){return"a"+Yt}).join(",")+","+Pt.map(function(Yt){return"b"+Yt}).join(",")+",c)}");var Se=new Array(ct),qe=new Array(ct);for(Qt=0;Qt<ct;++Qt)Se[Qt]="a[i"+Qt+"]",qe[Qt]="b[i"+Qt+"]";for(xt.push("proto.transpose=function "+it+"_transpose("+St+"){"+St.map(function(Yt,Be){return Yt+"=("+Yt+"===undefined?"+Be+":"+Yt+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+it+"(this.data,"+Se.join(",")+","+qe.join(",")+",this.offset)}"),xt.push("proto.pick=function "+it+"_pick("+St+"){var a=[],b=[],c=this.offset"),Qt=0;Qt<ct;++Qt)xt.push("if(typeof i"+Qt+"==='number'&&i"+Qt+">=0){c=(c+this.stride["+Qt+"]*i"+Qt+")|0}else{a.push(this.shape["+Qt+"]);b.push(this.stride["+Qt+"])}");return xt.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),xt.push("return function construct_"+it+"(data,shape,stride,offset){return new "+it+"(data,"+Pt.map(function(Yt){return"shape["+Yt+"]"}).join(",")+","+Pt.map(function(Yt){return"stride["+Yt+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",xt.join("\n"))(lt[X],e)}var F=vr($),Y=vr(yt),at=typeof Float64Array<"u",lt={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};tt.exports=function H(X,ct,it,gt){if(void 0===X)return(0,lt.array[0])([]);"number"==typeof X&&(X=[X]),void 0===ct&&(ct=[X.length]);var xt=ct.length;if(void 0===it){it=new Array(xt);for(var Pt=xt-1,St=1;Pt>=0;--Pt)it[Pt]=St,St*=ct[Pt]}if(void 0===gt)for(gt=0,Pt=0;Pt<xt;++Pt)it[Pt]<0&&(gt-=(ct[Pt]-1)*it[Pt]);for(var Dt=function y(X){if(Y(X))return"buffer";if(at)switch(Object.prototype.toString.call(X)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(X)?"array":"generic"}(X),Lt=lt[Dt];Lt.length<=xt+1;)Lt.push(n(Dt,Lt.length-1));return(0,Lt[xt+1])(X,ct,it,gt)}}),Mt=vr(pt),wt=function(){function tt(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).defaultSteps,n=void 0===e?256:e;_e(this,tt),this._defaultSteps=n,this._palettes=new Map}return Me(tt,[{key:"add",value:function(D,e){if(Array.isArray(e)&&(e=ur(e)),![e.red,e.green,e.blue].every(function(n){return n.length===e.red.length}))throw new Error("The red, green, blue arrays of the palette must be of equal lengths");e.red instanceof Uint8Array||(e.red=Fr(e.red),e.green=Fr(e.green),e.blue=Fr(e.blue)),e.steps=e.red.length,this._palettes.set(D,e)}},{key:"addLinear",value:function(D,e){this.add(D,dt(e,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).steps||this._defaultSteps))}},{key:"get",value:function(D){var e=this._palettes.get(D);if(void 0===e)throw new Error('Palette "'+D+'" not found');return e}},{key:Symbol.iterator,get:function(){return this._palettes[Symbol.iterator]}}]),tt}(),Ot=function(){return dt(["#deebf7","#3182bd"])},It=function(tt){if(tt>12)throw new Error("not enough built-in categorical colors, must supply custom colors");return ur(["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"].slice(0,tt))},Nt=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));return Bt.isDomain(e)&&(e=Bt.fromDomain(e),n.parameter=e.parameters.keys().next().value,delete n.keys),n.paletteExtent||(n.paletteExtent="subset"),Et.Util.setOptions(y,n),y._cov=e,y._param=e.parameters.get(n.keys?n.keys[0]:n.parameter),y._axesSubset={t:{coordPref:n.time?n.time.toISOString():void 0},z:{coordPref:n.vertical}},y.crsVerticalAxis=void 0,y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this.load().then(function(){return n.initializePalette()}).then(function(){var y=Bt.getReferenceObject(n.domain,"z");if(y&&1===y.coordinates.length){var H=y.system;H.cs&&(H.cs.csAxes||H.cs.axes)&&(n.crsVerticalAxis=H.cs.csAxes?H.cs.csAxes[0]:H.cs.axes[0])}}).then(function(){n._errored=!1,Je(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"onAdd",n).call(n,e),n.fire("afterAdd")}).catch(function(y){n._errored=!0,console.log(y),Je(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"onAdd",n).call(n,e)})}},{key:"onRemove",value:function(e){delete this._map,Je(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"onRemove",this).call(this,e)}},{key:"getBounds",value:function(){var e=void 0;if(!this._cov.bbox){e=this._getDomainBbox();var n=this.projection,y=n.unproject({x:e[0],y:e[1]}),H=n.unproject({x:e[0],y:e[3]}),F=n.unproject({x:e[2],y:e[1]}),Y=n.unproject({x:e[2],y:e[3]});return Et.latLngBounds([y,H,F,Y])}var at=Et.latLng((e=this._cov.bbox)[1],e[0]),lt=Et.latLng(e[3],e[2]);return Et.latLngBounds(at,lt)}},{key:"_loadCoverageSubset",value:function(){var e=this,n={},y=!0,H=!1,F=void 0;try{for(var Y,at=Object.keys(this._axesSubset)[Symbol.iterator]();!(y=(Y=at.next()).done);y=!0){var lt=Y.value,X=this._axesSubset[lt];this.domain.axes.has(lt)&&(n[lt]=null==X.coordPref?{target:this.domain.axes.get(lt).values[0]}:{target:X.coordPref})}}catch(ct){H=!0,F=ct}finally{try{!y&&at.return&&at.return()}finally{if(H)throw F}}return this.fire("dataLoading"),this._cov.subsetByValue(n).then(function(ct){return e._subsetCov=ct,ct.cacheRanges=!0,Promise.all([ct.loadDomain(),ct.loadRange(e._param.key)])}).then(function(ct){var it=Ae(ct,2),xt=it[1];e._subsetDomain=it[0],e._subsetRange=xt,e.fire("dataLoad")}).catch(function(ct){throw e.fire("dataLoad"),ct})}},{key:"computePaletteExtent",value:function(e){var n=this;if("subset"===e){var y=this._subsetRange.shape.get(this._projX),H=this._subsetRange.shape.get(this._projY);if(y*H<1e6)return e=sr(e=Bt.minMaxOfRange(this._subsetRange)),Promise.resolve(e);var F,Y={start:0,stop:y,step:Math.max(Math.round(y/1e3),1)},at={start:0,stop:H,step:Math.max(Math.round(H/1e3),1)};return this._subsetCov.subsetByIndex((F={},Ge(F,this._projX,Y),Ge(F,this._projY,at),F)).then(function(lt){return lt.loadRange(n._param.key).then(function(X){var ct=Bt.minMaxOfRange(X),it=Ae(ct,2),gt=it[0],xt=it[1],Pt=.1*(xt-gt);return e=[gt-Pt,xt+Pt]})})}throw"fov"===e?(this._map.getBounds(),new Error("NOT IMPLEMENTED YET")):new Error("Unknown extent specification: "+e)}},{key:"getValueAt",value:function(e){var n,y=this.domain.axes.get(this._projX).values,H=this.domain.axes.get(this._projY).values,F=this._getDomainBbox(),lt=this.projection.project({lat:e.lat,lon:e.lng}),X=lt.x,ct=lt.y;if(!(X<F[0]||X>F[2]||ct<F[1]||ct>F[3])){var it=Bt.indexOfNearest(H,ct),gt=Bt.indexOfNearest(y,X);return this._subsetRange.get((Ge(n={},this._projY,it),Ge(n,this._projX,gt),n))}}},{key:"createTile",value:function(e){var n=Et.DomUtil.create("canvas","leaflet-tile"),y=this.getTileSize();return n.width=y.x,n.height=y.y,this.drawTile(n,e),n}},{key:"drawTile",value:function(e,n){if(!this._errored){var y=e.getContext("2d"),H=this.getTileSize(),F=y.getImageData(0,0,H.x,H.y),Y=Mt(F.data,[H.y,H.x,4]),at=this.palette,lt=at.red,X=at.green,ct=at.blue,it=this.getPaletteIndex,gt=function(Pt,St,Dt){var Lt=it(Dt);void 0!==Lt&&(Y.set(Pt,St,0,lt[Lt]),Y.set(Pt,St,1,X[Lt]),Y.set(Pt,St,2,ct[Lt]),Y.set(Pt,St,3,255))},xt=this._subsetRange.get;this._isDomainUsingEllipsoidalCRS()?this._isRectilinearGeodeticMap()?this._drawGeodeticCRSWithRectilinearMapProjection(gt,n,xt):this._drawGeodeticCRSWithAnyMapProjection(gt,n,xt):this._isRectilinearGeodeticMap()?this._drawProjectedCRSWithRectilinearMapProjection(gt,n,xt):this._drawProjectedCRSWithAnyMapProjection(gt,n,xt),y.putImageData(F,0,0)}}},{key:"_getDomainBbox",value:function(){var e=function(gt,xt){var Pt=gt.length-1,St=void 0,Dt=void 0;if(xt){var Lt=[xt.get(0)[0],xt.get(Pt)[1]];St=Lt[0],Dt=Lt[1]}else{var ie=[gt[0],gt[Pt]];St=ie[0],Dt=ie[1]}var ee=St>Dt;if(ee){var ne=[Dt,St];St=ne[0],Dt=ne[1]}return!xt&&gt.length>1&&(ee?(St-=(gt[Pt-1]-gt[Pt])/2,Dt+=(gt[0]-gt[1])/2):(St-=(gt[1]-gt[0])/2,Dt+=(gt[Pt]-gt[Pt-1])/2)),[St,Dt]},n=this.domain.axes.get(this._projX),y=this.domain.axes.get(this._projY),H=e(n.values,n.bounds),F=Ae(H,2),Y=F[0],at=F[1],lt=e(y.values,y.bounds),X=Ae(lt,2);return[Y,X[0],at,X[1]]}},{key:"_drawGeodeticCRSWithAnyMapProjection",value:function(e,n,y){var H=this.getTileSize(),F=n.x*H.x,Y=n.y*H.y,at=n.z,lt=this._map,X=this.domain.axes.get("x").values,ct=this.domain.axes.get("y").values,it=this._getDomainBbox();"y"===this._projX&&(it=[it[1],it[0],it[3],it[2]]);for(var gt=[it[0],it[0]+360],xt=0;xt<H.x;xt++)for(var Pt=0;Pt<H.y;Pt++){var St=lt.unproject(Et.point(F+xt,Y+Pt),at),Dt=St.lat,Lt=St.lng;Dt<it[1]||Dt>it[3]||((Lt=ei(Lt,gt))<it[0]||Lt>it[2])||e(Pt,xt,y({y:Bt.indexOfNearest(ct,Dt),x:Bt.indexOfNearest(X,Lt)}))}}},{key:"_drawProjectedCRSWithAnyMapProjection",value:function(e,n,y){for(var H=this._map,F=this.domain.axes.get(this._projX).values,Y=this.domain.axes.get(this._projY).values,at=this._getDomainBbox(),lt=this.projection,X=this.getTileSize(),ct=n.x*X.x,it=n.y*X.y,gt=n.z,xt=0;xt<X.x;xt++)for(var Pt=0;Pt<X.y;Pt++){var St=H.unproject(Et.point(ct+xt,it+Pt),gt),ie=lt.project({lat:St.lat,lon:St.lng}),ee=ie.x,ne=ie.y;ee<at[0]||ee>at[2]||ne<at[1]||ne>at[3]||e(Pt,xt,y({y:Bt.indexOfNearest(Y,ne),x:Bt.indexOfNearest(F,ee)}))}}},{key:"_drawProjectedCRSWithRectilinearMapProjection",value:function(e,n,y){for(var H=this._map,F=this.domain.axes.get(this._projX).values,Y=this.domain.axes.get(this._projY).values,at=this._getDomainBbox(),lt=this.projection,X=this.getTileSize(),ct=n.x*X.x,it=n.y*X.y,gt=n.z,xt=new Float64Array(X.x),Pt=0;Pt<X.x;Pt++){var St=H.unproject(Et.point(ct+Pt,it),gt);xt[Pt]=St.lng}for(var Lt=new Float64Array(X.y),ie=0;ie<X.y;ie++){var ee=H.unproject(Et.point(ct,it+ie),gt);Lt[ie]=ee.lat}for(var Qt=0;Qt<X.x;Qt++)for(var Se=0;Se<X.y;Se++){var Te=lt.project({lat:Lt[Se],lon:xt[Qt]}),Yt=Te.x,Be=Te.y;Yt<at[0]||Yt>at[2]||Be<at[1]||Be>at[3]||e(Se,Qt,y({y:Bt.indexOfNearest(Y,Be),x:Bt.indexOfNearest(F,Yt)}))}}},{key:"_drawGeodeticCRSWithRectilinearMapProjection",value:function(e,n,y){var H=this._map,F=this.domain.axes.get("x").values,Y=this.domain.axes.get("y").values,at=this._getDomainBbox();"y"===this._projX&&(at=[at[1],at[0],at[3],at[2]]);for(var lt=[at[0],at[0]+360],X=this.getTileSize(),ct=n.x*X.x,it=n.y*X.y,gt=n.z,xt=new Float64Array(X.y),Pt=new Uint32Array(X.y),St=0;St<X.y;St++){var Dt=H.unproject(Et.point(ct,it+St),gt).lat;xt[St]=Dt,Pt[St]=Bt.indexOfNearest(Y,Dt)}for(var Lt=0;Lt<X.x;Lt++){var ie=H.unproject(Et.point(ct+Lt,it),gt).lng;if(!((ie=ei(ie,lt))<at[0]||ie>at[2]))for(var ee=Bt.indexOfNearest(F,ie),ne=0;ne<X.y;ne++){var Qt=xt[ne];Qt<at[1]||Qt>at[3]||e(ne,Lt,y({y:Pt[ne],x:ee}))}}}},{key:"_isRectilinearGeodeticMap",value:function(){return-1!==[Et.CRS.EPSG3857,Et.CRS.EPSG4326,Et.CRS.EPSG3395,Et.CRS.Simple].indexOf(this._map.options.crs)}},{key:"_isDomainUsingEllipsoidalCRS",value:function(){return this.domain.referencing.some(function(e){return Bt.isEllipsoidalCRS(e.system)})}},{key:"redraw",value:function(){this.getContainer()&&Et.GridLayer.prototype.redraw.call(this)}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}},{key:"time",set:function(e){var n=this;if(!this.domain.axes.has("t"))throw new Error("No time axis found");var y=this.time;this._axesSubset.t.coordPref=e.toISOString(),this._loadCoverageSubset().then(function(){y!==n.time&&(n.redraw(),n.fire("axisChange",{axis:"time"}))})},get:function(){if(this.domain.axes.has("t")){var e=this._subsetDomain.axes.get("t").values[0];return new Date(e)}}},{key:"timeSlices",get:function(){if(this.domain.axes.has("t"))return this.domain.axes.get("t").values.map(function(e){return new Date(e)})}},{key:"vertical",set:function(e){var n=this;if(!this.domain.axes.has("z"))throw new Error("No vertical axis found");var y=this.vertical;this._axesSubset.z.coordPref=e,this._loadCoverageSubset().then(function(){y!==n.vertical&&(n.redraw(),n.fire("axisChange",{axis:"vertical"}))})},get:function(){if(this.domain.axes.has("z"))return this._subsetDomain.axes.get("z").values[0]}},{key:"verticalSlices",get:function(){if(this.domain.axes.has("z")){var e=this.domain.axes.get("z").values;return ArrayBuffer.isView(e)&&(e=[].concat(cr(e))),e}}}]),D}(er(rr(Et.GridLayer))),Rt="black",te=function(tt){function D(e,n){_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));Bt.isDomain(e)&&(e=Bt.fromDomain(e),delete n.keys,n.parameter=e.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),Et.Util.setOptions(y,n),y._cov=e;var H=n.keys?n.keys[0]:n.parameter;return y._param=H?e.parameters.get(H):null,y._defaultColor=n.defaultColor||Rt,y.showNoData=n.showNoData,y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this.load().then(function(){return n.initializePalette()}).then(function(){n._addMarker(),n.fire("afterAdd")})}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return Et.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var e=this.domain.axes.get(this._projX).values[0],n=this.domain.axes.get(this._projY).values[0],y=this.projection.unproject({x:e,y:n});return Et.latLng(y)}},{key:"computePaletteExtent",value:function(e){if("full"===e){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");var n=this.getValue();return e=sr([n,n]),Promise.resolve(e)}throw new Error("Unknown extent specification: "+e)}},{key:"getValue",value:function(){if(this._param)return this.range.get({})}},{key:"getValueAt",value:function(e,n){if(this.getLatLng().distanceTo(e)<=n)return this.getValue()}},{key:"_getColor",value:function(e){if(null===e)return this._defaultColor;if(void 0===e)return this._defaultColor;var n=this.getPaletteIndex(e),y=this.palette;return{r:y.red[n],g:y.green[n],b:y.blue[n]}}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}}]),D}(er(Vr(rr(Et.Layer)))),Ct=function(tt){function D(e,n){_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));Bt.isDomain(e)&&(e=Bt.fromDomain(e),delete n.keys,n.parameter=e.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),Et.Util.setOptions(y,n),y._cov=e;var H=n.keys?n.keys[0]:n.parameter;return y._param=H?e.parameters.get(H):null,y._defaultColor=n.defaultColor||Rt,y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this.load().then(function(){return n.initializePalette()}).then(function(){n._addTrajectoryLayers(),n.fire("afterAdd")})}},{key:"computePaletteExtent",value:function(e){var n=this.range;if("full"!==e)throw"fov"===e?(this._map.getBounds(),new Error("NOT IMPLEMENTED YET")):new Error("Unknown extent specification: "+e);return e=sr(e=Bt.minMaxOfRange(n)),Promise.resolve(e)}},{key:"_addTrajectoryLayers",value:function(){for(var e=this.getLatLngs(),n=0;n<e.length;n++){var y=new Et.CircleMarker(e[n],{color:this._getColor(this._getValue(n)),opacity:1,fillOpacity:1});this.addLayer(y)}var H=Et.polyline(e,{color:"black",weight:3});this.addLayer(H)}},{key:"getLatLngs",value:function(){for(var e=this.domain.axes.get("composite"),n=e.coordinates.indexOf(this._projX),y=e.coordinates.indexOf(this._projY),H=[],F=0;F<e.values.length;F++){var lt=this.projection.unproject({x:e.values[F][n],y:e.values[F][y]}),X=Et.latLng(lt);H.push(X)}return H}},{key:"getValueAt",value:function(e,n){for(var y=this.getLatLngs(),H=y.map(function(X){return X.distanceTo(e)}),F=1/0,Y=void 0,at=0;at<y.length;at++){var lt=H[at];lt<=n&&lt<F&&(F=lt,Y=at)}if(void 0!==Y)return this._getValue(Y)}},{key:"_getValue",value:function(e){if(this._param)return this.range.get({composite:e})}},{key:"_getColor",value:function(e){if(null===e)return this._defaultColor;if(void 0===e)return this._defaultColor;var n=this.getPaletteIndex(e),y=this.palette;return"rgb("+y.red[n]+", "+y.green[n]+", "+y.blue[n]+")"}},{key:"redraw",value:function(){this.clearLayers(),this._addTrajectoryLayers()}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}}]),D}(er(rr(Et.FeatureGroup))),ue=function(tt){function D(e,n){_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));Bt.isDomain(e)&&(e=Bt.fromDomain(e),delete n.keys,n.parameter=e.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),Et.Util.setOptions(y,n),y._cov=e;var H=n.keys?n.keys[0]:n.parameter;return y._param=H?e.parameters.get(H):null,y._axesSubset={t:{coordPref:n.time}},y._defaultColor=n.defaultColor||Rt,y.showNoData=n.showNoData,y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this.load().then(function(){return n.initializePalette()}).then(function(){n._addMarker(),n.fire("afterAdd")})}},{key:"_loadCoverageSubset",value:function(){var e=this._axesSubset.t;if(null==e.coordPref)e.idx=e.coord=void 0;else{var n=this.domain.axes.get("t").values.map(function(y){return y.getTime()});e.idx=Bt.indexOfNearest(n,e.coordPref.getTime()),e.coord=n[e.idx]}}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return Et.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var e=this.domain.axes.get(this._projX).values[0],n=this.domain.axes.get(this._projY).values[0],y=this.projection.unproject({x:e,y:n});return Et.latLng(y)}},{key:"canUsePalette",value:function(){return void 0!==this.time}},{key:"computePaletteExtent",value:function(e){if("full"===e){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return e=sr(e=Bt.minMaxOfRange(this.range)),Promise.resolve(e)}throw new Error("Unknown extent specification: "+e)}},{key:"getValue",value:function(){if(this._param&&void 0!==this._axesSubset.t.coord)return this.range.get({t:this._axesSubset.t.idx})}},{key:"getValueAt",value:function(e,n){if(this.getLatLng().distanceTo(e)<=n)return this.getValue()}},{key:"_getColor",value:function(){var e=this.getValue();if(null===e)return this._defaultColor;if(void 0===e)return this._defaultColor;var n=this.getPaletteIndex(e),y=this.palette;return{r:y.red[n],g:y.green[n],b:y.blue[n]}}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}},{key:"time",set:function(e){var n=this.time;this._axesSubset.t.coordPref=e?e.toISOString():void 0,this._loadCoverageSubset(),n!==this.time&&(this.redraw(),this.fire("axisChange",{axis:"time"}))},get:function(){if(this._axesSubset.t.coord){var e=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(e)}}},{key:"timeSlices",get:function(){return this.domain.axes.get("t").values.map(function(e){return new Date(e)})}}]),D}(er(Vr(rr(Et.Layer))));br.prototype={push:function(tt){this.content.push(tt),this.bubbleUp(this.content.length-1)},pop:function(){var tt=this.content[0],D=this.content.pop();return this.content.length>0&&(this.content[0]=D,this.sinkDown(0)),tt},peek:function(){return this.content[0]},remove:function(tt){for(var D=this.content.length,e=0;e<D;e++)if(this.content[e]==tt){var n=this.content.pop();return void(e!=D-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(tt)?this.bubbleUp(e):this.sinkDown(e)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(tt){for(var D=this.content[tt];tt>0;){var e=Math.floor((tt+1)/2)-1,n=this.content[e];if(!(this.scoreFunction(D)<this.scoreFunction(n)))break;this.content[e]=D,this.content[tt]=n,tt=e}},sinkDown:function(tt){for(var D=this.content.length,e=this.content[tt],n=this.scoreFunction(e);;){var y=2*(tt+1),H=y-1,F=null;if(H<D){var at=this.scoreFunction(this.content[H]);at<n&&(F=H)}if(y<D&&this.scoreFunction(this.content[y])<(null==F?n:at)&&(F=y),null==F)break;this.content[tt]=this.content[F],this.content[F]=e,tt=F}}};var re,fe,Ut=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));n.paletteExtent||(n.paletteExtent="full"),Et.Util.setOptions(y,n),y._covcoll=e;var H=n.keys?n.keys[0]:n.parameter;return y._param=H?e.parameters.get(H):null,y._defaultColor=n.defaultColor||Rt,y._pointClass=n.pointClass||te,y._layerGroup=Et.layerGroup(),y._layers=[],y._kdtree=void 0,y.on("paletteChange",function(){var F=!0,Y=!1,at=void 0;try{for(var lt,X=y._layers[Symbol.iterator]();!(F=(lt=X.next()).done);F=!0)lt.value.palette=y.palette}catch(it){Y=!0,at=it}finally{try{!F&&X.return&&X.return()}finally{if(Y)throw at}}}),y.on("paletteExtentChange",function(){var F=!0,Y=!1,at=void 0;try{for(var lt,X=y._layers[Symbol.iterator]();!(F=(lt=X.next()).done);F=!0)lt.value.paletteExtent=y.paletteExtent}catch(it){Y=!0,at=it}finally{try{!F&&X.return&&X.return()}finally{if(Y)throw at}}}),y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){this._map=e,this._layerLoadCount=0,this._layerErrors=[];var n={keys:this._param?[this._param.key]:void 0,defaultColor:this._defaultColor,palette:this.palette,paletteExtent:this.paletteExtent};if(this.options.pointOptionsFn){var y=this.options.pointOptionsFn();for(var H in y)n[H]=y[H]}var F=!0,Y=!1,at=void 0;try{for(var lt,X=this._covcoll.coverages[Symbol.iterator]();!(F=(lt=X.next()).done);F=!0){var ct=lt.value,it=new this._pointClass(ct,n);if(this._attachListeners(it,ct),this._layerGroup.addLayer(it),this._layers.push(it),it.load(),this._popupFn){var gt=this._popupFn(it.coverage);it.bindPopup(gt)}}}catch(xt){Y=!0,at=xt}finally{try{!F&&X.return&&X.return()}finally{if(Y)throw at}}}},{key:"onRemove",value:function(e){e.removeLayer(this._layerGroup),this._layerGroup=Et.layerGroup(),this._layers=[]}},{key:"bindPopupEach",value:function(e){this._popupFn=e}},{key:"_attachListeners",value:function(e,n){var y=this;e.once("dataLoad",function(){++y._layerLoadCount,y._fireIfOnAddDone()}).once("error",function(H){y._layerErrors.push(H)}).on("click",function(H){H.coverage=n,y.fire("click",H)})}},{key:"_fireIfOnAddDone",value:function(){var e=this;this._layerLoadCount===this._layers.length&&(this._layerErrors.length>0?this.fire("error",{errors:this._layerErrors}):(this._initKdtree(),this.initializePalette().then(function(){e._layerGroup.addTo(e._map),e.fire("afterAdd")})))}},{key:"_initKdtree",value:function(){var e=this._layers.map(function(H){var F=H.getLatLng();return F.layer=H,F});this._kdtree=new mr(e,function(H,F){return Et.LatLng.prototype.distanceTo.call(H,F)},["lat","lng"])}},{key:"getBounds",value:function(){return Et.latLngBounds(this._layers.map(function(e){return e.getLatLng()}))}},{key:"getValueAt",value:function(e,n){var y=this._kdtree.nearest(e,1,n);if(y.length>0)return y[0][0].layer.getValue()}},{key:"computePaletteExtent",value:function(e){if(!this._param)throw new Error("palette extent cannot be set when no parameter has been chosen");var xt,y=void 0;if("full"===e)y=this._layers;else{if("fov"!==e)throw new Error("Unsupported: "+e);xt=this._map.getBounds(),y=this._layers.filter(function(Pt){return xt.contains(Pt.getLatLng())})}var H=1/0,F=-1/0,Y=!0,at=!1,lt=void 0;try{for(var X,ct=y[Symbol.iterator]();!(Y=(X=ct.next()).done);Y=!0){var gt=X.value.getValue();null!=gt&&(H=Math.min(H,gt),F=Math.max(F,gt))}}catch(xt){at=!0,lt=xt}finally{try{!Y&&ct.return&&ct.return()}finally{if(at)throw lt}}return e=sr([H,F]),Promise.resolve(e)}},{key:"redraw",value:function(){var e=!0,n=!1,y=void 0;try{for(var H,F=this._layers[Symbol.iterator]();!(e=(H=F.next()).done);e=!0)H.value.redraw()}catch(at){n=!0,y=at}finally{try{!e&&F.return&&F.return()}finally{if(n)throw y}}}},{key:"parameter",get:function(){return this._param}}]),D}(er(Et.Layer)),Zt=function(tt){function D(e,n){_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));Bt.isDomain(e)&&(e=Bt.fromDomain(e),delete n.keys,n.parameter=e.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),Et.Util.setOptions(y,n),y._cov=e;var H=n.keys?n.keys[0]:n.parameter;return y._param=H?e.parameters.get(H):null,y._axesSubset={z:{coordPref:n.vertical}},y._defaultColor=n.defaultColor||Rt,y.showNoData=n.showNoData,y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this.load().then(function(){return n.initializePalette()}).then(function(){n._addMarker(),n.fire("afterAdd")})}},{key:"_loadCoverageSubset",value:function(){var e=this._axesSubset.z;if(null==e.coordPref)e.idx=e.coord=void 0;else{var n=this.domain.axes.get("z").values;e.idx=Bt.indexOfNearest(n,e.coordPref),e.coord=n[e.idx]}}},{key:"onRemove",value:function(){this._removeMarker()}},{key:"getBounds",value:function(){return Et.latLngBounds([this.getLatLng()])}},{key:"getLatLng",value:function(){var e=this.domain.axes.get(this._projX).values[0],n=this.domain.axes.get(this._projY).values[0],y=this.projection.unproject({x:e,y:n});return Et.latLng(y)}},{key:"canUsePalette",value:function(){return void 0!==this.vertical}},{key:"computePaletteExtent",value:function(e){if("full"===e){if(!this.parameter)throw new Error("palette extent cannot be set when no parameter has been chosen");return e=sr(e=Bt.minMaxOfRange(this.range)),Promise.resolve(e)}throw new Error("Unknown extent specification: "+e)}},{key:"getValue",value:function(){if(this._param&&void 0!==this._axesSubset.z.coord)return this.range.get({z:this._axesSubset.z.idx})}},{key:"getValueAt",value:function(e,n){if(this.getLatLng().distanceTo(e)<=n)return this.getValue()}},{key:"_getColor",value:function(e){if(null===e)return this._defaultColor;if(void 0===e)return this._defaultColor;var n=this.getPaletteIndex(e),y=this.palette;return{r:y.red[n],g:y.green[n],b:y.blue[n]}}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}},{key:"vertical",get:function(){return this._axesSubset.z.coord},set:function(e){this._axesSubset.z.coordPref=e,this._loadCoverageSubset(),this.redraw(),this.fire("axisChange",{axis:"vertical"})}},{key:"verticalSlices",get:function(){var e=this.domain.axes.get("z").values;return ArrayBuffer.isView(e)&&(e=[].concat(cr(e))),e}}]),D}(er(Vr(rr(Et.Layer)))),ce=function(tt){function D(e,n){_e(this,D),n.pointClass=Zt;var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,e,n));return n.pointOptionsFn=function(){return{vertical:y._vertical}},y._vertical=n.vertical,y}return me(D,tt),Me(D,[{key:"canUsePalette",value:function(){return void 0!==this._vertical}},{key:"vertical",set:function(e){this._vertical=e;var n=!0,y=!1,H=void 0;try{for(var F,Y=this._layers[Symbol.iterator]();!(n=(F=Y.next()).done);n=!0)F.value.vertical=e}catch(lt){y=!0,H=lt}finally{try{!n&&Y.return&&Y.return()}finally{if(y)throw H}}}}]),D}(Ut),Oe="black",ke=function(tt){function D(e,n){_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));Bt.isDomain(e)&&(e=Bt.fromDomain(e),n.parameter=e.parameters.keys().next().value,delete n.keys),n.paletteExtent||(n.paletteExtent="full"),Et.Util.setOptions(y,n),y._cov=e;var H=n.keys?n.keys[0]:n.parameter;return y._param=H?e.parameters.get(H):null,y._defaultColor=n.defaultColor||Oe,y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this.load().then(function(){return n.initializePalette()}).then(function(){n._unproject(),n._addPolygons(),n._pointInPolygonPreprocess(),n.fire("afterAdd")})}},{key:"_unproject",value:function(){var e=this.projection.unproject,n=this.domain.axes.get("composite"),y=n.coordinates.indexOf(this._projX),H=n.coordinates.indexOf(this._projY);this._polygonsLonLat=n.values.map(function(F){return F.map(function(Y){return Y.map(function(at){var lt=e({x:at[y],y:at[H]});return[lt.lon,lt.lat]})})})}},{key:"onRemove",value:function(e){this._removePolygons()}},{key:"getBounds",value:function(){return this._geojson.getBounds()}},{key:"getLatLng",value:function(){return this.getBounds().getCenter()}},{key:"computePaletteExtent",value:function(e){if("full"===e){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return e=sr(e=Bt.minMaxOfRange(this.range)),Promise.resolve(e)}throw new Error("Unknown extent specification: "+e)}},{key:"_pointInPolygonPreprocess",value:function(){var e=this._polygonsLonLat;e.forEach(function(y){return Bt.ensureClockwisePolygon(y,!1)}),this._pointInPolygons=Bt.getPointInPolygonsFn(e)}},{key:"_addPolygons",value:function(){for(var e=this,n=this._polygonsLonLat,y=[],H=0;H<n.length;H++)y.push({type:"Feature",properties:{index:H,color:this._getColor(this._getValue(H))},geometry:{type:"Polygon",coordinates:n[H]}});this._geojson=Et.geoJson(y,{style:function(F){return{color:F.properties.color,fillOpacity:1,stroke:!1}},onEachFeature:function(F,Y){Y.on("click",function(at){at.index=F.properties.index,e.fire("click",at)})}}),this._geojson.addTo(this._map)}},{key:"_removePolygons",value:function(){this._map.removeLayer(this._geojson),delete this._geojson}},{key:"_getValue",value:function(e){if(this._param)return this.range.get({composite:e})}},{key:"getValueAt",value:function(e){var n=this._pointInPolygons([e.lng,e.lat]);if(n>=0)return this._getValue(n)}},{key:"_getColor",value:function(e){if(null===e)return this._defaultColor;if(void 0===e)return this._defaultColor;var n=this.getPaletteIndex(e),y=this.palette;return"rgb("+y.red[n]+", "+y.green[n]+", "+y.blue[n]+")"}},{key:"_updatePolygons",value:function(){this._removePolygons(),this._addPolygons()}},{key:"redraw",value:function(){this._updatePolygons(),this._geojson.redraw()}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}}]),D}(er(rr(Et.Layer))),Ue=function(tt){function D(e,n){_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));Bt.isDomain(e)&&(e=Bt.fromDomain(e),delete n.keys,n.parameter=e.parameters.keys().next().value),n.paletteExtent||(n.paletteExtent="full"),Et.Util.setOptions(y,n),y._cov=e;var H=n.keys?n.keys[0]:n.parameter;return y._param=H?e.parameters.get(H):null,y._axesSubset={t:{coordPref:n.time}},y._defaultColor=n.defaultColor||Rt,y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;this._map=e,this.load().then(function(){return n.initializePalette()}).then(function(){n._unproject(),n._addPolygon(),n._pointInPolygonPreprocess(),n.fire("afterAdd")})}},{key:"_unproject",value:function(){var e=this.projection.unproject,n=this.domain.axes.get("composite"),y=n.coordinates.indexOf(this._projX),H=n.coordinates.indexOf(this._projY);this._polygonLonLat=n.values[0].map(function(F){return F.map(function(Y){var at=e({x:Y[y],y:Y[H]});return[at.lon,at.lat]})})}},{key:"_loadCoverageSubset",value:function(){var e=this._axesSubset.t;if(null==e.coordPref)e.idx=e.coord=void 0;else{var n=this.domain.axes.get("t").values.map(function(y){return y.getTime()});e.idx=Bt.indexOfNearest(n,e.coordPref.getTime()),e.coord=n[e.idx]}}},{key:"onRemove",value:function(){this._removePolygon()}},{key:"getBounds",value:function(){return this._geojson.getBounds()}},{key:"getLatLng",value:function(){return this.getBounds().getCenter()}},{key:"bindPopup",value:function(){for(var e=arguments.length,n=Array(e),y=0;y<e;y++)n[y]=arguments[y];var H;return this._popup=n,this._geojson&&(H=this._geojson).bindPopup.apply(H,n),this}},{key:"openPopup",value:function(){return this._geojson.openPopup(),this}},{key:"closePopup",value:function(){return this._geojson.closePopup(),this}},{key:"canUsePalette",value:function(){return void 0!==this.time}},{key:"computePaletteExtent",value:function(e){if("full"===e){if(!this.parameter)throw new Error("palette extent cannot be computed when no parameter has been chosen");return e=sr(e=Bt.minMaxOfRange(this.range)),Promise.resolve(e)}throw new Error("Unknown extent specification: "+e)}},{key:"_pointInPolygonPreprocess",value:function(){var e=this._polygonLonLat;Bt.ensureClockwisePolygon(e,!1);var y=Bt.getPointInPolygonsFn([e]);this._pointInPolygon=function(H){return-1!==y(H)}}},{key:"_addPolygon",value:function(){var H,e=this,n=this._polygonLonLat,y={type:"Feature",properties:{color:this._getColor(this.getValue())},geometry:{type:"Polygon",coordinates:n}};this._geojson=Et.geoJson(y,{style:function(F){return{color:F.properties.color,fillOpacity:1,stroke:!1}},onEachFeature:function(F,Y){Y.on("click",function(at){return e.fire("click",at)})}}),this._popup&&(H=this._geojson).bindPopup.apply(H,cr(this._popup)),this._geojson.addTo(this._map)}},{key:"_removePolygon",value:function(){this._map.removeLayer(this._geojson),delete this._geojson}},{key:"getValue",value:function(){if(this._param&&void 0!==this._axesSubset.t.coord)return this.range.get({t:this._axesSubset.t.idx})}},{key:"getValueAt",value:function(e){if(!e)throw new Error("latlng parameter missing");if(this._pointInPolygon([e.lng,e.lat]))return this.getValue()}},{key:"_getColor",value:function(e){if(null===e)return this._defaultColor;if(void 0===e)return this._defaultColor;var n=this.getPaletteIndex(e),y=this.palette;return"rgb("+y.red[n]+", "+y.green[n]+", "+y.blue[n]+")"}},{key:"_updatePolygon",value:function(){this._removePolygon(),this._addPolygon()}},{key:"redraw",value:function(){this._updatePolygon(),this._geojson.redraw()}},{key:"coverage",get:function(){return this._cov}},{key:"parameter",get:function(){return this._param}},{key:"time",set:function(e){var n=this.time;this._axesSubset.t.coordPref=e?e.toISOString():void 0,this._loadCoverageSubset(),n!==this.time&&(this.redraw(),this.fire("axisChange",{axis:"time"}))},get:function(){if(this._axesSubset.t.coord){var e=this.domain.axes.get("t").values[this._axesSubset.t.idx];return new Date(e)}}},{key:"timeSlices",get:function(){return this.domain.axes.get("t").values.map(function(e){return new Date(e)})}}]),D}(er(rr(Et.Layer))),De="https://covjson.org/def/",ye=De+"core#",Ce=De+"domainTypes#",Qe=Ce+"Point",ge=Ce+"PointSeries",ze=Ce+"VerticalProfile",Fe=Ce+"Grid",Ie=Ce+"Trajectory",Ze=Ce+"PolygonSeries",pe=Ce+"MultiPolygon",be=ye+"tuple",$e=ye+"polygon",Ee=(Ge(re={},Fe,Nt),Ge(re,Qe,te),Ge(re,ge,ue),Ge(re,ze,Zt),Ge(re,Ie,Ct),Ge(re,pe,ke),Ge(re,Ze,Ue),re),or=(Ge(fe={},Qe,Ut),Ge(fe,ze,ce),fe),Pr=function(tt){function D(e){_e(this,D);var n=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));return n._syncProps=e.syncProperties||{},n._match=e.match||Or,n._paramLayers=new Map,n._layerListeners=new Map,n._propSyncing=new Set,n}return me(D,tt),Me(D,[{key:"addLayer",value:function(e){var n=this;if(e.parameter){var H=Array.from(this._paramLayers.keys()).find(function(Y){return n._match(Y,e.parameter)}),F=void 0;H?(this._paramLayers.get(F=H).add(e),this._syncProperties(F)):this._paramLayers.set(F=e.parameter,new Set([e])),this._registerLayerListeners(e,F),H||this.fire("parameterAdd",{syncLayer:new jr(F,this)})}else console.log("layer has no parameter, skipping parameter sync")}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(e){if(this.paused=!1,e){var n=!0,y=!1,H=void 0;try{for(var F,Y=this._paramLayers.keys()[Symbol.iterator]();!(n=(F=Y.next()).done);n=!0)this._syncProperties(F.value)}catch(lt){y=!0,H=lt}finally{try{!n&&Y.return&&Y.return()}finally{if(y)throw H}}}}},{key:"_removeLayer",value:function(e,n){var y=!0,H=!1,F=void 0;try{for(var Y,at=this._layerListeners.get(e)[Symbol.iterator]();!(y=(Y=at.next()).done);y=!0){var lt=Ae(Y.value,2);e.off(lt[0],lt[1])}}catch(it){H=!0,F=it}finally{try{!y&&at.return&&at.return()}finally{if(H)throw F}}this._layerListeners.delete(e),this._paramLayers.get(n).delete(e),0===this._paramLayers.get(n).size&&(this._paramLayers.delete(n),this.fire("_parameterRemove",{param:n}))}},{key:"_registerLayerListeners",value:function(e,n){var y=this,H=new Map([["remove",function(){return y._removeLayer(e,n)}]]),F=!0,Y=!1,at=void 0;try{for(var lt,X=function(){var ee=lt.value;H.set(ee+"Change",function(){return y._syncProperty(n,ee)})},ct=Object.keys(this._syncProps)[Symbol.iterator]();!(F=(lt=ct.next()).done);F=!0)X()}catch(ee){Y=!0,at=ee}finally{try{!F&&ct.return&&ct.return()}finally{if(Y)throw at}}var it=!0,gt=!1,xt=void 0;try{for(var Pt,St=H[Symbol.iterator]();!(it=(Pt=St.next()).done);it=!0){var Dt=Ae(Pt.value,2);e.on(Dt[0],Dt[1])}}catch(ee){gt=!0,xt=ee}finally{try{!it&&St.return&&St.return()}finally{if(gt)throw xt}}this._layerListeners.set(e,H)}},{key:"_syncProperties",value:function(e){var n=!0,y=!1,H=void 0;try{for(var F,Y=Object.keys(this._syncProps)[Symbol.iterator]();!(n=(F=Y.next()).done);n=!0)this._syncProperty(e,F.value)}catch(lt){y=!0,H=lt}finally{try{!n&&Y.return&&Y.return()}finally{if(y)throw H}}}},{key:"_syncProperty",value:function(e,n){if(!this.paused&&!this._propSyncing.has(n)){var y=this._syncProps[n],H=[].concat(cr(this._paramLayers.get(e))).map(function(it){return it[n]}).reduce(y);this._propSyncing.add(n);var F=!0,Y=!1,at=void 0;try{for(var lt,X=this._paramLayers.get(e)[Symbol.iterator]();!(F=(lt=X.next()).done);F=!0)lt.value[n]=H}catch(it){Y=!0,at=it}finally{try{!F&&X.return&&X.return()}finally{if(Y)throw at}}this._propSyncing.delete(n),this.fire("_syncPropChange",{param:e,prop:n})}}}]),D}(zr(Et.Class)),jr=function(tt){function D(e,n){_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));y._param=e,n.on("_parameterRemove",function(it){it.param===e&&y.fire("remove")}),n.on("_syncPropChange",function(it){it.param===e&&y.fire(it.prop+"Change")});var H=function(){return n._paramLayers.get(e)},F=!0,Y=!1,at=void 0;try{for(var lt,X=function(){var it=lt.value;Object.defineProperty(y,it,{get:function(){return H().values().next().value[it]},set:function(gt){n._propSyncing.add(it);var xt=!0,Pt=!1,St=void 0;try{for(var Dt,Lt=H()[Symbol.iterator]();!(xt=(Dt=Lt.next()).done);xt=!0)Dt.value[it]=gt}catch(ee){Pt=!0,St=ee}finally{try{!xt&&Lt.return&&Lt.return()}finally{if(Pt)throw St}}n._propSyncing.delete(it),y.fire(it+"Change")},enumerable:!0})},ct=Object.keys(n._syncProps)[Symbol.iterator]();!(F=(lt=ct.next()).done);F=!0)X()}catch(it){Y=!0,at=it}finally{try{!F&&ct.return&&ct.return()}finally{if(Y)throw at}}return y}return me(D,tt),Me(D,[{key:"parameter",get:function(){return this._param}}]),D}(zr(Et.Class)),Ir=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D),n.maxWidth=n.maxWidth||350;var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,n));y._covs=Array.isArray(e)?e:[e],y._language=n.language,y._precision=n.precision||4,y._labels=n.labels?n.labels:new Array(y._covs.length),n.parameters&&(n.parameters=n.keys);var H=[];if(n.keys)H=Array.isArray(n.keys[0])?n.keys:n.keys.map(function(St){return[St]});else for(var F=0;F<y._covs.length;F++){var Y=!0,at=!1,lt=void 0;try{for(var X,ct=y._covs[F].parameters.keys()[Symbol.iterator]();!(Y=(X=ct.next()).done);Y=!0){var it=X.value,gt=new Array(y._covs.length);gt[F]=it,H.push(gt)}}catch(St){at=!0,lt=St}finally{try{!Y&&ct.return&&ct.return()}finally{if(at)throw lt}}}if((H=H.filter(function(St){return!St.every(function(Dt){return!Dt})})).some(function(St){return St.length!==y._covs.length}))throw new Error("Length of each parameter group must match number of coverages");y._paramKeyGroups=H,y._paramKeys=new Map;for(var xt=function(St){var Dt=y._paramKeyGroups.map(function(Lt){return Lt[St]}).filter(function(Lt){return Lt});y._paramKeys.set(y._covs[St],Dt)},Pt=0;Pt<y._covs.length;Pt++)xt(Pt);return y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;Je(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"onAdd",this).call(this,e),e.fire("dataloading");var y=Promise.all(this._covs.map(function(F){return F.loadDomain()})),H=Promise.all(this._covs.map(function(F){return F.loadRanges(n._paramKeys.get(F))}));Promise.all([y,H]).then(function(F){var Y=Ae(F,2),lt=Y[1];n._domains=Y[0],n._ranges=lt,n._addPlotToPopup(),n.fire("dataLoad"),n.fire("afterAdd"),e.fire("dataload")}).catch(function(F){console.error(F),n.fire("error",F),e.fire("dataload")})}},{key:"_addPlotToPopup",value:function(){var e=this,y=this._getPlotElement(this._paramKeyGroups[0]),H=document.createElement("div");this._paramKeyGroups.length>1&&function(){var F=document.createElement("select"),Y=!0,at=!1,lt=void 0;try{for(var X,ct=e._paramKeyGroups.map(function(Dt,Lt){return[Dt,Lt]})[Symbol.iterator]();!(Y=(X=ct.next()).done);Y=!0){var it=Ae(X.value,2),xt=it[1],Pt=e._getRefParam(it[0]),St=document.createElement("option");St.value=xt,St.text=Bt.getLanguageString(Pt.observedProperty.label,e._language),F.appendChild(St)}}catch(Dt){at=!0,lt=Dt}finally{try{!Y&&ct.return&&ct.return()}finally{if(at)throw lt}}F.addEventListener("change",function(){H.removeChild(y);var Dt=e._paramKeyGroups[parseInt(F.value)];y=e._getPlotElement(Dt),H.appendChild(y)}),H.appendChild(F)}(),H.appendChild(y),this.setContent(H)}},{key:"_getRefParam",value:function(e){var n=ri(this._covs,e),y=Ae(n.filter(function(at){return Ae(at,2)[1]})[0],2);return y[0].parameters.get(y[1])}},{key:"_getPlotElement",value:function(e){var n=this,y=this._domains[0],H=ri(this._covs,e),F=this._getRefParam(e),Y="Vertical",at="",lt=Bt.getReferenceObject(y,"z");if(lt&&1===lt.coordinates.length){var X=lt.system;if(X.cs&&(X.cs.axes||X.cs.csAxes)){var ct=X.cs.axes?X.cs.axes[0]:X.cs.csAxes[0];at=Bt.stringifyUnit(ct.unit,this._language),ct.name&&(Y=Bt.getLanguageString(ct.name,this._language))}}var it=Y;at&&(it+=" ("+at+")");for(var gt=Bt.stringifyUnit(F.unit,this._language),xt=Bt.getLanguageString(F.observedProperty.label,this._language),Pt={},St=[],Dt={},Lt=0;Lt<this._covs.length;Lt++){var ie=H[Lt][1];if(ie){var ee="x"+Lt,ne=F.key+Lt;Dt[ne]=this._labels[Lt]?this._labels[Lt]:xt,Pt[ne]=ee;for(var Qt=this._domains[Lt].axes.get("z").values,Se=this._ranges[Lt].get(ie),qe=[ee],Te=[ne],Yt=0;Yt<Qt.length;Yt++){var Be=Se.get({z:Yt});null!==Be&&(qe.push(Qt[Yt]),Te.push(Be))}St.push(qe),St.push(Te)}}var Lr=document.createElement("div");return Lr.style.width="350px",Lr.style.height="300px",hr.generate({bindto:Lr,data:{xs:Pt,columns:St,names:Dt},axis:{rotated:!0,x:{tick:{count:10,format:function(tr){return tr.toPrecision(n._precision)}},label:{text:it,position:"outer-center"}},y:{tick:{count:7,format:function(tr){return tr.toPrecision(n._precision)}},label:{text:xt+(gt?" ("+gt+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1},tooltip:{format:{title:function(tr){return Y+": "+tr.toPrecision(n._precision)+" "+at},value:function(tr,si,oi){return tr.toPrecision(n._precision)+" "+gt}}},zoom:{enabled:!0,rescale:!0},size:{height:300,width:350}}),Lr}}]),D}(Et.Popup),Tr=function(tt){function D(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,D),n.maxWidth=n.maxWidth||350;var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,n));y._covs=Array.isArray(e)?e:[e],y._language=n.language,y._precision=n.precision||4,y._labels=n.labels?n.labels:new Array(y._covs.length),n.parameters&&(n.parameters=n.keys);var H=[];if(n.keys)H=Array.isArray(n.keys[0])?n.keys:n.keys.map(function(St){return[St]});else for(var F=0;F<y._covs.length;F++){var Y=!0,at=!1,lt=void 0;try{for(var X,ct=y._covs[F].parameters.keys()[Symbol.iterator]();!(Y=(X=ct.next()).done);Y=!0){var it=X.value,gt=new Array(y._covs.length);gt[F]=it,H.push(gt)}}catch(St){at=!0,lt=St}finally{try{!Y&&ct.return&&ct.return()}finally{if(at)throw lt}}}if((H=H.filter(function(St){return!St.every(function(Dt){return!Dt})})).some(function(St){return St.length!==y._covs.length}))throw new Error("Length of each parameter group must match number of coverages");y._paramKeyGroups=H,y._paramKeys=new Map;for(var xt=function(St){var Dt=y._paramKeyGroups.map(function(Lt){return Lt[St]}).filter(function(Lt){return Lt});y._paramKeys.set(y._covs[St],Dt)},Pt=0;Pt<y._covs.length;Pt++)xt(Pt);return y}return me(D,tt),Me(D,[{key:"onAdd",value:function(e){var n=this;Je(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"onAdd",this).call(this,e),e.fire("dataloading");var y=Promise.all(this._covs.map(function(F){return F.loadDomain()})),H=Promise.all(this._covs.map(function(F){return F.loadRanges(n._paramKeys.get(F))}));Promise.all([y,H]).then(function(F){var Y=Ae(F,2),lt=Y[1];n._domains=Y[0],n._ranges=lt,n._addPlotToPopup(),n.fire("dataLoad"),n.fire("afterAdd"),e.fire("dataload")}).catch(function(F){console.error(F),n.fire("error",F),e.fire("dataload")})}},{key:"_addPlotToPopup",value:function(){var e=this,y=this._getPlotElement(this._paramKeyGroups[0]),H=document.createElement("div");this._paramKeyGroups.length>1&&function(){var F=document.createElement("select"),Y=!0,at=!1,lt=void 0;try{for(var X,ct=e._paramKeyGroups.map(function(Dt,Lt){return[Dt,Lt]})[Symbol.iterator]();!(Y=(X=ct.next()).done);Y=!0){var it=Ae(X.value,2),xt=it[1],Pt=e._getRefParam(it[0]),St=document.createElement("option");St.value=xt,St.text=Bt.getLanguageString(Pt.observedProperty.label,e._language),F.appendChild(St)}}catch(Dt){at=!0,lt=Dt}finally{try{!Y&&ct.return&&ct.return()}finally{if(at)throw lt}}F.addEventListener("change",function(){H.removeChild(y);var Dt=e._paramKeyGroups[parseInt(F.value)];y=e._getPlotElement(Dt),H.appendChild(y)}),H.appendChild(F)}(),H.appendChild(y),this.setContent(H)}},{key:"_getRefParam",value:function(e){var n=Cr(this._covs,e),y=Ae(n.filter(function(at){return Ae(at,2)[1]})[0],2);return y[0].parameters.get(y[1])}},{key:"_getPlotElement",value:function(e){for(var n=this,y=Cr(this._covs,e),H=this._getRefParam(e),Y=Bt.stringifyUnit(H.unit,this._language),at=Bt.getLanguageString(H.observedProperty.label,this._language),lt={},X=[],ct={},it=0;it<this._covs.length;it++){var gt=y[it][1];if(gt){var xt="x"+it,Pt=H.key+it;ct[Pt]=this._labels[it]?this._labels[it]:at,lt[Pt]=xt;for(var St=this._domains[it].axes.get("t").values,Dt=this._ranges[it].get(gt),Lt=[xt],ie=[Pt],ee=0;ee<St.length;ee++){var ne=Dt.get({t:ee});if(null!==ne){var Qt=new Date(St[ee]);Lt.push(Qt),ie.push(ne)}}X.push(Lt),X.push(ie)}}var qe=document.createElement("div");return qe.style.width=this.options.maxWidth+"px",qe.style.height="300px",hr.generate({bindto:qe,data:{xs:lt,columns:X,names:ct},axis:{x:{type:"timeseries",tick:{format:this.options.timeFormat},label:{text:"Time",position:"outer-center"}},y:{tick:{count:7,format:function(Te){return Te.toPrecision(n._precision)}},label:{text:at+(Y?" ("+Y+")":""),position:"outer-middle"}}},grid:{x:{show:!0},y:{show:!0}},legend:{show:this._covs.length>1},tooltip:{format:{value:function(Te,Yt,Be){return Te.toPrecision(n._precision)+" "+Y}}},zoom:{enabled:!0,rescale:!0},size:{height:300,width:this.options.maxWidth}}),qe}}]),D}(Et.Popup),nr=function(tt){function D(e,n){_e(this,D);var y=we(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,e,n)),H=y.options.layers||[];return y._maxDistanceForPointsInPx=y.options.maxDistanceForPointsInPx||20,y.coverageLayers=new Set(H.filter(function(F){return F.getValueAt})),y}return me(D,tt),Me(D,[{key:"addCoverageLayer",value:function(e){return e.getValueAt?(this.coverageLayers.add(e),this.updateData(),this):this}},{key:"removeCoverageLayer",value:function(e){return this.coverageLayers.delete(e),this.updateData(),this}},{key:"onAdd",value:function(e){this._map=e,Je(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"onAdd",this).call(this,e),this.updateData()}},{key:"onRemove",value:function(e){Je(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"onRemove",this).call(this,e),this._map=null}},{key:"setLatLng",value:function(e){return Je(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"setLatLng",this).call(this,e),this.updateData(),this}},{key:"hasData",value:function(){return this._hasData}},{key:"updateData",value:function(){if(this._map){var e="",n=this.getLatLng(),y=!0,H=!1,F=void 0;try{for(var Y,at=this.coverageLayers[Symbol.iterator]();!(y=(Y=at.next()).done);y=!0){var lt=Y.value,X=Pi(this._map)*this._maxDistanceForPointsInPx,ct=lt.getValueAt(n,X);if(null!=ct){var it=lt.parameter,gt=it.observedProperty.categories?"":Bt.stringifyUnit(it.unit);if(it.categoryEncoding){var xt=Bt.getCategory(it,ct);ct=Bt.getLanguageString(xt.label)}e+="<div><strong>"+Bt.getLanguageString(it.observedProperty.label)+"</strong>: "+ct+" "+gt+"</div>"}}}catch(Pt){H=!0,F=Pt}finally{try{!y&&at.return&&at.return()}finally{if(H)throw F}}return e||(this._hasData=!1,e="No data."),this._hasData=!0,this.setContent(e),this}}}]),D}(Et.Popup),kr=function(tt){function D(){return _e(this,D),we(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return me(D,tt),D}(xr(nr));mt.legend=function Nr(tt){var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.position=D.position||"bottomright",tt.parameter.observedProperty.categories?new Mr(tt,D):new Xr(tt,D)},mt.DiscreteLegend=Mr,mt.ContinuousLegend=Xr,mt.TimeAxis=wr,mt.VerticalAxis=pr,mt.Dropdown=qr,mt.Grid=Nt,mt.VerticalProfile=Zt,mt.Trajectory=Ct,mt.Point=te,mt.PointSeries=ue,mt.MultiPolygon=ke,mt.PolygonSeries=Ue,mt.PointCollection=Ut,mt.VerticalProfileCollection=ce,mt.ParameterSync=Pr,mt.PaletteMixin=er,mt.CoverageMixin=rr,mt.CircleMarkerMixin=Vr,mt.VerticalProfilePlot=Ir,mt.TimeSeriesPlot=Tr,mt.DraggableValuePopup=kr,mt.ValuePopup=nr,mt.DraggablePopupMixin=xr,mt.dataLayer=function Ne(tt,D){var e=gr(tt);if(!e)throw new Error("No "+(tt.type===Bt.COVERAGECOLLECTION?"collection ":"")+"layer class found for domainType="+tt.domainType);return new e(tt,D)},mt.dataLayerClass=gr,mt.linearPalette=dt,mt.directPalette=ur,mt.cssToRGB=Ve,mt.paletteFromObject=Sr,mt.scale=lr,mt.enlargeExtentIfEqual=sr,mt.PaletteManager=wt,mt.COVJSON_POINT=Qe,mt.COVJSON_POINTSERIES=ge,mt.COVJSON_VERTICALPROFILE=ze,mt.COVJSON_GRID=Fe,mt.COVJSON_TRAJECTORY=Ie,mt.COVJSON_POLYGONSERIES=Ze,mt.COVJSON_MULTIPOLYGON=pe,mt.COVJSON_DATATYPE_TUPLE=be,mt.COVJSON_DATATYPE_POLYGON=$e,mt.COVERAGE=Bt.COVERAGE,mt.COVERAGECOLLECTION=Bt.COVERAGECOLLECTION,mt.DOMAIN=Bt.DOMAIN}(this.C=this.C||{},L,CovUtils,this.c3||{});